"use strict";define(["jquery","knockout"],function($,ko){var viewModel={iframeUrl:ko.observable(""),imgUrl:ko.observable("")};return{init:function(wrapper,util,params,callback){var bsize=$("div#mobilepreviewpanel"),myUrl=null,myImg=null,prevIframe=$("iframe#prevMobile"),prevCont=$("div#prevMobileCont");"object"==typeof window.top&&(myUrl=window.top.location.href,myUrl+=myUrl.indexOf("?")>0?"&dnnprintmode=true":"?dnnprintmode=true");var index=window.location.href.indexOf("admin/");"string"==typeof params.preview?("portrait"==params.preview&&(index>0&&(myImg=window.location.href.substring(0,index)+"admin/personabar/images/phone-portrait.png"),prevIframe.css("width","265px"),prevIframe.css("height","463px"),prevIframe.css("left","33px"),prevIframe.css("top","82px"),prevCont.css("left",(bsize.width()-342)/2+"px"),prevCont.css("top",(bsize.height()-657)/2+"px")),"landscape"==params.preview&&(index>0&&(myImg=window.location.href.substring(0,index)+"admin/personabar/images/phone-landscape.png"),prevIframe.css("width","463px"),prevIframe.css("height","265px"),prevIframe.css("left","80px"),prevIframe.css("top","38px"),prevCont.css("left",(bsize.width()-649)/2+"px"),prevCont.css("top",(bsize.height()-343)/2+"px"))):(index>0&&(myImg=window.location.href.substring(0,index)+"admin/personabar/images/phone-portrait.png"),prevIframe.css("width","265px"),prevIframe.css("height","463px"),prevIframe.css("left","33px"),prevIframe.css("top","82px"),prevCont.css("left",(bsize.width()-342)/2+"px"),prevCont.css("top",(bsize.height()-657)/2+"px")),viewModel.iframeUrl(myUrl),viewModel.imgUrl(myImg),ko.applyBindings(viewModel,wrapper[0]),"function"==typeof callback&&callback()},load:function(params,callback){var bsize=$("div#mobilepreviewpanel"),prevIframe=$("iframe#prevMobile"),prevCont=$("div#prevMobileCont"),myImg=null,index=window.location.href.indexOf("admin/");"string"==typeof params.preview?("portrait"==params.preview&&(index>0&&(myImg=window.location.href.substring(0,index)+"admin/personabar/images/phone-portrait.png"),prevIframe.css("width","265px"),prevIframe.css("height","463px"),prevIframe.css("left","33px"),prevIframe.css("top","82px"),prevCont.css("left",(bsize.width()-342)/2+"px"),prevCont.css("top",(bsize.height()-657)/2+"px")),"landscape"==params.preview&&(index>0&&(myImg=window.location.href.substring(0,index)+"admin/personabar/images/phone-landscape.png"),prevIframe.css("width","463px"),prevIframe.css("height","265px"),prevIframe.css("left","80px"),prevIframe.css("top","38px"),prevCont.css("left",(bsize.width()-649)/2+"px"),prevCont.css("top",(bsize.height()-343)/2+"px"))):(index>0&&(myImg=window.location.href.substring(0,index)+"admin/personabar/images/phone-portrait.png"),prevIframe.css("width","265px"),prevIframe.css("height","463px"),prevIframe.css("left","33px"),prevIframe.css("top","82px"),prevCont.css("left",(bsize.width()-342)/2+"px"),prevCont.css("top",(bsize.height()-657)/2+"px")),viewModel.imgUrl(myImg),"function"==typeof callback&&callback()}}});