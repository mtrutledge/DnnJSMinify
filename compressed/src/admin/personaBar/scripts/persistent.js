"use strict";define(["jquery"],function($){return{init:function(cfg,sf){var defaultSettings={period:"Week",comparativeTerm:"1 w",startDate:"",endDate:"",expandPersonaBar:!0,expandTasksPane:!0,legends:[]},settings=null,serviceFramework=sf.init(cfg.siteRoot,cfg.tabId,cfg.antiForgeryToken),inIframe=window!==window.top;return{load:function(){return settings||(settings=$.extend(defaultSettings,cfg.userSettings)),settings},save:function(s,callback){s&&(settings=$.extend(defaultSettings,s),serviceFramework.controller="UserSettings",serviceFramework.postsilence("UpdateUserSettings",settings,function(){inIframe?window.parent.__personaBarUserSettings&&$.extend(window.parent.__personaBarUserSettings,settings):window.__personaBarUserSettings&&$.extend(window.__personaBarUserSettings,settings),$.extend(cfg.userSettings,settings),"function"==typeof callback&&callback()}))}}}}});