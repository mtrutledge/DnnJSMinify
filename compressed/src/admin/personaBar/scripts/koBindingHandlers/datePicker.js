define(["jquery","knockout","pikaday","moment"],function($,ko,pikaday,moment){"use strict";var format="MM/DD/YYYY";ko.bindingHandlers.datePicker={init:function(element,valueAccessor,allBindings){var value=valueAccessor(),valueUnwrapped=ko.unwrap(value),minDate=allBindings.get("minDate");minDate&&minDate.subscribe(function(value){var picker=$(element).data("picker"),date=value instanceof Date?new Date(value.getTime()):new Date;date.setHours(0,0,0,0),picker.setMinDate(date),picker.setDate(moment(date).format(format))});var picker=new pikaday({minDate:new Date,defaultDate:valueUnwrapped,format:format,bound:!1,onSelect:function(){value(picker.toString())}});$(element).append(picker.el),$(element).data("picker",picker)},update:function(element,valueAccessor){var value=valueAccessor(),valueUnwrapped=ko.unwrap(value),picker=$(element).data("picker");picker.setDate(valueUnwrapped)}}});