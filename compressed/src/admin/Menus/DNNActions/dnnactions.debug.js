!function($,window){$.fn.dnnActionMenu=function(options){var opts=$.extend({},$.fn.dnnActionMenu.defaultOptions,options),$moduleWrap=this;return $moduleWrap.each(function(){function hoverOver($m,opacity,effectMenu){var $border=$m.children("."+opts.borderClassName);0===$border.size()&&($border=$('<div class="'+opts.borderClassName+'"></div>').prependTo($m).css({opacity:0})),$m.attr("style","z-index:904;"),effectMenu&&$m.find(opts.menuActionSelector).fadeTo(opts.fadeSpeed,opacity),$m.children("."+opts.borderClassName).fadeTo(opts.fadeSpeed,opacity)}function hoverOut($m,opacity,effectMenu){$m.removeAttr("style"),$m.children("."+opts.borderClassName).stop().fadeTo(opts.fadeSpeed,0),effectMenu&&$m.find(opts.menuActionSelector).stop().fadeTo(opts.fadeSpeed,opacity)}function setMenuPosition($menuContainer){var $menuBody=$module.find(opts.menuSelector).show(),menuHeight=$menuBody.outerHeight(),menuWidth=$menuBody.outerWidth(),windowHeight=$(window).height(),windowWidth=$(window).width(),menuTop=$menuContainer.offset().top,menuLeft=$menuContainer.offset().left,bodyTop=isNaN(parseInt($(document.body).css("margin-top")))?0:parseInt($(document.body).css("margin-top")),availableRoom={left:!1,right:!1,top:!1,bottom:!1};availableRoom.top=menuTop-$(window).scrollTop()-bodyTop-menuHeight>0,availableRoom.bottom=windowHeight-(menuTop-$(window).scrollTop()+$menuContainer.height())-menuHeight>0,availableRoom.left=menuLeft-$(window).scrollLeft()+$menuContainer.width()-menuWidth>0,availableRoom.right=windowWidth-(menuLeft-$(window).scrollLeft())-menuWidth>0;var myPosition={},targetPosition={};!availableRoom.bottom&&availableRoom.top?(myPosition.y="bottom",targetPosition.y="top"):(myPosition.y="top",targetPosition.y="bottom"),!availableRoom.right&&availableRoom.left?(myPosition.x="right",targetPosition.x="right"):(myPosition.x="left",targetPosition.x="left"),$menuBody.position({my:myPosition.x+" "+myPosition.y,at:targetPosition.x+" "+targetPosition.y,of:$menuContainer,collision:"none"})}var $module=$(this);$module.find(opts.menuSelector).size()>0&&($module.hoverIntent({sensitivity:opts.hoverSensitivity,timeout:opts.hoverTimeout,interval:opts.hoverInterval,over:function(){hoverOver($(this).data("intentExpressed",!0),1,!0)},out:function(){hoverOut($(this).data("intentExpressed",!1),opts.defaultOpacity,!0)}}),$module.hover(function(){hoverOver($(this),opts.defaultOpacity,!1)},function(){var $this=$(this);$this.data("intentExpressed")||hoverOut($this,0,!1)}),$module.find(opts.menuActionSelector).css({opacity:opts.defaultOpacity}),$module.find(opts.menuWrapSelector).hoverIntent({sensitivity:opts.hoverSensitivity,timeout:opts.hoverTimeout,interval:opts.hoverInterval,over:function(){setMenuPosition($(this));var menuSelector=$module.find(opts.menuSelector);if(!$.support.cssFloat&&0==menuSelector.prev("iframe").length){var mask=$('<iframe frameborder="0"></iframe>');menuSelector.before(mask),mask.css({position:"absolute",width:menuSelector.outerWidth()+"px",height:menuSelector.outerHeight()+"px",left:menuSelector.position().left+"px",top:menuSelector.position().top+"px",opacity:0})}menuSelector.fadeTo(opts.fadeSpeed,1)},out:function(){$.support.cssFloat||$module.find(opts.menuSelector).prev("iframe").remove(),$module.find(opts.menuSelector).stop().fadeTo(opts.fadeSpeed,0).hide()}}),$module.find(opts.menuSelector).children().css({opacity:1}),$module.find(opts.menuWrapSelector).draggable({containment:$module.children().eq(1),start:function(event,ui){$module.find(opts.menuSelector).hide()},stop:function(event,ui){setMenuPosition($(this)),$module.find(opts.menuSelector).show()}}))}),$moduleWrap},$.fn.dnnActionMenu.defaultOptions={menuWrapSelector:".dnnActionMenu",menuActionSelector:".dnnActionMenuTag",menuSelector:"ul.dnnActionMenuBody",defaultOpacity:.3,fadeSpeed:"fast",borderClassName:"dnnActionMenuBorder",hoverSensitivity:2,hoverTimeout:200,hoverInterval:200},$(document).ready(function(){$(".DnnModule").dnnActionMenu()})}(jQuery,window);