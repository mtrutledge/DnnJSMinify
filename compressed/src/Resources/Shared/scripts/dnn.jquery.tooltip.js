"undefined"!=typeof dnn&&null!==dnn||(dnn={}),function($,window,document,undefined){"use strict";var pluginName="dnntooltip",Tooltip=this.Tooltip=function(element,options){this.element=element,this.options=options,this.init()};Tooltip.prototype={constructor:Tooltip,init:function(){this.options=$.extend({},Tooltip.defaults(),this.options),this.$this=$(this),this.$element=$(this.element),this.$element.removeAttr("title").removeAttr("alt");var onMouseEnterHandler=$.proxy(this._onMouseEnter,this),onMouseLeaveHandler=$.proxy(this._onMouseLeave,this,this.options.closeOnMouseLeave),onMouseClickHandler=$.proxy(this._onMouseClick,this);this._onCloseButtonClickHandler=$.proxy(this._onCloseButtonClick,this),this.$element.on("mouseenter",onMouseEnterHandler).on("mouseleave",onMouseLeaveHandler).on("click",onMouseClickHandler);var onDocumentClickHandler=$.proxy(this._onDocumentClick,this);$(document).on("click",onDocumentClickHandler),this.disabled(this.options.disabled)},disabled:function(isDisabled){return"undefined"!=typeof isDisabled&&(this._disabled=isDisabled),this._disabled},_onMouseEnter:function(eventObject){if(!this.disabled()){this._showTimeoutId&&clearTimeout(this._showTimeoutId),this._hoverState="mouse-enter";var self=this,show=function(){"mouse-enter"===self._hoverState&&self._show()};this._showTimeoutId=setTimeout(show,this.options.showIn)}},_onMouseLeave:function(closeOnMouseLeave,eventObject){if(eventObject.stopPropagation(),this._showTimeoutId&&(clearTimeout(this._showTimeoutId),this._showTimeoutId=undefined),closeOnMouseLeave){this._hoverState="mouse-leave";var self=this,hide=function(){"mouse-leave"===self._hoverState&&self._hide()};this._showTimeoutId=setTimeout(hide,this.options.hideIn)}},_onCloseButtonClick:function(eventObject){eventObject.preventDefault(),eventObject.stopPropagation(),this._showTimeoutId&&(clearTimeout(this._showTimeoutId),this._showTimeoutId=undefined),this._hide()},_hide:function(){var index=$.inArray(this,Tooltip.displayedTooltips);index>=0&&(Tooltip.displayedTooltips.splice(index,1),this._$tooltip&&this._$tooltip.fadeOut(this.options.fadeOutDuration))},_onMouseClick:function(eventObject){this.disabled()||this.options.disableMouseClick||(eventObject.stopPropagation(),Tooltip.isDisplayed(this)?this._hide():this._show())},_isjQuery:function(obj){return obj&&obj.jquery},_getViewPort:function(){var $window=$(window),viewPort={top:$window.scrollTop(),left:$window.scrollLeft(),width:$window.width(),height:$window.height(),right:function(){return this.left+this.width},bottom:function(){return this.top+this.height}};return viewPort},_createTooltip:function(){var $tooltip;$tooltip=$(this.options.template||"<div>").addClass(this.options.cssClass).hide(),this.options.id&&$tooltip.attr("id",this.options.id);var tooltipMarkup=this.options.getTooltipMarkup.call(this,this.element);return tooltipMarkup.nodeType||this._isjQuery(tooltipMarkup)?($tooltip.append(tooltipMarkup),this.options.closeButtonSelector&&$(tooltipMarkup).find(this.options.closeButtonSelector).on("click",this._onCloseButtonClickHandler)):$tooltip.html(tooltipMarkup),$tooltip.on("mouseleave",$.proxy(this._onMouseLeave,this,!0)),$tooltip.on("click",function(e){e.stopPropagation()}),$tooltip},_inContainer:function($container,element){return $container&&0!==$container.length&&($.contains($container[0],element)||$container[0]===element)},_onDocumentClick:function(eventObject){var clickedElement=eventObject.target;this._$tooltip&&!this._inContainer(this._$tooltip,clickedElement)&&this._hide()},_show:function(){for(var index=0,isDisplayed=!1;Tooltip.displayedTooltips.length>index;)Tooltip.displayedTooltips[index]===this?(isDisplayed=!0,index++):this.options.singleDisplay?Tooltip.displayedTooltips[index]._hide():index++;isDisplayed||(Tooltip.displayedTooltips.push(this),this._$tooltip||(this._$tooltip=this._createTooltip()),this._setTooltipOffset())},_setTooltipOffset:function(){this._$tooltip.detach().removeCssProperties("height","width","left","top").css({display:"block"}),this.options.container?this._$tooltip.appendTo(this.options.container):this._$tooltip.insertAfter(this.$element);var tooltipPosition,placement="function"==typeof this.options.placement?this.options.placement.call(this,this._$tooltip[0],this.element):this.options.placement,elementPosition=this._getPosition(),tooltipWidth=this._$tooltip.outerWidth(),tooltipHeight=this._$tooltip.outerHeight();switch(placement){case"top":tooltipPosition={top:elementPosition.top-tooltipHeight,left:elementPosition.left+10};break;case"bottom":tooltipPosition={top:elementPosition.top+elementPosition.height,left:elementPosition.left+10};break;case"left":tooltipPosition={top:elementPosition.top+(elementPosition.height-tooltipHeight)/2,left:elementPosition.left-tooltipWidth};break;case"right":tooltipPosition={top:elementPosition.top+(elementPosition.height-tooltipHeight)/2,left:elementPosition.left+elementPosition.width};break;default:tooltipPosition={top:elementPosition.top+this.options.top,left:elementPosition.left+this.options.left}}var viewPort=this._getViewPort(),offScreenLength=tooltipPosition.left+tooltipWidth-viewPort.right();if(offScreenLength>0&&(tooltipPosition.left=Math.max(viewPort.left,tooltipPosition.left-offScreenLength)),offScreenLength=tooltipPosition.top+tooltipHeight-viewPort.bottom(),offScreenLength>0&&(tooltipPosition.top=Math.max(viewPort.top,tooltipPosition.top-offScreenLength)),this._$tooltip.offset(tooltipPosition).fadeIn(this.options.fadeInDuration),this.options.animateOnOpen){var originalSize={height:this._$tooltip.height(),width:this._$tooltip.width()};this._$tooltip.css({height:0,width:0}).animate(originalSize,this.options.fadeInDuration)}},_removeTooltip:function(){if(this._$tooltip){var complete=function(){$(this).remove()};this._$tooltip.stop().fadeOut(this.options.fadeOutDuration,complete),this._$tooltip=null}},_getPosition:function(){return $.extend({},"function"==typeof this.element.getBoundingClientRect?this.element.getBoundingClientRect():{width:this.element.offsetWidth,height:this.element.offsetHeight},this.$element.offset())}},Tooltip._defaults={fade:!1,cssClass:"",top:15,left:15,fadeInDuration:400,fadeOutDuration:400,closeOnMouseLeave:!0,animateOnOpen:!1,container:null,showIn:400,hideIn:100,template:"<div></div>",disableMouseClick:!0},Tooltip.defaults=function(settings){return"undefined"!=typeof settings&&$.extend(Tooltip._defaults,settings),Tooltip._defaults},Tooltip.displayedTooltips=[],Tooltip.isDisplayed=function(tooltip){return $.inArray(tooltip,Tooltip.displayedTooltips)>=0},$.fn[pluginName]=function(option){var args=$.makeArray(arguments),params=args.slice(1);return this.each(function(){var $this=$(this),instance=$this.data(pluginName);if(!instance){var options=$.extend({},"object"==typeof option&&option);$this.data(pluginName,instance=new Tooltip(this,options))}"string"==typeof option&&instance[option].apply(instance,params)})}}.apply(dnn,[jQuery,window,document]);