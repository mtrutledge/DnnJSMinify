(function($,window,document,undefined){"use strict";var WebResourceUrl=this.WebResourceUrl=function(pathAndQuery){this._path="",this._pathAndQuery=pathAndQuery,this._parameters=new dnn.Dictionary,this._isInitialized=!1};WebResourceUrl.prototype={constructor:WebResourceUrl,path:function(){return this._ensureInitialize(),this._path},parameters:function(){return this._ensureInitialize(),this._parameters},toPathAndQuery:function(){var pathAndQuery=this.path().append(WebResourceUrl.toQueryString(this.parameters()),"?");return pathAndQuery},_ensureInitialize:function(){this._isInitialized||(this._initialize(this._pathAndQuery),this._isInitialized=!0)},_initialize:function(pathAndQuery){if(this._parameters=new dnn.Dictionary,this._path="",!String.isNullOrEmpty(pathAndQuery)&&"string"==typeof pathAndQuery){var parts=pathAndQuery.split("?");if(this._path=parts[0],parts.length>1&&(parts=parts[1].split("&"),parts.length>0))for(var i=0,size=parts.length;i<size;i++){var keyValuePair=parts[i].split("=");this._parameters.set(keyValuePair[0],WebResourceUrl.decodeParameterValue(keyValuePair[1]))}}}},WebResourceUrl.toQueryString=function(dictionary){var key,value,queryString="";if(!dictionary)return queryString;for(var keys=dictionary.keys(),i=0,size=keys.length;i<size;i++)key=keys[i],value=dictionary.get(key),Object.isNullOrUndefined(value)||(queryString=queryString.append(key+"="+WebResourceUrl.encodeParameterValue(value),"&"));return queryString},WebResourceUrl.decodeParameterValue=function(encodedValue){var lsRegExp=/\+/g;return decodeURIComponent(String(encodedValue).replace(lsRegExp," "))},WebResourceUrl.encodeParameterValue=function(decodedValue){return encodeURIComponent(decodedValue)}}).apply(dnn,[jQuery,window,document]);