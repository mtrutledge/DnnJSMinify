!function($){$.fn.dnnTabs=function(options){var opts=$.extend({},$.fn.dnnTabs.defaultOptions,options),$wrap=this;return $.ui.tabs.prototype._sanitizeSelector=function(hash){return hash.replace(/:/g,"\\:").replace(/\./g,"\\.")},$wrap.each(function(){var showEvent,cookieId;if(this.id){if(cookieId="dnnTabs-"+this.id,opts.selected===-1){var cookieValue=dnn.dom.getCookie(cookieId);cookieValue&&(opts.selected=cookieValue),opts.selected===-1&&(opts.selected=0)}showEvent=function(cid){return function(event,ui){dnn.dom.setCookie(cid,ui.newTab.index(),opts.cookieDays,"/","",!1,opts.cookieMilleseconds)}}(cookieId)}else showEvent=function(){};if($wrap.tabs({activate:showEvent,active:opts.selected,disabled:opts.disabled,fx:{opacity:opts.opacity,duration:opts.duration}}),window.location.hash&&"#"!=window.location.hash){var substr=window.location.hash.substr(0,50);$('a[href="'+encodeURI(substr)+'"]',$wrap).trigger("click")}"undefined"!=typeof window.Page_ClientValidate&&$.isFunction(window.Page_ClientValidate)&&$wrap.find(opts.validationTriggerSelector).click(function(){if(!window.Page_ClientValidate(opts.validationGroup)){var invalidControl=$wrap.find(opts.invalidItemSelector).eq(0),$parent=invalidControl.closest(".ui-tabs-panel");if($parent.length>0){var tabId=$parent.attr("id");$parent.parent().find("a[href='#"+tabId+"']").click()}}})}),$wrap},$.fn.dnnTabs.defaultOptions={opacity:"toggle",duration:"fast",validationTriggerSelector:".dnnPrimaryAction",validationGroup:"",invalidItemSelector:'.dnnFormError[style*="inline"]',regionToToggleSelector:"fieldset",selected:-1,cookieDays:0,cookieMilleseconds:12e5}}(jQuery),function($){$.fn.dnnConfirm=function(options){var opts=$.extend({},$.fn.dnnConfirm.defaultOptions,options),$wrap=this;return $wrap.each(function(){var $dnnDialog,$this=$(this),defaultAction=$this.attr("href");(defaultAction||opts.isButton)&&($dnnDialog=$("<div class='dnnDialog'></div>").html(opts.text).dialog(opts),$this.click(function(e,isTrigger){return!!isTrigger||($dnnDialog.is(":visible")?($dnnDialog.dialog("close"),!0):($dnnDialog.dialog({open:function(){$(".ui-dialog-buttonpane").find('button:contains("'+opts.noText+'")').addClass("dnnConfirmCancel")},draggable:!1,buttons:[{text:opts.yesText,click:function(){$dnnDialog.dialog("close"),$.isFunction(opts.callbackTrue)?opts.callbackTrue.call(this):opts.isButton?$this.trigger("click",[!0]):window.location.href=defaultAction},class:opts.buttonYesClass},{text:opts.noText,click:function(){$(this).dialog("close"),$.isFunction(opts.callbackFalse)&&opts.callbackFalse.call(this)},class:opts.buttonNoClass}]}),$dnnDialog.dialog("open"),e.preventDefault(),!1))}))}),$wrap},$.fn.dnnConfirm.defaultOptions={text:"Are you sure?",yesText:"Yes",noText:"No",buttonYesClass:"dnnPrimaryAction",buttonNoClass:"dnnSecondaryAction",actionUrl:window.location.href,autoOpen:!1,resizable:!1,modal:!0,title:"Confirm",dialogClass:"dnnFormPopup dnnClear",isButton:!1}}(jQuery),function($){$.dnnConfirm||($.dnnConfirm=function(opts){var defaultAction=opts.actionUrl?opts.actionUrl:"javascript:void(0);",shadowLink=$('<a href="'+defaultAction+'" />');shadowLink.dnnConfirm(opts).click()})}(jQuery),function($){$.dnnAlert=function(options){var opts=$.extend({},$.dnnAlert.defaultOptions,options),$dnnDialog=$("<div class='dnnDialog'></div>").html(opts.text).dialog(opts);$dnnDialog.dialog({buttons:[{text:opts.okText,class:opts.buttonOkClass,click:function(){return $(this).dialog("close"),$.isFunction(opts.callback)&&opts.callback.call(this),!1}}]}),$dnnDialog.dialog("open")},$.dnnAlert.defaultOptions={okText:"Ok",autoOpen:!1,resizable:!1,modal:!0,buttonOkClass:"dnnPrimaryAction",dialogClass:"dnnFormPopup dnnClear"}}(jQuery),function($){$.fn.dnnPanels=function(options){var opts=$.extend({},$.fn.dnnPanels.defaultOptions,options),$wrap=this;return $wrap.each(function(){function collapsePanel($clicker,$region){$clicker.removeClass(opts.toggleClass),$region.hide(),$this.trigger("onHide")}function expandPanel($clicker,$region){$clicker.addClass(opts.toggleClass),$region.show(),$this.trigger("onExpand")}var $this=$(this);"function"==typeof opts.onExpand&&$this.bind("onExpand",opts.onExpand),"function"==typeof opts.onHide&&$this.bind("onHide",opts.onHide),$this.find(opts.clickToToggleSelector).click(function(e){var toggle=$(this).toggleClass(opts.toggleClass).parent().next(opts.regionToToggleSelector).slideToggle(function(){var visible=$(this).is(":visible");if(opts.saveState){var id=$(toggle.context.parentNode).attr("id"),cookieId=id?id.replace(/[^a-zA-Z0-9\-]+/g,""):"";cookieId&&dnn.dom.setCookie(cookieId,visible,opts.cookieDays,"/","",!1,opts.cookieMilleseconds)}visible?$(this).trigger("onExpand"):$(this).trigger("onHide")});return e.preventDefault(),e.stopImmediatePropagation(),!1}),$this.find(opts.sectionHeadSelector).each(function(indexInArray,valueOfElement){var $self=$(valueOfElement),elementId=$self.attr("id"),cookieId=elementId?elementId.replace(/[^a-zA-Z0-9\-]+/g,""):"",cookieValue=cookieId?dnn.dom.getCookie(cookieId):"",$clicker=$self.find(opts.clickToToggleIsolatedSelector),$region=$self.next(opts.regionToToggleSelector),$parentSeparator=$self.parents(opts.panelSeparatorSelector),groupPanelIndex=$parentSeparator.find(opts.sectionHeadSelector).index($self),isOpen=!1;(0===indexInArray&&"first"==opts.defaultState||$parentSeparator.size()>0&&0===groupPanelIndex&&"first"==opts.defaultState||"open"==opts.defaultState)&&(isOpen=!0),opts.saveState&&("true"==cookieValue?isOpen=!0:"false"==cookieValue&&(isOpen=!1)),isOpen?expandPanel($clicker,$region):collapsePanel($clicker,$region)}),$this.find(opts.validationTriggerSelector).click(function(){"undefined"!=typeof window.Page_ClientValidate&&$.isFunction(window.Page_ClientValidate)&&(window.Page_ClientValidate(opts.validationGroup)||$this.find(opts.invalidItemSelector).each(function(){var $parent=$(this).closest(opts.regionToToggleSelector);$parent.is(":hidden")&&$parent.prev(opts.sectionHeadSelector).find(opts.clickToToggleIsolatedSelector).click()}))})}),$wrap},$.fn.dnnPanels.defaultOptions={clickToToggleSelector:"h2.dnnFormSectionHead a",sectionHeadSelector:".dnnFormSectionHead",regionToToggleSelector:"fieldset",toggleClass:"dnnSectionExpanded",clickToToggleIsolatedSelector:"a",validationTriggerSelector:".dnnPrimaryAction",invalidItemSelector:'.dnnFormError[style*="inline"]',validationGroup:"",panelSeparatorSelector:".ui-tabs-panel",cookieDays:0,cookieMilleseconds:12e5,saveState:!0,defaultState:"first"}}(jQuery),function($){$.fn.dnnPreview=function(options){var opts=$.extend({},$.fn.dnnPreview.defaultOptions,options),$wrap=this;return $wrap.each(function(){var $this=$(this);$this.find(opts.linkSelector).click(function(e){e.preventDefault();var skin,container,params="?";if(opts.useComboBox){var skinComboBox=$find(opts.skinSelector),containerComboBox=$find(opts.containerSelector);skin=skinComboBox?skinComboBox.get_value():"",container=containerComboBox?containerComboBox.get_value():""}else skin=$this.find(opts.skinSelector).val(),container=$this.find(opts.containerSelector).val();skin&&(params+="SkinSrc="+skin),container&&(skin&&(params+="&"),params+="ContainerSrc="+container),"?"!=params?window.open(encodeURI(opts.baseUrl+params.replace(/.ascx/gi,"")),"skinpreview"):$.dnnAlert({text:opts.noSelectionMessage,okText:opts.alertOkText,closeText:opts.alertCloseText})})}),$wrap},$.fn.dnnPreview.defaultOptions={baseUrl:window.location.protocol+"//"+window.location.host+window.location.pathname,linkSelector:"a.dnnSecondaryAction",skinSelector:"",containerSelector:"",noSelectionMessage:"Please select a preview option.",alertOkText:"Ok",alertCloseText:"close",useComboBox:!1}}(jQuery),function($){$.fn.dnnExpandAll=function(options){var opts=$.extend({},$.fn.dnnExpandAll.defaultOptions,options),$elem=this;return $(opts.targetArea).find(opts.targetSelector+":visible").length!==$(opts.targetArea).find(opts.targetSelector+opts.targetExpandedSelector+":visible").length||$(this).hasClass("expanded")||$(this).addClass("expanded").text(opts.collapseText),$elem.click(function(e){e.preventDefault();var $this=$(this);$this.hasClass("expanded")?($this.removeClass("expanded").text(opts.expandText),$(opts.targetArea).find(opts.targetSelector+opts.targetExpandedSelector+":visible").click()):($this.addClass("expanded").text(opts.collapseText),$(opts.targetArea).find(opts.targetSelector+":visible").not(opts.targetExpandedSelector).click()),e.stopImmediatePropagation()}),$elem},$.fn.dnnExpandAll.defaultOptions={expandText:"Expand All",collapseText:"Collapse All",targetArea:"#dnnHostSettings",targetSelector:"h2.dnnFormSectionHead a",targetExpandedSelector:".dnnSectionExpanded"}}(jQuery),function($){$.fn.dnnTooltip=function(options){var opts=$.extend({},$.fn.dnnTooltip.defaultOptions,options),$wrap=this;return $wrap.each(function(){var $this=$(this),dnnFormHelp=$this.prev();if(!$this.data("initialized")){dnnFormHelp.on("click",function(e){e.preventDefault()});var helpSelector=$this.find(opts.helpSelector);$this.parent().css({position:"relative"}),$this.css({position:"absolute",right:"-29%"});var hoverOnToolTip=!1,hoverOnPd=!1;dnnFormHelp.hoverIntent({over:function(){hoverOnPd=!0;var tooltipHeight=helpSelector.height(),top=-(tooltipHeight+30);tooltipHeight+30<=$this.parent().offset().top?(helpSelector.parent().css({top:top+"px"}),$this.find("div.dnnFormHelpContent span").addClass("bottomArrow"),$this.find("div.dnnFormHelpContent span").removeClass("topArrow")):(helpSelector.parent().css({top:"30px"}),$this.find("div.dnnFormHelpContent span").addClass("topArrow"),$this.find("div.dnnFormHelpContent span").removeClass("bottomArrow")),helpSelector.css("visibility","visible")},out:function(){hoverOnPd=!1,$this.hasClass(opts.pinnedClass)||hoverOnToolTip||helpSelector.css("visibility","hidden")},timeout:200,interval:200}),helpSelector.hover(function(){hoverOnToolTip=!0},function(){hoverOnToolTip=!1,$this.hasClass(opts.pinnedClass)||hoverOnPd||helpSelector.css("visibility","hidden")});var pinHelper=helpSelector.find(opts.pinSelector);pinHelper.on("click",function(e){e.preventDefault(),$this.hasClass(opts.pinnedClass)?(helpSelector.css({left:"0",top:"0"}).css("visibility","hidden").draggable("destroy"),$this.removeClass(opts.pinnedClass)):($this.addClass(opts.pinnedClass),$.isFunction($().draggable)&&helpSelector.draggable())}),$this.data("initialized",1)}}),$wrap},$.fn.dnnTooltip.defaultOptions={pinSelector:"a.pinHelp",helpSelector:".dnnFormHelpContent",pinnedClass:"dnnTooltipPinned"}}(jQuery),function($){var cb=function(e){e||(e=window.event),e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()};$.fn.dnnCheckbox=function(options){var settings={cls:"dnnCheckbox",labelClass:"dnnBoxLabel"};settings=$.extend(settings,options||{});var addEvents=function(object){var checked=object.checked,disabled=object.disabled,$object=$(object);return object.stateInterval&&clearInterval(object.stateInterval),object.stateInterval=setInterval(function(){object.disabled!=disabled&&$object.trigger((disabled=!!object.disabled)?"disable":"enable"),object.checked!=checked&&$object.trigger((checked=!!object.checked)?"check":"uncheck")},10),$object};return this.each(function(){var ch=this;if(!$(ch).data("checkBoxWrapped")&&($(ch).data("checkBoxWrapped",!0),!$(this).hasClass("normalCheckBox")&&!$(this).hasClass("normalRadioButton"))){var parentCheckBoxHolder=$(this).closest(".normalCheckBox"),parentRadioButtonHolder=$(this).closest(".normalRadioButton");if(!parentCheckBoxHolder.length&&!parentRadioButtonHolder.length){var $ch=addEvents(ch);ch.wrapper&&ch.wrapper.remove(),ch.wrapper=$('<span class="'+settings.cls+'"><span class="mark"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRFAAAAAAAApWe5zwAAAAF0Uk5TAEDm2GYAAAAMSURBVHjaYmAACDAAAAIAAU9tWeEAAAAASUVORK5CYII=" /></span></span>'),ch.wrapperInner=ch.wrapper.children("span:eq(0)"),ch.wrapper.hover(function(e){ch.wrapperInner.addClass(settings.cls+"-hover"),cb(e)},function(e){ch.wrapperInner.removeClass(settings.cls+"-hover"),cb(e)}),$ch.css({position:"absolute",zIndex:-1,opacity:0}).after(ch.wrapper);var label,parentLabel=!1;label=$ch.closest("label"),label.length?parentLabel=!0:label=!1,!label&&$ch.attr("id")&&(label=$('label[for="'+$ch.attr("id")+'"]'),label.length||(label=!1)),label&&(label.addClass(settings.labelClass),parentLabel?label.children().each(function(){var $this=$(this);$this.is("input")||$this.click(function(e){return $ch.triggerHandler("focus"),ch.click(),$ch.trigger("change",[e]),cb(e),!1})}):label.click(function(e){return $ch.triggerHandler("focus"),ch.click(),$ch.trigger("change",[e]),cb(e),!1})),parentLabel||ch.wrapper.click(function(e){return $ch.triggerHandler("focus"),ch.click(),$ch.trigger("change",[e]),cb(e),!1}),$ch.bind("disable",function(){ch.wrapperInner.addClass(settings.cls+"-disabled")}).bind("enable",function(){ch.wrapperInner.removeClass(settings.cls+"-disabled")}),$ch.bind("check",function(){ch.wrapper.addClass(settings.cls+"-checked")}).bind("uncheck",function(){ch.wrapper.removeClass(settings.cls+"-checked")}),$ch.bind("focus",function(e){e.isTrigger||ch.wrapper.addClass(settings.cls+"-focus")}).bind("blur",function(){ch.wrapper.removeClass(settings.cls+"-focus")}),ch.checked&&ch.wrapper.addClass(settings.cls+"-checked"),ch.disabled&&ch.wrapperInner.addClass(settings.cls+"-disabled")}}})},$.fn.dnnHelperTipDestroy=function(){return this.each(function(){var pd=this;pd.id&&$('div[data-tipholder="'+pd.id+'"]').remove()})},$.fn.dnnHelperTip=function(options){var settings={cls:"dnnHelperTip",helpContent:"This is hover helper tooltip",holderId:"",show:!1};return settings=$.extend(settings,options||{}),this.each(function(){var pd=this,$pd=$(this);pd.tooltipWrapper&&pd.tooltipWrapper.remove(),pd.tooltipWrapper=$('<div class="'+settings.cls+'" data-tipholder="'+settings.holderId+'"> <div class="dnnFormHelpContent dnnClear"><span class="dnnHelpText">'+settings.helpContent+"</span></div></div>"),$("body").append(pd.tooltipWrapper),pd.tooltipWrapper.css({position:"absolute"}),pd.tooltipWrapperInner=$(".dnnFormHelpContent",pd.tooltipWrapper);var tooltipHeight=pd.tooltipWrapperInner.height();pd.tooltipWrapperInner.css({left:"-10px",top:-(tooltipHeight+30)+"px"});var hoverOnPd=!1;$pd.hover(function(){hoverOnPd=!0,setTimeout(function(){hoverOnPd&&pd.tooltipWrapperInner.css("visibility","visible")},400)},function(){hoverOnPd=!1,setTimeout(function(){hoverOnPd||pd.tooltipWrapperInner.css("visibility","hidden")},400)}),settings.show&&(hoverOnPd=!0,setTimeout(function(){pd.tooltipWrapperInner.css("visibility","visible")},400)),$pd.bind("mousemove",function(e){var x=e.pageX,y=e.pageY,pos=$("body").css("position");"relative"==pos&&(y-=38),pd.tooltipWrapper.css({left:x+"px",top:y+"px","z-index":"99999"})})})},$.fn.dnnProgressbar=function(){var $pd=$(this),pd=this;pd.tooltipWrapper&&pd.tooltipWrapper.remove(),pd.tooltipWrapper=$('<div class="dnnTooltip"> <div class="dnnFormHelpContent dnnClear"><span class="dnnHelpText"></span></div></div>').insertAfter($pd),pd.tooltipWrapperInner=$(".dnnFormHelpContent",pd.tooltipWrapper),pd.tooltipWrapperInner.css({width:"32px",padding:"7px"}),$pd.parent().css({position:"relative"});var hoverOnToolTip=!1,hoverOnPd=!1;return $pd.hoverIntent({over:function(){hoverOnPd=!0;var val=$(this).children(":first").progressbar("value");pd.update(val),pd.tooltipWrapperInner.css("visibility","visible")},out:function(){hoverOnPd=!1,hoverOnToolTip||pd.tooltipWrapperInner.css("visibility","hidden")},timeout:200,interval:200}),pd.tooltipWrapperInner.hover(function(){hoverOnToolTip=!0},function(){hoverOnToolTip=!1,hoverOnPd||pd.tooltipWrapperInner.hide()}),pd.update=function(value){pd.tooltipWrapperInner.find("span").html(value+" %");var pdTop=$pd.position().top,tooltipHeight=pd.tooltipWrapperInner.height();pdTop-=tooltipHeight+10;var pdLeft=value>50?value-4+"%":value>0?value-2+"%":"10px";pd.tooltipWrapper.css({position:"absolute",left:pdLeft,top:pdTop+"px"})},this},$.fn.dnnSpinner=function(options){var otypedata,opt=$.extend({type:"range",typedata:"",width:"150px",looping:!1},options);otypedata=null!=options&&null!=options.typedata?$.extend({min:1,max:10,interval:1,decimalplaces:0},options.typedata):$.extend({min:1,max:10,interval:1,decimalplaces:0}),opt.typedata=otypedata;var inputControl=this;if(!inputControl.is(":text"))return inputControl;if(inputControl.hasClass("dnnSpinnerInput"))return inputControl;inputControl.addClass("dnnSpinnerInput");var strContainerDiv="";strContainerDiv+='<div class="dnnSpinner">',strContainerDiv+='<div class="dnnSpinnerDisplay"></div>',strContainerDiv+='<div class="dnnSpinnerCtrl">',strContainerDiv+='<a class="dnnSpinnerTopButton"></a>',strContainerDiv+='<a class="dnnSpinnerBotButton"></a>',strContainerDiv+="</div></div>";var objContainerDiv=$(strContainerDiv).insertAfter(inputControl);switch(inputControl.insertAfter($("div.dnnSpinnerDisplay",objContainerDiv)),$("div.dnnSpinnerDisplay",objContainerDiv).click(function(){if("range"==opt.type){var displayCtrl=$(this),innerInput=$('input[type="text"]',displayCtrl);if(innerInput.length<1){var originalVal=displayCtrl.html();innerInput=$('<input type="text" />').val(originalVal),displayCtrl.html(innerInput),innerInput.blur(function(){var newVal=$(this).val();newVal>opt.typedata.max&&(newVal=opt.typedata.max),newVal<opt.typedata.min&&(newVal=opt.typedata.min),$(this).remove(),selectedValue=parseInt(newVal),inputControl.val(newVal),displayCtrl.html(newVal)}).keypress(function(e){var regex=new RegExp("^[0-9]+$"),key=String.fromCharCode(e.charCode?e.charCode:e.which);return!!regex.test(key)||(event.preventDefault(),!1)})}innerInput.focus()}inputControl.triggerHandler("focus")}),inputControl.css("display","none"),opt.type){case"range":(opt.defaultVal<opt.typedata.min||opt.defaultVal>opt.typedata.max)&&(opt.defaultVal=opt.typedata.min),opt.defaultVal%opt.typedata.interval>0&&(opt.defaultVal=parseInt((opt.defaultVal/opt.typedata.interval).toFixed(0))*opt.typedata.interval),inputControl.val(opt.defaultVal.toFixed(opt.typedata.decimalplaces)),$("div.dnnSpinnerDisplay",objContainerDiv).html(opt.defaultVal.toFixed(opt.typedata.decimalplaces));var selectedValue=opt.defaultVal;opt.typedata.max-opt.typedata.min>opt.typedata.interval&&($("a.dnnSpinnerTopButton",objContainerDiv).click(function(){if(selectedValue+opt.typedata.interval<=opt.typedata.max||opt.looping){selectedValue+opt.typedata.interval>opt.typedata.max&&(selectedValue=opt.typedata.min-opt.typedata.interval);var valueData=(selectedValue+opt.typedata.interval).toFixed(opt.typedata.decimalplaces);selectedValue+=opt.typedata.interval,$("div.dnnSpinnerDisplay",objContainerDiv).html(valueData),inputControl.val(valueData)}return inputControl.triggerHandler("focus"),!1}),$("a.dnnSpinnerBotButton",objContainerDiv).click(function(){if(selectedValue-opt.typedata.interval>=opt.typedata.min||opt.looping){selectedValue-opt.typedata.interval<opt.typedata.min&&(selectedValue=opt.typedata.max+opt.typedata.interval);var valueData=(selectedValue-opt.typedata.interval).toFixed(opt.typedata.decimalplaces);selectedValue-=opt.typedata.interval,$("div.dnnSpinnerDisplay",objContainerDiv).html(valueData),inputControl.val(valueData)}return inputControl.triggerHandler("focus"),!1}));break;case"list":if(!opt.typedata.list||0==opt.typedata.list.lenght)return inputControl;var listItems=opt.typedata.list.split(","),selectedIndex=jQuery.inArray(opt.defaultVal,listItems);selectedIndex<0&&(selectedIndex=0,opt.defaultVal=listItems[0]),inputControl.val(opt.defaultVal),$("div.dnnSpinnerDisplay",objContainerDiv).html(opt.defaultVal),listItems.length>1&&($("a.dnnSpinnerBotButton",objContainerDiv).click(function(){if(selectedIndex<listItems.length-1||opt.looping){selectedIndex==listItems.length-1&&(selectedIndex=-1),selectedIndex++;var valueData=listItems[selectedIndex];$("div.dnnSpinnerDisplay",objContainerDiv).html(valueData),inputControl.val(valueData)}return inputControl.triggerHandler("focus"),!1}),$("a.dnnSpinnerTopButton",objContainerDiv).click(function(){if(selectedIndex>0||opt.looping){0==selectedIndex&&(selectedIndex=listItems.length),selectedIndex--;var valueData=listItems[selectedIndex];$("div.dnnSpinnerDisplay",objContainerDiv).html(valueData),inputControl.val(valueData)}return inputControl.triggerHandler("focus"),!1}))}return inputControl}}(jQuery),function($){$.fn.dnnAutocomplete=function(options){var url;arguments.length>1?(url=options,options=arguments[1],options.url=url):"string"==typeof options&&(url=options,options={url:url});var opts=$.extend({},$.fn.dnnAutocomplete.defaults,options);return this.each(function(){var $this=$(this);$this.data("autocompleter",new $.dnnAutocompleter($this,$.meta?$.extend({},opts,$this.data()):opts))})},$.fn.dnnAutocomplete.defaults={inputClass:"dnn_acInput",loadingClass:"dnn_acLoading",resultsClass:"dnn_acResults",selectClass:"dnn_acSelect",queryParamName:"q",contentTypeParamName:"contentTypeId",extraParams:{},remoteDataType:!1,lineSeparator:"\n",cellSeparator:"|",minChars:2,maxItemsToShow:10,delay:400,useCache:!1,maxCacheLength:10,matchSubset:!0,matchCase:!1,matchInside:!0,mustMatch:!1,selectFirst:!1,selectOnly:!1,showResult:null,preventDefaultReturn:1,preventDefaultTab:0,autoFill:!1,filterResults:!0,sortResults:!0,sortFunction:null,onItemSelect:null,onNoMatch:null,onFinish:null,matchStringConverter:null,beforeUseConverter:null,autoWidth:"min-width",useDelimiter:!1,delimiterChar:",",delimiterKeyCode:188,processData:null,onError:null,moduleId:null};var sanitizeResult=function(result){var value,data,type=typeof result;return"string"===type?(value=result,data={}):$.isArray(result)?(value=result[0],data=result.slice(1)):"object"===type?(value=result.value,data=result.data):value="",value=String(value),"object"!=typeof data&&(data={}),{value:value,data:data}},sanitizeInteger=function(value,stdValue,options){var num=parseInt(value,10);return options=options||{},(isNaN(num)||options.min&&num<options.min)&&(num=stdValue),num},makeUrlParam=function(name,value){return[name,encodeURIComponent(value)].join("=")},makeUrl=function(url,params){var urlAppend=[];return $.each(params,function(index,value){urlAppend.push(makeUrlParam(index,value))}),urlAppend.length&&(url+=url.indexOf("?")===-1?"?":"&",url+=urlAppend.join("&")),url},sortValueAlpha=function(a,b,matchCase){return a=String(a.value),b=String(b.value),matchCase||(a=a.toLowerCase(),b=b.toLowerCase()),a>b?1:a<b?-1:0};$.dnnAutocompleter=function($elem,options){if(!($elem&&$elem instanceof $&&1===$elem.length&&"INPUT"===$elem.get(0).tagName.toUpperCase()))throw new Error("Invalid parameter for dnnAutocompleter, jQuery object with one element with INPUT tag expected.");var self=this;this.options=options,this.cacheData_={},this.cacheLength_=0,this.selectClass_="jquery-autocomplete-selected-item",this.keyTimeout_=null,this.finishTimeout_=null,this.lastKeyPressed_=null,this.lastProcessedValue_=null,this.lastSelectedValue_=null,this.active_=!1,this.finishOnBlur_=!0,this.options.minChars=sanitizeInteger(this.options.minChars,$.fn.dnnAutocomplete.defaults.minChars,{min:0}),this.options.maxItemsToShow=sanitizeInteger(this.options.maxItemsToShow,$.fn.dnnAutocomplete.defaults.maxItemsToShow,{min:0}),this.options.maxCacheLength=sanitizeInteger(this.options.maxCacheLength,$.fn.dnnAutocomplete.defaults.maxCacheLength,{min:1}),this.options.delay=sanitizeInteger(this.options.delay,$.fn.dnnAutocomplete.defaults.delay,{min:0}),2!=this.options.preventDefaultReturn&&(this.options.preventDefaultReturn=this.options.preventDefaultReturn?1:0),2!=this.options.preventDefaultTab&&(this.options.preventDefaultTab=this.options.preventDefaultTab?1:0),this.dom={},this.dom.$elem=$elem,this.dom.$elem.attr("autocomplete","off").addClass(this.options.inputClass),this.dom.$results=$("<div></div>").hide().addClass(this.options.resultsClass).css({position:"absolute"}),$("body").append(this.dom.$results),$elem.keydown(function(e){switch(self.lastKeyPressed_=e.keyCode,self.lastKeyPressed_){case self.options.delimiterKeyCode:self.options.useDelimiter&&self.active_&&self.selectCurrent();break;case 35:case 36:case 16:case 17:case 18:case 37:case 39:break;case 38:return e.preventDefault(),self.active_?self.focusPrev():self.activate(),!1;case 40:return e.preventDefault(),self.active_?self.focusNext():self.activate(),!1;case 9:if(self.active_&&(self.selectCurrent(),self.options.preventDefaultTab))return e.preventDefault(),!1;if(2===self.options.preventDefaultTab)return e.preventDefault(),!1;break;case 13:if(self.active_&&(self.selectCurrent(),self.options.preventDefaultReturn))return e.preventDefault(),!1;if(2===self.options.preventDefaultReturn)return e.preventDefault(),!1;break;case 27:if(self.active_)return e.preventDefault(),self.deactivate(!0),!1;break;default:self.activate()}return!0});var onBlurFunction=function(){self.deactivate(!0)};$elem.blur(function(){self.finishOnBlur_&&(self.finishTimeout_=setTimeout(onBlurFunction,200))}),$elem.parents("form").on("submit",onBlurFunction)},$.dnnAutocompleter.prototype.position=function(){var offset=this.dom.$elem.offset(),height=this.dom.$results.outerHeight(),totalHeight=window.outerHeight,inputBottom=offset.top+this.dom.$elem.outerHeight(),bottomIfDown=inputBottom+height,position={top:inputBottom,left:offset.left};if(bottomIfDown>totalHeight){var topIfUp=offset.top-height;topIfUp>=0&&(position.top=topIfUp)}this.dom.$results.css(position)},$.dnnAutocompleter.prototype.cacheRead=function(filter){var filterLength,searchLength,search,maxPos,pos;if(this.options.useCache)for(filter=String(filter),filterLength=filter.length,searchLength=this.options.matchSubset?1:filterLength;searchLength<=filterLength;){for(maxPos=this.options.matchInside?filterLength-searchLength:0,pos=0;pos<=maxPos;){if(search=filter.substr(0,searchLength),void 0!==this.cacheData_[search])return this.cacheData_[search];pos++}searchLength++}return!1},$.dnnAutocompleter.prototype.cacheWrite=function(filter,data){return!!this.options.useCache&&(this.cacheLength_>=this.options.maxCacheLength&&this.cacheFlush(),filter=String(filter),void 0!==this.cacheData_[filter]&&this.cacheLength_++,this.cacheData_[filter]=data,this.cacheData_[filter])},$.dnnAutocompleter.prototype.cacheFlush=function(){this.cacheData_={},this.cacheLength_=0},$.dnnAutocompleter.prototype.callHook=function(hook,data){var f=this.options[hook];return!(!f||!$.isFunction(f))&&f(data,this)},$.dnnAutocompleter.prototype.activate=function(){var self=this;this.keyTimeout_&&clearTimeout(this.keyTimeout_),this.keyTimeout_=setTimeout(function(){self.activateNow()},this.options.delay)},$.dnnAutocompleter.prototype.activateNow=function(){var value=this.beforeUseConverter(this.dom.$elem.val());value!==this.lastProcessedValue_&&value!==this.lastSelectedValue_&&this.fetchData(value)},$.dnnAutocompleter.prototype.fetchData=function(value){var self=this,processResults=function(results,filter){self.options.processData&&(results=self.options.processData(results)),self.showResults(self.filterResults(results,filter),filter)};this.lastProcessedValue_=value,value.length<this.options.minChars?processResults([],value):this.options.data?processResults(this.options.data,value):this.fetchRemoteData(value,function(remoteData){processResults(remoteData,value)})},$.dnnAutocompleter.prototype.fetchRemoteData=function(filter,callback){var data=this.cacheRead(filter);if(data)callback(data);else{var self=this,ajaxCallback=function(d){var parsed=!1;d!==!1&&(parsed=self.parseRemoteData(d),self.cacheWrite(filter,parsed)),self.dom.$elem.removeClass(self.options.loadingClass),callback(parsed)};this.dom.$elem.addClass(this.options.loadingClass);var services=self.options.moduleId&&$.dnnSF?$.dnnSF(self.options.moduleId):null;$.ajax({url:this.makeUrl(filter),beforeSend:services?services.setModuleHeaders:null,success:ajaxCallback,error:function(jqXhr,textStatus,errorThrown){$.isFunction(self.options.onError)?self.options.onError(jqXhr,textStatus,errorThrown):ajaxCallback(!1)},type:"GET",dataType:"json",contentType:"application/json"})}},$.dnnAutocompleter.prototype.setExtraParam=function(name,value){var index=$.trim(String(name));index&&(this.options.extraParams||(this.options.extraParams={}),this.options.extraParams[index]!==value&&(this.options.extraParams[index]=value,this.cacheFlush()))},$.dnnAutocompleter.prototype.makeUrl=function(param){var url=this.options.url,params={};return params[this.options.queryParamName]=param,makeUrl(url,params)},$.dnnAutocompleter.prototype.parseRemoteData=function(remoteData){var data=remoteData;return"undefined"!=typeof data.d&&(data=$.parseJSON(data.d)),data},$.dnnAutocompleter.prototype.filterResult=function(result,filter){if(!result.value)return!1;if(this.options.filterResults){var pattern=this.matchStringConverter(filter),testValue=this.matchStringConverter(result.value);this.options.matchCase||(pattern=pattern.toLowerCase(),testValue=testValue.toLowerCase());var patternIndex=testValue.indexOf(pattern);return this.options.matchInside?patternIndex>-1:0===patternIndex}return!0},$.dnnAutocompleter.prototype.filterResults=function(results,filter){var i,result,filtered=[];for(i=0;i<results.length;i++)result=sanitizeResult(results[i]),this.filterResult(result,filter)&&filtered.push(result);return this.options.sortResults&&(filtered=this.sortResults(filtered,filter)),this.options.maxItemsToShow>0&&this.options.maxItemsToShow<filtered.length&&(filtered.length=this.options.maxItemsToShow),filtered},$.dnnAutocompleter.prototype.sortResults=function(results,filter){var self=this,sortFunction=this.options.sortFunction;return $.isFunction(sortFunction)||(sortFunction=function(a,b){return sortValueAlpha(a,b,self.options.matchCase)}),results.sort(function(a,b){return sortFunction(a,b,filter,self.options)}),results},$.dnnAutocompleter.prototype.matchStringConverter=function(s,a,b){var converter=this.options.matchStringConverter;return $.isFunction(converter)&&(s=converter(s,a,b)),s},$.dnnAutocompleter.prototype.beforeUseConverter=function(s,a,b){s=this.getValue();var converter=this.options.beforeUseConverter;return $.isFunction(converter)&&(s=converter(s,a,b)),s},$.dnnAutocompleter.prototype.enableFinishOnBlur=function(){this.finishOnBlur_=!0},$.dnnAutocompleter.prototype.disableFinishOnBlur=function(){this.finishOnBlur_=!1},$.dnnAutocompleter.prototype.createItemFromResult=function(result,filter){var self=this,$li=$("<li>"+this.showResult(result.value,result.data,filter)+"</li>");return $li.data({value:result.value,data:result.data}).click(function(){self.selectItem($li)}).mousedown(self.disableFinishOnBlur).mouseup(self.enableFinishOnBlur),$li},$.dnnAutocompleter.prototype.getItems=function(){return $(">ul>li",this.dom.$results)},$.dnnAutocompleter.prototype.showResults=function(results,filter){var i,result,$li,autoWidth,numResults=results.length,self=this,$ul=$("<ul></ul>"),first=!1,$first=!1;if(numResults){for(i=0;i<numResults;i++)result=results[i],$li=this.createItemFromResult(result,filter),$ul.append($li),first===!1&&(first=String(result.value),$first=$li,$li.addClass(this.options.firstItemClass)),i===numResults-1&&$li.addClass(this.options.lastItemClass);this.dom.$results.html($ul).show(),this.position(),this.options.autoWidth&&(autoWidth=this.dom.$elem.outerWidth()-this.dom.$results.outerWidth()+this.dom.$results.width(),this.dom.$results.css(this.options.autoWidth,autoWidth)),this.getItems().hover(function(){self.focusItem(this)},function(){}),(this.autoFill(first,filter)||this.options.selectFirst||this.options.selectOnly&&1===numResults)&&this.focusItem($first),this.active_=!0,this.focusNext()}else this.hideResults(),this.active_=!1},$.dnnAutocompleter.prototype.showResult=function(value,data,filter){if($.isFunction(this.options.showResult))return this.options.showResult(value,data);var regex=new RegExp("("+filter+")","gi");return value.replace(regex,function($0,$1){return"<b>"+$1+"</b>"})},$.dnnAutocompleter.prototype.autoFill=function(value,filter){
var lcValue,lcFilter,valueLength,filterLength;if(this.options.autoFill&&8!==this.lastKeyPressed_&&(lcValue=String(value).toLowerCase(),lcFilter=String(filter).toLowerCase(),valueLength=value.length,filterLength=filter.length,lcValue.substr(0,filterLength)===lcFilter)){var d=this.getDelimiterOffsets(),pad=d.start?" ":"";this.setValue(pad+value);var start=filterLength+d.start+pad.length,end=valueLength+d.start+pad.length;return this.selectRange(start,end),!0}return!1},$.dnnAutocompleter.prototype.focusNext=function(){this.focusMove(1)},$.dnnAutocompleter.prototype.focusPrev=function(){this.focusMove(-1)},$.dnnAutocompleter.prototype.focusMove=function(modifier){var $items=this.getItems();if(modifier=sanitizeInteger(modifier,0))for(var i=0;i<$items.length;i++)if($($items[i]).hasClass(this.selectClass_))return void this.focusItem(i+modifier);this.focusItem(0)},$.dnnAutocompleter.prototype.focusItem=function(item){var $item,$items=this.getItems();$items.length&&($items.removeClass(this.selectClass_).removeClass(this.options.selectClass),"number"==typeof item?(item<0?item=0:item>=$items.length&&(item=$items.length-1),$item=$($items[item])):$item=$(item),$item&&$item.addClass(this.selectClass_).addClass(this.options.selectClass))},$.dnnAutocompleter.prototype.selectCurrent=function(){var $item=$("li."+this.selectClass_,this.dom.$results);1===$item.length?this.selectItem($item):this.deactivate(!1)},$.dnnAutocompleter.prototype.selectItem=function($li){var value=$li.data("value"),data=$li.data("data"),displayValue=this.displayValue(value,data),processedDisplayValue=this.beforeUseConverter(displayValue);this.lastProcessedValue_=processedDisplayValue,this.lastSelectedValue_=processedDisplayValue;var d=this.getDelimiterOffsets(),delimiter=this.options.delimiterChar,elem=this.dom.$elem,extraCaretPos=0;this.options.useDelimiter&&(elem.val().substring(d.start-1,d.start)==delimiter&&" "!=delimiter&&(displayValue=" "+displayValue),elem.val().substring(d.end,d.end+1)!=delimiter&&this.lastKeyPressed_!=this.options.delimiterKeyCode?displayValue+=delimiter:extraCaretPos=1),this.setValue(displayValue),this.setCaret(d.start+displayValue.length+extraCaretPos),this.callHook("onItemSelect",{value:value,data:data}),this.deactivate(!0),elem.trigger("result",value)},$.dnnAutocompleter.prototype.displayValue=function(value,data){return $.isFunction(this.options.displayValue)?this.options.displayValue(value,data):value},$.dnnAutocompleter.prototype.hideResults=function(){this.dom.$results.hide()},$.dnnAutocompleter.prototype.deactivate=function(finish){this.finishTimeout_&&clearTimeout(this.finishTimeout_),this.keyTimeout_&&clearTimeout(this.keyTimeout_),finish&&(this.lastProcessedValue_!==this.lastSelectedValue_&&(this.options.mustMatch&&this.setValue(""),this.callHook("onNoMatch")),this.active_&&this.callHook("onFinish"),this.lastKeyPressed_=null,this.lastProcessedValue_=null,this.lastSelectedValue_=null,this.active_=!1),this.hideResults()},$.dnnAutocompleter.prototype.selectRange=function(start,end){var input=this.dom.$elem.get(0);if(input.setSelectionRange)input.focus(),input.setSelectionRange(start,end);else if(input.createTextRange){var range=input.createTextRange();range.collapse(!0),range.moveEnd("character",end),range.moveStart("character",start),range.select()}},$.dnnAutocompleter.prototype.setCaret=function(pos){this.selectRange(pos,pos)},$.dnnAutocompleter.prototype.getCaret=function(){var s,e,range,elem=this.dom.$elem;if($.support.cssFloat)s=elem[0].selectionStart,e=elem[0].selectionEnd;else{var selection=document.selection;if("textarea"!=elem[0].tagName.toLowerCase()){var val=elem.val();range=selection.createRange().duplicate(),range.moveEnd("character",val.length),s=""==range.text?val.length:val.lastIndexOf(range.text),range=selection.createRange().duplicate(),range.moveStart("character",-val.length),e=range.text.length}else{range=selection.createRange();var storedRange=range.duplicate();storedRange.moveToElementText(elem[0]),storedRange.setEndPoint("EndToEnd",range),s=storedRange.text.length-range.text.length,e=s+range.text.length}}return{start:s,end:e}},$.dnnAutocompleter.prototype.setValue=function(value){if(this.options.useDelimiter){var val=this.dom.$elem.val(),d=this.getDelimiterOffsets(),preVal=val.substring(0,d.start),postVal=val.substring(d.end);value=preVal+value+postVal}this.dom.$elem.val(value).blur()},$.dnnAutocompleter.prototype.getValue=function(){var val=this.dom.$elem.val();if(this.options.useDelimiter){var d=this.getDelimiterOffsets();return val.substring(d.start,d.end).trim()}return val},$.dnnAutocompleter.prototype.getDelimiterOffsets=function(){var val=this.dom.$elem.val();if(this.options.useDelimiter){var preCaretVal=val.substring(0,this.getCaret().start),start=preCaretVal.lastIndexOf(this.options.delimiterChar)+1,postCaretVal=val.substring(this.getCaret().start),end=postCaretVal.indexOf(this.options.delimiterChar);end==-1&&(end=val.length),end+=this.getCaret().start}else start=0,end=val.length;return{start:start,end:end}}}(jQuery),function($){var delimiter=new Array,tagsCallbacks=new Array;$.fn.dnnDoAutosize=function(o){var minWidth=$(this).data("minwidth"),maxWidth=$(this).data("maxwidth"),val="",input=$(this),testSubject=$("#"+$(this).data("tester_id"));if(val!==(val=input.val())){var escaped=val.replace(/&/g,"&amp;").replace(/\s/g," ").replace(/</g,"&lt;").replace(/>/g,"&gt;");testSubject.html(escaped);var testerWidth=testSubject.width(),newWidth=testerWidth+o.comfortZone>=minWidth?testerWidth+o.comfortZone:minWidth,currentWidth=input.width(),isValidWidthChange=newWidth<currentWidth&&newWidth>=minWidth||newWidth>minWidth&&newWidth<maxWidth;isValidWidthChange&&input.width(newWidth)}},$.fn.dnnResetAutosize=function(options){var minWidth=$(this).data("minwidth")||options.minInputWidth||$(this).width(),maxWidth=$(this).data("maxwidth")||options.maxInputWidth||$(this).closest(".dnnTagsInput").width()-options.inputPadding,$input=$(this),left=0,$lastSpan=$(this).closest(".dnnTagsInput").find("> span").last();$lastSpan.length>0&&(left=$lastSpan.offset().left-$lastSpan.parent().offset().left+$lastSpan.outerWidth());var availableWidth=maxWidth-left;availableWidth<parseInt(minWidth)&&(availableWidth=maxWidth),$input.css("width",availableWidth)},$.fn.dnnAddTag=function(value,options){return options=jQuery.extend({focus:!1,callback:!0},options),this.each(function(){var id=$(this).attr("id"),tagslist=$(this).val().split(delimiter[id]);""==tagslist[0]&&(tagslist=new Array),value=value.replace(/<.*?>/g,""),value=jQuery.trim(value);var skipTag;if(options.unique?(skipTag=$(this).dnnTagExist(value),1==skipTag?$("#"+id+"_tag").addClass("dnnTagsInvalid"):$("#"+id+"_tag").removeClass("dnnTagsInvalid")):(skipTag=!1,$("#"+id+"_tag").removeClass("dnnTagsInvalid")),""!=value&&1!=skipTag){$("<span>").addClass("tag").append($("<span>").text(value).append("&nbsp;&nbsp;"),$("<a>",{href:"#",title:"Removing tag"}).click(function(){return $("#"+id).dnnRemoveTag(escape(value))})).insertBefore("#"+id+"_addTag"),tagslist.push(value),$("#"+id+"_tag").val(""),options.focus?$("#"+id+"_tag").focus():$("#"+id+"_tag").blur(),$.fn.dnnTagsInput.updateTagsField(this,tagslist);var f;if(options.callback&&tagsCallbacks[id]&&tagsCallbacks[id].onAddTag&&(f=tagsCallbacks[id].onAddTag,f.call(this,value)),tagsCallbacks[id]&&tagsCallbacks[id].onChange){var i=tagslist.length;f=tagsCallbacks[id].onChange,f.call(this,$(this),tagslist[i-1])}}}),!1},$.fn.dnnRemoveTag=function(value){return value=unescape(value),this.each(function(){var id=$(this).attr("id"),old=$(this).val().split(delimiter[id]);$("#"+id+"_tagsinput .tag").remove();for(var str="",i=0;i<old.length;i++)old[i]!=value&&(str=str+delimiter[id]+old[i]);if($.fn.dnnTagsInput.importTags(this,str),tagsCallbacks[id]&&tagsCallbacks[id].onRemoveTag){var f=tagsCallbacks[id].onRemoveTag;f.call(this,value)}}),!1},$.fn.dnnTagExist=function(val){var id=$(this).attr("id"),tagslist=$(this).val().split(delimiter[id]);return jQuery.inArray(val,tagslist)>=0},$.fn.dnnImportTags=function(str){var id=$(this).attr("id");$("#"+id+"_tagsinput .tag").remove(),$.fn.dnnTagsInput.importTags(this,str)},$.fn.dnnTagsInput=function(options){var onError=null,triggerOnError=function(handler){onError||(onError=setTimeout(function(){onError=null,handler&&handler()},0))},settings=jQuery.extend({interactive:!0,defaultText:"Add a tag",minChars:0,maxChars:50,maxTags:16,lessThanMinCharsErrorText:"A tag cannot be less than {0} characters long",lessThanMinCharsErrorTitle:"Tag Length Not Reached",moreThanMaxCharsErrorText:"A tag cannot be more than {0} characters long",moreThanMaxCharsErrorTitle:"Tag Length Exceeded",moreThanMaxTagsErrorText:"A maximum of {0} tags can be attached here",moreThanMaxTagsErrorTitle:"Tags limit exceeded",onErrorLessThanMinChars:function(){$.dnnAlert({text:String.format(settings.lessThanMinCharsErrorText,settings.minChars),title:settings.lessThanMinCharsErrorTitle})},onErrorMoreThanMaxChars:function(){$.dnnAlert({text:String.format(settings.moreThanMaxCharsErrorText,settings.maxChars),title:settings.moreThanMaxCharsErrorTitle})},onErrorMoreThanMaxTags:function(){$.dnnAlert({text:String.format(settings.moreThanMaxTagsErrorText,settings.maxTags),title:settings.moreThanMaxTagsErrorTitle})},width:"45%",autocomplete:{selectFirst:!1},hide:!0,delimiter:",",unique:!0,removeWithBackspace:!0,placeholderColor:"#999",normalColor:"#666",autosize:!0,comfortZone:20,inputPadding:12},options);return this.each(function(){var instance=$(this).data("dnnTagInput");if(instance)return this;settings.hide&&$(this).hide();var id=$(this).attr("id");id&&!delimiter[$(this).attr("id")]||(id=$(this).attr("id","tags"+(new Date).getTime()).attr("id"));var data=jQuery.extend({pid:id,real_input:"#"+id,holder:"#"+id+"_tagsinput",input_wrapper:"#"+id+"_addTag",fake_input:"#"+id+"_tag"},settings);$(this).data("dnnTagInput",data),delimiter[id]=data.delimiter,(settings.onAddTag||settings.onRemoveTag||settings.onChange)&&(tagsCallbacks[id]=new Array,tagsCallbacks[id].onAddTag=settings.onAddTag,tagsCallbacks[id].onRemoveTag=settings.onRemoveTag,tagsCallbacks[id].onChange=settings.onChange);var markup='<div id="'+id+'_tagsinput" class="dnnTagsInput">';return markup+='<div id="'+id+'_addTag">',settings.interactive&&(markup+='<input id="'+id+'_tag" value="" data-default="'+settings.defaultText+'" autocomplete="off" />'),markup+="</div>",markup+='<div class="dnnTagsClear"></div></div>',$(markup).insertAfter(this),$(data.holder).css({width:settings.width,"min-height":settings.height}),""!=$(data.real_input).val()&&$.fn.dnnTagsInput.importTags($(data.real_input),$(data.real_input).val()),settings.interactive&&($(data.fake_input).dnnPlaceholder({color:[settings.normalColor,settings.placeholderColor]}),$(data.fake_input).dnnResetAutosize(settings),$(data.holder).bind("click",data,function(event){return $(event.data.real_input).triggerHandler("focus"),$(event.data.fake_input).triggerHandler("focus"),!1}),void 0!=settings.autocomplete_url?void 0!==$.dnnAutocompleter&&(settings.advanced&&settings.advanced.length&&(settings.autocomplete.advanced=settings.advanced),$(data.fake_input).dnnAutocomplete(settings.autocomplete_url,settings.autocomplete),$(data.fake_input).bind("result",data,function(event,tag){if(tag){var tagslist=$(event.data.real_input).val().split(delimiter[id]);""==tagslist[0]&&(tagslist=new Array),event.data.maxTags<=tagslist.length?(event.data.onErrorMoreThanMaxTags&&triggerOnError(event.data.onErrorMoreThanMaxTags),$(data.fake_input).val("")):$(event.data.real_input).dnnAddTag(tag,{focus:!0,unique:settings.unique})}})):$(data.fake_input).bind("blur",data,function(event){var d=$(this).attr("data-default"),tagslist=$(event.data.real_input).val().split(delimiter[id]);if(""==tagslist[0]&&(tagslist=new Array),""!=$(event.data.fake_input).val()&&$(event.data.fake_input).val()!=d)if(event.data.minChars>$(event.data.fake_input).val().length)event.data.onErrorLessThanMinChars&&triggerOnError(event.data.onErrorLessThanMinChars),$(data.fake_input).val("");else if(event.data.maxChars<$(event.data.fake_input).val().length)event.data.onErrorMoreThanMaxChars&&triggerOnError(event.data.onErrorMoreThanMaxChars),$(data.fake_input).val("");else if(event.data.maxTags<=tagslist.length)event.data.onErrorMoreThanMaxTags&&triggerOnError(event.data.onErrorMoreThanMaxTags),$(data.fake_input).val("");else for(var tags=$(event.data.fake_input).val().split(delimiter[id]),i=0;i<tags.length;i++)$(event.data.real_input).dnnAddTag(tags[i],{focus:!0,unique:settings.unique});return!1}),$(data.fake_input).bind("keypress",data,function(event){if(event.which==event.data.delimiter.charCodeAt(0)||13==event.which){event.preventDefault();var tagslist=$(event.data.real_input).val().split(delimiter[id]);if(""==tagslist[0]&&(tagslist=new Array),event.data.minChars>$(event.data.fake_input).val().length)event.data.onErrorLessThanMinChars&&triggerOnError(event.data.onErrorLessThanMinChars),$(data.fake_input).val("");else if(event.data.maxChars<$(event.data.fake_input).val().length)event.data.onErrorMoreThanMaxChars&&triggerOnError(event.data.onErrorMoreThanMaxChars),$(data.fake_input).val("");else if(event.data.maxTags<=tagslist.length)event.data.onErrorMoreThanMaxTags&&triggerOnError(event.data.onErrorMoreThanMaxTags),$(data.fake_input).val("");else for(var tags=$(event.data.fake_input).val().split(delimiter[id]),i=0;i<tags.length;i++)$(event.data.real_input).dnnAddTag(tags[i],{focus:!0,unique:settings.unique});return $(event.data.fake_input).dnnResetAutosize(settings),!1}return event.data.autosize&&$(event.data.fake_input).dnnDoAutosize(settings),!0}),data.removeWithBackspace&&$(data.fake_input).bind("keydown",function(event){if(8==event.keyCode&&""==$(this).val()){event.preventDefault();var lastTag=$(this).closest(".dnnTagsInput").find(".tag:last").text(),lastTagId=$(this).attr("id").replace(/_tag$/,"");lastTag=lastTag.replace(/[\s]+$/,""),$("#"+lastTagId).dnnRemoveTag(escape(lastTag)),$(this).trigger("focus")}}),$(data.fake_input).blur(),data.unique&&$(data.fake_input).keydown(function(event){(8==event.keyCode||String.fromCharCode(event.which).match(/\w+|[áéíóúÁÉÍÓÚñÑ,/]+/))&&$(this).removeClass("dnnTagsInvalid")})),this}),this},$.fn.dnnTagsInput.updateTagsField=function(obj,tagslist){var id=$(obj).attr("id");$(obj).val(tagslist.join(delimiter[id]))},$.fn.dnnTagsInput.importTags=function(obj,val){$(obj).val("");for(var id=$(obj).attr("id"),tags=val.split(delimiter[id]),i=0;i<tags.length;i++)$(obj).dnnAddTag(tags[i],{focus:!1,callback:!1});if(tagsCallbacks[id]&&tagsCallbacks[id].onChange){var f=tagsCallbacks[id].onChange;f.call(obj,obj,tags[i])}},$.fn.dnnPlaceholder=function(options){return options=$.extend({},{cssClass:"dnnPlaceholder",color:[]},options),this.each(function(){var $this=$(this),instance=$this.data("dnnPlaceHolder");if(instance)return!0;$this.data("dnnPlaceHolder",!0);var placeholderSupported="placeholder"in $this[0];if(placeholderSupported)$this.attr("placeholder",$this.attr("data-default"));else{var $fakeInput=$('<input type="text" />').attr("class",$this.attr("class")).attr("style",$this.attr("style")).val($this.attr("data-default"));$this.hide().after($fakeInput),2===options.color.length?($fakeInput.css("color",options.color[1]),$this.css("color",options.color[0])):$fakeInput.addClass(options.cssClass),$fakeInput.on("focus",function(event){$fakeInput.hide(),$this.show().focus()}),$this.on("blur",function(event){$this.attr("data-default");""===$this.val()&&($this.hide(),$fakeInput.show())});var events=$._data(this,"events").blur,first=events.pop();events.splice(0,0,first)}return!0}),this}}(jQuery),function($){$.fn.toggleErrorMessage=function(options){var defaultOptions={errorMessage:"Error message",errorCls:"dnnFormError",show:!0,removeErrorMessage:!0};return options=$.extend(defaultOptions,options),this.each(function(){var dnnFormItem=$(this).closest(".dnnFormItem");if(options.show){var errorSpan=dnnFormItem.find("span.dnnFormMessage."+options.errorCls);errorSpan.length?errorSpan.html(options.errorMessage):(errorSpan=$('<span class="dnnFormMessage '+options.errorCls+'">'+options.errorMessage+"</span>"),dnnFormItem.append(errorSpan)),"div"==this.tagName.toLowerCase()?$(this).hasClass("RadComboBox")&&$(this).addClass("dnnError"):$(this).parent().hasClass("RadPicker")?$(this).parent().find("input.riTextBox").css("border","1px solid red"):$(this).hasClass("dnnSpinnerInput")?$(this).parent().css("border","1px solid red"):$(this).css("border","1px solid red")}else options.removeErrorMessage?dnnFormItem.find("span."+options.errorCls).remove():dnnFormItem.find("span."+options.errorCls).hide(),"div"==this.tagName.toLowerCase()?$(this).hasClass("RadComboBox")&&$(this).removeClass("dnnError"):$(this).hasClass("dnnSpinnerInput")?$(this).parent().css("border","1px solid #ccc"):$(this).css("border","1px solid #ccc")})},$.fn.dnnFormSubmit=function(options){var defaultOptions={validates:[]};return options=$.extend(defaultOptions,options),this.each(function(){$(this).click(function(){for(var formValidate=!0,i=0;i<options.validates.length;i++){var ele=$("#"+options.validates[i].ele),func=options.validates[i].func;if(ele.length){var eleVal=ele.val(),eleError=func.call(ele.get(0),eleVal);eleError?(ele.toggleErrorMessage({errorMessage:eleError,show:!0}),formValidate=!1):ele.toggleErrorMessage({show:!1});var hideErrorInfo=function(){$(this).toggleErrorMessage({show:!1})};ele.unbind("focus",hideErrorInfo).bind("focus",hideErrorInfo)}}return formValidate})})},$.dnnRadPickerHack=function(){var hideErrorInfo=function(){$(this).toggleErrorMessage({show:!1,removeErrorMessage:!1})},dnnRadPickerPopupFix=function(){if($.support.cssFloat){var id=$(this).attr("id"),popupId=id.replace("popupButton","calendar_wrapper"),popupElement=$("#"+popupId),wrapperId=id.replace("popupButton","wrapper"),wrapperElement=$("#"+wrapperId),popupElementTop=popupElement.parent().position().top,wrapperElementTop=wrapperElement.offset().top,popupTbl=popupElement.find(".RadCalendar_Default"),nextEle=popupTbl.next();(nextEle.hasClass("RadCalendar_Default_PopupArrow_Down")||nextEle.hasClass("RadCalendar_Default_PopupArrow_Up"))&&nextEle.remove(),popupElementTop<wrapperElementTop?popupTbl.after('<div class="RadCalendar_Default_PopupArrow_Down"></div>'):popupTbl.after('<div class="RadCalendar_Default_PopupArrow_Up"></div>')}$(this).toggleErrorMessage({show:!1,removeErrorMessage:!1})};$(".RadPicker_Default a.rcCalPopup").unbind("click",dnnRadPickerPopupFix).bind("click",dnnRadPickerPopupFix),$(".RadPicker_Default .riTextBox").unbind("focus",hideErrorInfo).bind("focus",hideErrorInfo)},$.dnnComboBoxLoaded=function(sender){"Telerik.Web.UI.RadComboBox"==sender.constructor.__typeName&&$(sender._inputDomElement).closest(".RadComboBox").removeAttr("style")},$.dnnComboBoxHack=function(sender){$(("#"+sender._clientStateFieldID).replace("_ClientState","")).toggleErrorMessage({show:!1,removeErrorMessage:!1})},$.dnnComboBoxScroll=function(sender){if($.support.cssFloat){var container=$(("#"+sender._clientStateFieldID+" .rcbScroll").replace("ClientState","DropDown"));container.data("scrollPane")?container.data("scrollPane").data("jsp").reinitialise():container.data("scrollPane",container.jScrollPane())}},$.dnnComboBoxItemRequested=function(sender){setTimeout(function(){var container=$(("#"+sender._clientStateFieldID+" .rcbScroll").replace("ClientState","DropDown"));container.data("scrollPane")&&container.data("scrollPane").data("jsp").reinitialise()},0)},$.dnnGridCreated=function(sender){var clientId=sender.ClientID,$grid=$("#"+clientId);$("input.rgSortDesc, input.rgSortAsc",$grid).click(function(){var href=$(this).parent().find("a").get(0).href;return window.location=href,!1}),$grid.hasClass("dnnTooltipGrid")&&($grid.dnnHelperTipDestroy(),$(".rgRow, .rgAltRow",$grid).each(function(){var info="Here is some text will show up and explian more about this information";$(this).dnnHelperTip({helpContent:info,holderId:clientId})}));var grid=$find(clientId),headerCheck=$(".rgCheck",$grid);headerCheck.length&&(headerCheck.each(function(){var checkbox=$(this).find('input[type="checkbox"]').get(0),onclick=checkbox.onclick;checkbox.onchange=onclick,checkbox.onclick=null}),$('.rgDataDiv input[type="checkbox"]',$grid).change(function(){var masterTable=grid.get_masterTableView(),rowIndex=$(this).closest("tr").get(0).rowIndex,checked=this.checked;checked?masterTable.selectItem(rowIndex):masterTable.deselectItem(rowIndex)})),$(".rgDataDiv").each(function(){var $this=$(this),ele=$this.get(0);ele.scrollPane=$this.jScrollPane();var throttleTimeout,api=ele.scrollPane.data("jsp");if($(window).bind("resize",function(){$.support.cssFloat?api.reinitialise():(throttleTimeout&&(clearTimeout(throttleTimeout),throttleTimeout=null),throttleTimeout=setTimeout(function(){api.reinitialise(),throttleTimeout=null},50))}),window.__rgDataDivScrollTopPersistArray&&window.__rgDataDivScrollTopPersistArray.length){var y=window.__rgDataDivScrollTopPersistArray.pop();api.scrollToY(y)}})}}(jQuery),function($){function handler(event){var orgEvent=event||window.event,args=[].slice.call(arguments,1),delta=0,deltaX=0,deltaY=0;return event=$.event.fix(orgEvent),event.type="mousewheel",orgEvent.wheelDelta&&(delta=orgEvent.wheelDelta/120),orgEvent.detail&&(delta=-orgEvent.detail/3),deltaY=delta,void 0!==orgEvent.axis&&orgEvent.axis===orgEvent.HORIZONTAL_AXIS&&(deltaY=0,deltaX=-1*delta),void 0!==orgEvent.wheelDeltaY&&(deltaY=orgEvent.wheelDeltaY/120),void 0!==orgEvent.wheelDeltaX&&(deltaX=-1*orgEvent.wheelDeltaX/120),args.unshift(event,delta,deltaX,deltaY),($.event.dispatch||$.event.handle).apply(this,args)}var types=["DOMMouseScroll","mousewheel"];if($.event.fixHooks)for(var i=types.length;i;)$.event.fixHooks[types[--i]]=$.event.mouseHooks;$.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var i=types.length;i;)this.addEventListener(types[--i],handler,!1);else this.onmousewheel=handler},teardown:function(){if(this.removeEventListener)for(var i=types.length;i;)this.removeEventListener(types[--i],handler,!1);else this.onmousewheel=null}},$.fn.extend({mousewheel:function(fn){return fn?this.bind("mousewheel",fn):this.trigger("mousewheel")},unmousewheel:function(fn){return this.unbind("mousewheel",fn)}})}(jQuery),function($){$.fn.dnnFileInput=function(options){var opts=$.extend({},$.fn.dnnFileInput.defaultOptions,options);return this.each(function(){var $ctrl=$(this);if(!$ctrl.hasClass("normalFileUpload")&&!this.wrapper&&!($ctrl.parents().hasClass("RadUpload")||this.parentNode&&"span"==this.parentNode.tagName.toLowerCase()&&$ctrl.parent().hasClass("dnnInputFileWrapper"))){this.wrapper=$("<span class='dnnInputFileWrapper "+opts.buttonClass+"'></span>");var text=$ctrl.data("text");text=text||"Choose File",this.wrapper.text(text),$ctrl.wrap(this.wrapper),$ctrl.data("wrapper",$ctrl.parent()),opts.showSelectedFileNameAsButtonText&&$ctrl.change(function(){var val=$(this).val();if(""!=val){var lastIdx=val.lastIndexOf("\\")+1;val=val.substring(lastIdx,val.length)}else val=text;$(this).data("wrapper").get(0).childNodes[0].nodeValue=val})}})},$.fn.dnnFileInput.defaultOptions={buttonClass:"dnnSecondaryAction",showSelectedFileNameAsButtonText:!0}}(jQuery),function($){var supportAjaxUpload=function(){var xhr=new XMLHttpRequest;return!!(xhr&&"upload"in xhr&&"onprogress"in xhr.upload)};$.fn.dnnFileUpload=function(settings){return this.each(function(){var scope=$(this).attr("id");window.dnn.dnnFileUpload.setSettings(scope,settings);var service=$.dnnSF();$("#"+settings.progressBarId).parent().hide();var droppableSpan=$("#"+settings.dropZoneId+">span");"draggable"in document.createElement("span")?droppableSpan.show():droppableSpan.hide();var url=service.getServiceRoot("internalservices")+"fileupload/postfile";if(!supportAjaxUpload()){var antiForgeryToken=$('input[name="__RequestVerificationToken"]').val();url+="?__RequestVerificationToken="+antiForgeryToken}$("#"+scope+' input[type="file"]').fileupload({url:url,beforeSend:service.setModuleHeaders,dropZone:$("#"+settings.dropZoneId),replaceFileInput:!1,submit:function(e,data){return data.formData={folder:settings.folder,filter:settings.fileFilter,overwrite:"true"},!0},progressall:function(e,data){var progress=parseInt(data.loaded/data.total*100,10);progress<100?($("#"+settings.progressBarId).parent().show(),$("#"+settings.progressBarId+">div").css("width",progress+"%")):$("#"+settings.progressBarId).parent().hide()},done:function(e,data){$("#"+settings.progressBarId).parent().hide();var img=new Image;$(img).load(function(){$("#"+settings.dropZoneId+" img").remove(),$(img).css({"max-width":180,"max-height":150}).insertBefore($("#"+settings.dropZoneId+" span"))});var src;data.dataType&&"object"==typeof data.result&&data.result.length?data.result=JSON.parse(data.result.text()):data.result=JSON.parse(data.result);var testContent=$("<pre>"+data.result.FilePath+"</pre>");if(src=testContent.length?testContent.text():data.result,src&&$.trim(src)){img.src=src;var fileName=data.result.FilePath.replace("\\","/");fileName.indexOf("/")>-1&&(fileName=fileName.split("/")[fileName.split("/").length-1]),dnn[settings.filesComboId].refresh(dnn[settings.foldersComboId].selectedItem().key),dnn[settings.filesComboId].selectedItem({key:data.result.FileId,value:fileName})}},fail:function(e,data){$("#"+settings.progressBarId).parent().hide();var resp=JSON.parse(data.jqXHR.responseText);alert(resp.Message)}}),$("#"+scope+" input[name=uploadFileButton]").click(function(){var instance=dnn[settings.fileUploadId],options=instance.options;null!=dnn[settings.foldersComboId].selectedItem()&&(instance.options.folderPicker.initialState.selectedItem=dnn[settings.foldersComboId].selectedItem(),instance.options.folderPath=window.dnn.dnnFileUpload.getSelectedPath(dnn[settings.foldersComboId])),instance.show(options),window.dnn.dnnFileUpload.updateExpandPath(dnn[settings.foldersComboId],instance._panel._folderPicker.id()),instance._panel.$element.on("onfileuploadcomplete",function(event,data){if("string"==typeof data)data=JSON.parse(data);else{var b=data[0];data=JSON.parse(b.body.innerText)}if(data&&data.fileId){var folderPicker=instance._panel._folderPicker;dnn[settings.foldersComboId].selectedItem(folderPicker.selectedItem()),window.dnn.dnnFileUpload.Folders_Changed(dnn[settings.foldersComboId].selectedItem(),dnn[settings.foldersComboId].$element),window.dnn.dnnFileUpload.updateExpandPath(folderPicker,settings.foldersComboId),dnn[settings.filesComboId].refresh(dnn[settings.foldersComboId].selectedItem().key),dnn[settings.filesComboId].selectedItem({key:data.fileId.toString(),value:data.fileName}),window.dnn.dnnFileUpload.Files_Changed(dnn[settings.filesComboId].selectedItem(),dnn[settings.filesComboId].$element)}})}),setTimeout(function(){dnn[settings.filesComboId].options.services.parameters.parentId=settings.selectedFolderId;var filesCombo=dnn[settings.filesComboId],selectedFileId=filesCombo.selectedItem()?filesCombo.selectedItem().key:null;url=service.getServiceRoot("internalservices")+"fileupload/loadimage";var fileId=selectedFileId?parseInt(selectedFileId):0;fileId>0&&$.ajax({url:url,type:"GET",data:{fileId:selectedFileId},success:function(d){var img=new Image;$(img).load(function(){$("#"+settings.dropZoneId+" img").remove(),$(img).css({"max-width":180,"max-height":150}).insertBefore($("#"+settings.dropZoneId+" span"))}),img.src=d},error:function(){}})},500)})},"undefined"==typeof window.dnn&&(window.dnn={}),window.dnn.dnnFileUpload=window.dnn.dnnFileUpload||{},window.dnn.dnnFileUpload.settings={},window.dnn.dnnFileUpload.setSettings=function(scope,settings){window.dnn.dnnFileUpload.settings[scope]=settings},window.dnn.dnnFileUpload.getSettings=function(sender){var scope=sender.closest(".dnnFileUploadScope").attr("id");return window.dnn.dnnFileUpload.settings[scope]},window.dnn.dnnFileUpload.Folders_Changed=function(node,sender){var settings=window.dnn.dnnFileUpload.getSettings(sender);if(!settings)return!1;if(node){var selectedPathArray=dnn[settings.foldersComboId].selectedPath();if(0===selectedPathArray.length&&settings.folder)return settings.folder;var selectedPath="";if(selectedPathArray.length>1)for(var i=1,size=selectedPathArray.length;i<size;i++)selectedPath+=selectedPathArray[i].name+"/";settings.folder=selectedPath,dnn[settings.filesComboId].refresh(node.key),dnn[settings.filesComboId].selectedItem(null),window.dnn.dnnFileUpload.Files_Changed({key:null},$("#"+settings.filesComboId))}},window.dnn.dnnFileUpload.Files_Changed=function(node,sender){var settings=window.dnn.dnnFileUpload.getSettings(sender);if(settings&&node){var fileId=node.key,service=$.dnnSF(),url=service.getServiceRoot("internalservices")+"fileupload/loadimage";fileId?$.ajax({url:url,type:"GET",data:{fileId:fileId},success:function(d){var img=new Image;$(img).load(function(){$("#"+settings.dropZoneId+" img").remove(),$(img).css({"max-width":180,"max-height":150}).insertBefore($("#"+settings.dropZoneId+" span"))}),img.src=d},error:function(){}}):$("#"+settings.dropZoneId+" img").remove()}},window.dnn.dnnFileUpload.updateExpandPath=function(dropDownList,targetId){var selectedPaths=dropDownList.selectedPath(),expandPath="";if(0==selectedPaths.length)expandPath=dnn.getVar(dropDownList.id()+"_expandPath");else if(selectedPaths.length>1)for(var i=0;i<selectedPaths.length-1;i++)expandPath=""==expandPath?selectedPaths[i].id:expandPath+","+selectedPaths[i].id;""!=expandPath&&dnn.setVar(targetId+"_expandPath",expandPath)},window.dnn.dnnFileUpload.getSelectedPath=function(dropDownList){var selectedPathArray=dropDownList.selectedPath(),settings=window.dnn.dnnFileUpload.getSettings(dropDownList.$element);if(0===selectedPathArray.length&&settings.folder)return settings.folder;var selectedPath="";if(selectedPathArray.length>1)for(var i=1,size=selectedPathArray.length;i<size;i++)selectedPath+=selectedPathArray[i].name+"/";return selectedPath}}(jQuery),function($){$.fn.jScrollPane=function(settings){function JScrollPane(elem,s){function initialise(s){var isMaintainingPositon,lastContentX,lastContentY,hasContainingSpaceChanged,originalScrollTop,originalScrollLeft,maintainAtBottom=!1,maintainAtRight=!1;if(settings=s,void 0===pane)originalScrollTop=elem.scrollTop(),originalScrollLeft=elem.scrollLeft(),elem.css({overflow:"hidden",padding:0}),paneWidth=elem.innerWidth()+originalPaddingTotalWidth,paneHeight=elem.innerHeight(),elem.width(paneWidth),pane=$('<div class="jspPane" />').css("padding",originalPadding).append(elem.children()),container=$('<div class="jspContainer" />').css({width:paneWidth+"px",height:paneHeight+"px"}).append(pane).appendTo(elem);else{if(elem.css("width",""),maintainAtBottom=settings.stickToBottom&&isCloseToBottom(),maintainAtRight=settings.stickToRight&&isCloseToRight(),hasContainingSpaceChanged=elem.innerWidth()+originalPaddingTotalWidth!=paneWidth||elem.outerHeight()!=paneHeight,hasContainingSpaceChanged&&(paneWidth=elem.innerWidth()+originalPaddingTotalWidth,paneHeight=elem.innerHeight(),container.css({width:paneWidth+"px",height:paneHeight+"px"})),!hasContainingSpaceChanged&&previousContentWidth==contentWidth&&pane.outerHeight()==contentHeight)return void elem.width(paneWidth);previousContentWidth=contentWidth,pane.css("width",""),elem.width(paneWidth),container.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}pane.css("overflow","auto"),contentWidth=s.contentWidth?s.contentWidth:pane[0].scrollWidth,contentHeight=pane[0].scrollHeight,pane.css("overflow",""),percentInViewH=contentWidth/paneWidth,percentInViewV=contentHeight/paneHeight,isScrollableV=percentInViewV>1,isScrollableH=percentInViewH>1,isScrollableH||isScrollableV?(elem.addClass("jspScrollable"),isMaintainingPositon=settings.maintainPosition&&(verticalDragPosition||horizontalDragPosition),isMaintainingPositon&&(lastContentX=contentPositionX(),lastContentY=contentPositionY()),initialiseVerticalScroll(),initialiseHorizontalScroll(),resizeScrollbars(),isMaintainingPositon&&(scrollToX(maintainAtRight?contentWidth-paneWidth:lastContentX,!1),
scrollToY(maintainAtBottom?contentHeight-paneHeight:lastContentY,!1)),initFocusHandler(),initMousewheel(),initTouch(),settings.enableKeyboardNavigation&&initKeyboardNav(),settings.clickOnTrack&&initClickOnTrack(),observeHash(),settings.hijackInternalLinks&&hijackInternalLinks()):(elem.removeClass("jspScrollable"),pane.css({top:0,width:container.width()-originalPaddingTotalWidth}),removeMousewheel(),removeFocusHandler(),removeKeyboardNav(),removeClickOnTrack()),settings.autoReinitialise&&!reinitialiseInterval?reinitialiseInterval=setInterval(function(){initialise(settings)},settings.autoReinitialiseDelay):!settings.autoReinitialise&&reinitialiseInterval&&clearInterval(reinitialiseInterval),originalScrollTop&&elem.scrollTop(0)&&scrollToY(originalScrollTop,!1),originalScrollLeft&&elem.scrollLeft(0)&&scrollToX(originalScrollLeft,!1),elem.trigger("jsp-initialised",[isScrollableH||isScrollableV])}function initialiseVerticalScroll(){isScrollableV&&(container.append($('<div class="jspVerticalBar" />').append($('<div class="jspCap jspCapTop" />'),$('<div class="jspTrack" />').append($('<div class="jspDrag" />').append($('<div class="jspDragTop" />'),$('<div class="jspDragBottom" />'))),$('<div class="jspCap jspCapBottom" />'))),verticalBar=container.find(">.jspVerticalBar"),verticalTrack=verticalBar.find(">.jspTrack"),verticalDrag=verticalTrack.find(">.jspDrag"),settings.showArrows&&(arrowUp=$('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",getArrowScroll(0,-1)).bind("click.jsp",nil),arrowDown=$('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",getArrowScroll(0,1)).bind("click.jsp",nil),settings.arrowScrollOnHover&&(arrowUp.bind("mouseover.jsp",getArrowScroll(0,-1,arrowUp)),arrowDown.bind("mouseover.jsp",getArrowScroll(0,1,arrowDown))),appendArrows(verticalTrack,settings.verticalArrowPositions,arrowUp,arrowDown)),verticalTrackHeight=paneHeight,container.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){verticalTrackHeight-=$(this).outerHeight()}),verticalDrag.hover(function(){verticalDrag.addClass("jspHover")},function(){verticalDrag.removeClass("jspHover")}).bind("mousedown.jsp",function(e){$("html").bind("dragstart.jsp selectstart.jsp",nil),verticalDrag.addClass("jspActive");var startY=e.pageY-verticalDrag.position().top;return $("html").bind("mousemove.jsp",function(e){positionDragY(e.pageY-startY,!1)}).bind("mouseup.jsp mouseleave.jsp",cancelDrag),!1}),sizeVerticalScrollbar())}function sizeVerticalScrollbar(){verticalTrack.height(verticalTrackHeight+"px"),verticalDragPosition=0,scrollbarWidth=settings.verticalGutter+verticalTrack.outerWidth(),pane.width(paneWidth-scrollbarWidth-originalPaddingTotalWidth);try{0===verticalBar.position().left&&pane.css("margin-left",scrollbarWidth+"px")}catch(err){}}function initialiseHorizontalScroll(){isScrollableH&&(container.append($('<div class="jspHorizontalBar" />').append($('<div class="jspCap jspCapLeft" />'),$('<div class="jspTrack" />').append($('<div class="jspDrag" />').append($('<div class="jspDragLeft" />'),$('<div class="jspDragRight" />'))),$('<div class="jspCap jspCapRight" />'))),horizontalBar=container.find(">.jspHorizontalBar"),horizontalTrack=horizontalBar.find(">.jspTrack"),horizontalDrag=horizontalTrack.find(">.jspDrag"),settings.showArrows&&(arrowLeft=$('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",getArrowScroll(-1,0)).bind("click.jsp",nil),arrowRight=$('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",getArrowScroll(1,0)).bind("click.jsp",nil),settings.arrowScrollOnHover&&(arrowLeft.bind("mouseover.jsp",getArrowScroll(-1,0,arrowLeft)),arrowRight.bind("mouseover.jsp",getArrowScroll(1,0,arrowRight))),appendArrows(horizontalTrack,settings.horizontalArrowPositions,arrowLeft,arrowRight)),horizontalDrag.hover(function(){horizontalDrag.addClass("jspHover")},function(){horizontalDrag.removeClass("jspHover")}).bind("mousedown.jsp",function(e){$("html").bind("dragstart.jsp selectstart.jsp",nil),horizontalDrag.addClass("jspActive");var startX=e.pageX-horizontalDrag.position().left;return $("html").bind("mousemove.jsp",function(e){positionDragX(e.pageX-startX,!1)}).bind("mouseup.jsp mouseleave.jsp",cancelDrag),!1}),horizontalTrackWidth=container.innerWidth(),sizeHorizontalScrollbar())}function sizeHorizontalScrollbar(){container.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){horizontalTrackWidth-=$(this).outerWidth()}),horizontalTrack.width(horizontalTrackWidth+"px"),horizontalDragPosition=0}function resizeScrollbars(){if(isScrollableH&&isScrollableV){var horizontalTrackHeight=horizontalTrack.outerHeight(),verticalTrackWidth=verticalTrack.outerWidth();verticalTrackHeight-=horizontalTrackHeight,$(horizontalBar).find(">.jspCap:visible,>.jspArrow").each(function(){horizontalTrackWidth+=$(this).outerWidth()}),horizontalTrackWidth-=verticalTrackWidth,paneHeight-=verticalTrackWidth,paneWidth-=horizontalTrackHeight,horizontalTrack.parent().append($('<div class="jspCorner" />').css("width",horizontalTrackHeight+"px")),sizeVerticalScrollbar(),sizeHorizontalScrollbar()}isScrollableH&&pane.width(container.outerWidth()-originalPaddingTotalWidth+"px"),contentHeight=pane.outerHeight(),percentInViewV=contentHeight/paneHeight,isScrollableH&&(horizontalDragWidth=Math.ceil(1/percentInViewH*horizontalTrackWidth),horizontalDragWidth>settings.horizontalDragMaxWidth?horizontalDragWidth=settings.horizontalDragMaxWidth:horizontalDragWidth<settings.horizontalDragMinWidth&&(horizontalDragWidth=settings.horizontalDragMinWidth),horizontalDrag.width(horizontalDragWidth+"px"),dragMaxX=horizontalTrackWidth-horizontalDragWidth,_positionDragX(horizontalDragPosition)),isScrollableV&&(verticalDragHeight=Math.ceil(1/percentInViewV*verticalTrackHeight),verticalDragHeight>settings.verticalDragMaxHeight?verticalDragHeight=settings.verticalDragMaxHeight:verticalDragHeight<settings.verticalDragMinHeight&&(verticalDragHeight=settings.verticalDragMinHeight),verticalDrag.height(verticalDragHeight+"px"),dragMaxY=verticalTrackHeight-verticalDragHeight,_positionDragY(verticalDragPosition))}function appendArrows(ele,p,a1,a2){var aTemp,p1="before",p2="after";"os"==p&&(p=/Mac/.test(navigator.platform)?"after":"split"),p==p1?p2=p:p==p2&&(p1=p,aTemp=a1,a1=a2,a2=aTemp),ele[p1](a1)[p2](a2)}function getArrowScroll(dirX,dirY,ele){return function(){return arrowScroll(dirX,dirY,this,ele),this.blur(),!1}}function arrowScroll(dirX,dirY,arrow,ele){arrow=$(arrow).addClass("jspActive");var eve,scrollTimeout,isFirst=!0,doScroll=function(){0!==dirX&&jsp.scrollByX(dirX*settings.arrowButtonSpeed),0!==dirY&&jsp.scrollByY(dirY*settings.arrowButtonSpeed),scrollTimeout=setTimeout(doScroll,isFirst?settings.initialDelay:settings.arrowRepeatFreq),isFirst=!1};doScroll(),eve=ele?"mouseout.jsp":"mouseup.jsp",ele=ele||$("html"),ele.bind(eve,function(){arrow.removeClass("jspActive"),scrollTimeout&&clearTimeout(scrollTimeout),scrollTimeout=null,ele.unbind(eve)})}function initClickOnTrack(){removeClickOnTrack(),isScrollableV&&verticalTrack.bind("mousedown.jsp",function(e){if(void 0===e.originalTarget||e.originalTarget==e.currentTarget){var scrollTimeout,clickedTrack=$(this),offset=clickedTrack.offset(),direction=e.pageY-offset.top-verticalDragPosition,isFirst=!0,doScroll=function(){var offset=clickedTrack.offset(),pos=e.pageY-offset.top-verticalDragHeight/2,contentDragY=paneHeight*settings.scrollPagePercent,dragY=dragMaxY*contentDragY/(contentHeight-paneHeight);if(direction<0)verticalDragPosition-dragY>pos?jsp.scrollByY(-contentDragY):positionDragY(pos);else{if(!(direction>0))return void cancelClick();verticalDragPosition+dragY<pos?jsp.scrollByY(contentDragY):positionDragY(pos)}scrollTimeout=setTimeout(doScroll,isFirst?settings.initialDelay:settings.trackClickRepeatFreq),isFirst=!1},cancelClick=function(){scrollTimeout&&clearTimeout(scrollTimeout),scrollTimeout=null,$(document).unbind("mouseup.jsp",cancelClick)};return doScroll(),$(document).bind("mouseup.jsp",cancelClick),!1}}),isScrollableH&&horizontalTrack.bind("mousedown.jsp",function(e){if(void 0===e.originalTarget||e.originalTarget==e.currentTarget){var scrollTimeout,clickedTrack=$(this),offset=clickedTrack.offset(),direction=e.pageX-offset.left-horizontalDragPosition,isFirst=!0,doScroll=function(){var offset=clickedTrack.offset(),pos=e.pageX-offset.left-horizontalDragWidth/2,contentDragX=paneWidth*settings.scrollPagePercent,dragX=dragMaxX*contentDragX/(contentWidth-paneWidth);if(direction<0)horizontalDragPosition-dragX>pos?jsp.scrollByX(-contentDragX):positionDragX(pos);else{if(!(direction>0))return void cancelClick();horizontalDragPosition+dragX<pos?jsp.scrollByX(contentDragX):positionDragX(pos)}scrollTimeout=setTimeout(doScroll,isFirst?settings.initialDelay:settings.trackClickRepeatFreq),isFirst=!1},cancelClick=function(){scrollTimeout&&clearTimeout(scrollTimeout),scrollTimeout=null,$(document).unbind("mouseup.jsp",cancelClick)};return doScroll(),$(document).bind("mouseup.jsp",cancelClick),!1}})}function removeClickOnTrack(){horizontalTrack&&horizontalTrack.unbind("mousedown.jsp"),verticalTrack&&verticalTrack.unbind("mousedown.jsp")}function cancelDrag(){$("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),verticalDrag&&verticalDrag.removeClass("jspActive"),horizontalDrag&&horizontalDrag.removeClass("jspActive")}function positionDragY(destY,animate){isScrollableV&&(destY<0?destY=0:destY>dragMaxY&&(destY=dragMaxY),void 0===animate&&(animate=settings.animateScroll),animate?jsp.animate(verticalDrag,"top",destY,_positionDragY):(verticalDrag.css("top",destY),_positionDragY(destY)))}function _positionDragY(destY){void 0===destY&&(destY=verticalDrag.position().top),container.scrollTop(0),verticalDragPosition=destY;var isAtTop=0===verticalDragPosition,isAtBottom=verticalDragPosition==dragMaxY,percentScrolled=destY/dragMaxY,destTop=-percentScrolled*(contentHeight-paneHeight);wasAtTop==isAtTop&&wasAtBottom==isAtBottom||(wasAtTop=isAtTop,wasAtBottom=isAtBottom,elem.trigger("jsp-arrow-change",[wasAtTop,wasAtBottom,wasAtLeft,wasAtRight])),updateVerticalArrows(isAtTop,isAtBottom),pane.css("top",destTop),elem.trigger("jsp-scroll-y",[-destTop,isAtTop,isAtBottom]).trigger("scroll")}function positionDragX(destX,animate){isScrollableH&&(destX<0?destX=0:destX>dragMaxX&&(destX=dragMaxX),void 0===animate&&(animate=settings.animateScroll),animate?jsp.animate(horizontalDrag,"left",destX,_positionDragX):(horizontalDrag.css("left",destX),_positionDragX(destX)))}function _positionDragX(destX){void 0===destX&&(destX=horizontalDrag.position().left),container.scrollTop(0),horizontalDragPosition=destX;var isAtLeft=0===horizontalDragPosition,isAtRight=horizontalDragPosition==dragMaxX,percentScrolled=destX/dragMaxX,destLeft=-percentScrolled*(contentWidth-paneWidth);wasAtLeft==isAtLeft&&wasAtRight==isAtRight||(wasAtLeft=isAtLeft,wasAtRight=isAtRight,elem.trigger("jsp-arrow-change",[wasAtTop,wasAtBottom,wasAtLeft,wasAtRight])),updateHorizontalArrows(isAtLeft,isAtRight),pane.css("left",destLeft),elem.trigger("jsp-scroll-x",[-destLeft,isAtLeft,isAtRight]).trigger("scroll")}function updateVerticalArrows(isAtTop,isAtBottom){settings.showArrows&&(arrowUp[isAtTop?"addClass":"removeClass"]("jspDisabled"),arrowDown[isAtBottom?"addClass":"removeClass"]("jspDisabled"))}function updateHorizontalArrows(isAtLeft,isAtRight){settings.showArrows&&(arrowLeft[isAtLeft?"addClass":"removeClass"]("jspDisabled"),arrowRight[isAtRight?"addClass":"removeClass"]("jspDisabled"))}function scrollToY(destY,animate){var percentScrolled=destY/(contentHeight-paneHeight);positionDragY(percentScrolled*dragMaxY,animate)}function scrollToX(destX,animate){var percentScrolled=destX/(contentWidth-paneWidth);positionDragX(percentScrolled*dragMaxX,animate)}function scrollToElement(ele,stickToTop,animate){var e,eleHeight,eleWidth,viewportTop,viewportLeft,maxVisibleEleTop,maxVisibleEleLeft,destY,destX,eleTop=0,eleLeft=0;try{e=$(ele)}catch(err){return}for(eleHeight=e.outerHeight(),eleWidth=e.outerWidth(),container.scrollTop(0),container.scrollLeft(0);!e.is(".jspPane");)if(eleTop+=e.position().top,eleLeft+=e.position().left,e=e.offsetParent(),/^body|html$/i.test(e[0].nodeName))return;viewportTop=contentPositionY(),maxVisibleEleTop=viewportTop+paneHeight,eleTop<viewportTop||stickToTop?destY=eleTop-settings.verticalGutter:eleTop+eleHeight>maxVisibleEleTop&&(destY=eleTop-paneHeight+eleHeight+settings.verticalGutter),destY&&scrollToY(destY,animate),viewportLeft=contentPositionX(),maxVisibleEleLeft=viewportLeft+paneWidth,eleLeft<viewportLeft||stickToTop?destX=eleLeft-settings.horizontalGutter:eleLeft+eleWidth>maxVisibleEleLeft&&(destX=eleLeft-paneWidth+eleWidth+settings.horizontalGutter),destX&&scrollToX(destX,animate)}function contentPositionX(){return-pane.position().left}function contentPositionY(){return-pane.position().top}function isCloseToBottom(){var scrollableHeight=contentHeight-paneHeight;return scrollableHeight>20&&scrollableHeight-contentPositionY()<10}function isCloseToRight(){var scrollableWidth=contentWidth-paneWidth;return scrollableWidth>20&&scrollableWidth-contentPositionX()<10}function initMousewheel(){container.unbind(mwEvent).bind(mwEvent,function(event,delta,deltaX,deltaY){var dX=horizontalDragPosition,dY=verticalDragPosition;return jsp.scrollBy(deltaX*settings.mouseWheelSpeed,-deltaY*settings.mouseWheelSpeed,!1),dX==horizontalDragPosition&&dY==verticalDragPosition})}function removeMousewheel(){container.unbind(mwEvent)}function nil(){return!1}function initFocusHandler(){pane.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(e){scrollToElement(e.target,!1)})}function removeFocusHandler(){pane.find(":input,a").unbind("focus.jsp")}function initKeyboardNav(){function keyDownHandler(){var dX=horizontalDragPosition,dY=verticalDragPosition;switch(keyDown){case 40:jsp.scrollByY(settings.keyboardSpeed,!1);break;case 38:jsp.scrollByY(-settings.keyboardSpeed,!1);break;case 34:case 32:jsp.scrollByY(paneHeight*settings.scrollPagePercent,!1);break;case 33:jsp.scrollByY(-paneHeight*settings.scrollPagePercent,!1);break;case 39:jsp.scrollByX(settings.keyboardSpeed,!1);break;case 37:jsp.scrollByX(-settings.keyboardSpeed,!1)}return elementHasScrolled=dX!=horizontalDragPosition||dY!=verticalDragPosition}var keyDown,elementHasScrolled,validParents=[];isScrollableH&&validParents.push(horizontalBar[0]),isScrollableV&&validParents.push(verticalBar[0]),pane.focus(function(){elem.focus()}),elem.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(e){if(e.target===this||validParents.length&&$(e.target).closest(validParents).length){var dX=horizontalDragPosition,dY=verticalDragPosition;switch(e.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:keyDown=e.keyCode,keyDownHandler();break;case 35:scrollToY(contentHeight-paneHeight),keyDown=null;break;case 36:scrollToY(0),keyDown=null}return elementHasScrolled=e.keyCode==keyDown&&dX!=horizontalDragPosition||dY!=verticalDragPosition,!elementHasScrolled}}).bind("keypress.jsp",function(e){return e.keyCode==keyDown&&keyDownHandler(),!elementHasScrolled}),settings.hideFocus?(elem.css("outline","none"),"hideFocus"in container[0]&&elem.attr("hideFocus",!0)):(elem.css("outline",""),"hideFocus"in container[0]&&elem.attr("hideFocus",!1))}function removeKeyboardNav(){elem.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function observeHash(){if(location.hash&&location.hash.length>1){var e,retryInt,hash=escape(location.hash.substr(1));try{e=$("#"+hash+', a[name="'+hash+'"]')}catch(err){return}e.length&&pane.find(hash)&&(0===container.scrollTop()?retryInt=setInterval(function(){container.scrollTop()>0&&(scrollToElement(e,!0),$(document).scrollTop(container.position().top),clearInterval(retryInt))},50):(scrollToElement(e,!0),$(document).scrollTop(container.position().top)))}}function hijackInternalLinks(){$(document.body).data("jspHijack")||($(document.body).data("jspHijack",!0),$(document.body).delegate("a[href*=#]","click",function(event){var hash,element,container,jsp,scrollTop,elementTop,href=this.href.substr(0,this.href.indexOf("#")),locationHref=location.href;if(location.href.indexOf("#")!==-1&&(locationHref=location.href.substr(0,location.href.indexOf("#"))),href===locationHref){hash=escape(this.href.substr(this.href.indexOf("#")+1));try{element=$("#"+hash+', a[name="'+hash+'"]')}catch(e){return}element.length&&(container=element.closest(".jspScrollable"),jsp=container.data("jsp"),jsp.scrollToElement(element,!0),container[0].scrollIntoView&&(scrollTop=$(window).scrollTop(),elementTop=element.offset().top,(elementTop<scrollTop||elementTop>scrollTop+$(window).height())&&container[0].scrollIntoView()),event.preventDefault())}}))}function initTouch(){var startX,startY,touchStartX,touchStartY,moved,moving=!1;container.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(e){var touch=e.originalEvent.touches[0];startX=contentPositionX(),startY=contentPositionY(),touchStartX=touch.pageX,touchStartY=touch.pageY,moved=!1,moving=!0}).bind("touchmove.jsp",function(ev){if(moving){var touchPos=ev.originalEvent.touches[0],dX=horizontalDragPosition,dY=verticalDragPosition;return jsp.scrollTo(startX+touchStartX-touchPos.pageX,startY+touchStartY-touchPos.pageY),moved=moved||Math.abs(touchStartX-touchPos.pageX)>5||Math.abs(touchStartY-touchPos.pageY)>5,dX==horizontalDragPosition&&dY==verticalDragPosition}}).bind("touchend.jsp",function(e){moving=!1}).bind("click.jsp-touchclick",function(e){if(moved)return moved=!1,!1})}function destroy(){var currentY=contentPositionY(),currentX=contentPositionX();elem.removeClass("jspScrollable").unbind(".jsp"),elem.replaceWith(originalElement.append(pane.children())),originalElement.scrollTop(currentY),originalElement.scrollLeft(currentX),reinitialiseInterval&&clearInterval(reinitialiseInterval)}var settings,pane,paneWidth,paneHeight,container,contentWidth,contentHeight,percentInViewH,percentInViewV,isScrollableV,isScrollableH,verticalDrag,dragMaxY,verticalDragPosition,horizontalDrag,dragMaxX,horizontalDragPosition,verticalBar,verticalTrack,scrollbarWidth,verticalTrackHeight,verticalDragHeight,arrowUp,arrowDown,horizontalBar,horizontalTrack,horizontalTrackWidth,horizontalDragWidth,arrowLeft,arrowRight,reinitialiseInterval,originalPadding,originalPaddingTotalWidth,previousContentWidth,jsp=this,wasAtTop=!0,wasAtLeft=!0,wasAtBottom=!1,wasAtRight=!1,originalElement=elem.clone(!1,!1).empty(),mwEvent=$.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";originalPadding=elem.css("paddingTop")+" "+elem.css("paddingRight")+" "+elem.css("paddingBottom")+" "+elem.css("paddingLeft"),originalPaddingTotalWidth=(parseInt(elem.css("paddingLeft"),10)||0)+(parseInt(elem.css("paddingRight"),10)||0),$.extend(jsp,{reinitialise:function(s){s=$.extend({},settings,s),initialise(s)},scrollToElement:function(ele,stickToTop,animate){scrollToElement(ele,stickToTop,animate)},scrollTo:function(destX,destY,animate){scrollToX(destX,animate),scrollToY(destY,animate)},scrollToX:function(destX,animate){scrollToX(destX,animate)},scrollToY:function(destY,animate){scrollToY(destY,animate)},scrollToPercentX:function(destPercentX,animate){scrollToX(destPercentX*(contentWidth-paneWidth),animate)},scrollToPercentY:function(destPercentY,animate){scrollToY(destPercentY*(contentHeight-paneHeight),animate)},scrollBy:function(deltaX,deltaY,animate){jsp.scrollByX(deltaX,animate),jsp.scrollByY(deltaY,animate)},scrollByX:function(deltaX,animate){var destX=contentPositionX()+Math[deltaX<0?"floor":"ceil"](deltaX),percentScrolled=destX/(contentWidth-paneWidth);positionDragX(percentScrolled*dragMaxX,animate)},scrollByY:function(deltaY,animate){var destY=contentPositionY()+Math[deltaY<0?"floor":"ceil"](deltaY),percentScrolled=destY/(contentHeight-paneHeight);positionDragY(percentScrolled*dragMaxY,animate)},positionDragX:function(x,animate){positionDragX(x,animate)},positionDragY:function(y,animate){positionDragY(y,animate)},animate:function(ele,prop,value,stepCallback){var params={};params[prop]=value,ele.animate(params,{duration:settings.animateDuration,easing:settings.animateEase,queue:!1,step:stepCallback})},getContentPositionX:function(){return contentPositionX()},getContentPositionY:function(){return contentPositionY()},getContentWidth:function(){return contentWidth},getContentHeight:function(){return contentHeight},getPercentScrolledX:function(){return contentPositionX()/(contentWidth-paneWidth)},getPercentScrolledY:function(){return contentPositionY()/(contentHeight-paneHeight)},getIsScrollableH:function(){return isScrollableH},getIsScrollableV:function(){return isScrollableV},getContentPane:function(){return pane},scrollToBottom:function(animate){positionDragY(dragMaxY,animate)},hijackInternalLinks:$.noop,destroy:function(){destroy()}}),initialise(s)}return settings=$.extend({},$.fn.jScrollPane.defaults,settings),$.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){settings[this]=settings[this]||settings.speed}),this.each(function(){var elem=$(this),jspApi=elem.data("jsp");jspApi?jspApi.reinitialise(settings):($("script",elem).filter('[type="text/javascript"], :not([type])').remove(),jspApi=new JScrollPane(elem,settings),elem.data("jsp",jspApi))})},$.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:30,verticalDragMaxHeight:99999,horizontalDragMinWidth:30,horizontalDragMaxWidth:99999,contentWidth:void 0,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}}(jQuery),function($){$.fn.dnnSettingDropdown=function(){var clicked=function(){$(this).hasClass("dnnButtonDropdown")&&($(this).removeClass("dnnButtonDropdown").addClass("dnnButtonDropdown-clicked"),$(this).next().show())},hideDropdown=function(){var btn=$(this).children(":first");btn.hasClass("dnnButtonDropdown-clicked")&&(btn.removeClass("dnnButtonDropdown-clicked").addClass("dnnButtonDropdown"),btn.next().fadeOut())},hoverConfig={over:function(){},out:hideDropdown,timout:600};return $(this).each(function(){$(this).unbind("click",clicked).bind("click",clicked),$(this).parent().hoverIntent(hoverConfig)})}}(jQuery),function($){$.fn.onEnter=function(fn){return this.each(function(){var $this=$(this);$this.bind("onEnter",fn),$this.keydown(function(e){(e.which&&13===e.which||e.keyCode&&13===e.keyCode)&&(e.preventDefault(),e.stopPropagation(),$this.trigger("onEnter"))})})}}(jQuery),function($){$.extend({onAjaxError:function(jqXhr,textStatus,errorThrown){var title,text;if(jqXhr&&401===jqXhr.status)return void dnnModal.show("../Login.aspx?popUp=true",!0,300,650,!0,"");if(jqXhr&&jqXhr.responseText&&jqXhr.statusText)try{title=jqXhr.statusText+" ("+jqXhr.status+")",text=JSON.parse(jqXhr.responseText).Message}catch(e){text=errorThrown}$.dnnAlert({title:title||"Error",text:text||"Unknown error"})}})}(jQuery),function($){$.fn.dnnSliderInput=function(options){var sliderOptions=$.extend({},$.fn.dnnSliderInput.defaults,options);return $(this).each(function(){var $this=$(this),value=$this.val(),$slider=$('<div class="dnnSliderInput"></div>');$this.hide().after($slider),$slider.slider(sliderOptions),$slider.slider("value",value);var $tooltip=$('<span class="dnnTooltip"><span class="dnnFormHelpContent dnnClear"><span class="dnnHelpText bottomArrow"></span></span></span>'),calcTooltipPosition=function(){setTimeout(function(){var left=$slider.find(".ui-slider-handle")[0].style.left;$tooltip.css("left",left)},0)};$tooltip.find(".dnnHelpText").html(value),$tooltip.data("initialized",!0),$slider.append($tooltip),calcTooltipPosition(),$slider.on("slide",function(event,ui){$tooltip.find(".dnnHelpText").html(ui.value),$this.val(ui.value),calcTooltipPosition()})})},$.fn.dnnSliderInput.defaults={min:0,max:100,step:1}}(jQuery),function($){var inputFocusFix=function(){var errorMsg=$(this).next();errorMsg.hasClass("dnnFormError")&&errorMsg.hide()},throttle=null,dnnInitCustomisedCtrls=function(){null!=throttle&&(clearTimeout(throttle),throttle=null),throttle=setTimeout(function(){$('.dnnForm input[type="checkbox"]').dnnCheckbox(),$('.dnnForm input[type="radio"]').dnnCheckbox({cls:"dnnRadiobutton"}),$(".dnnTooltip").dnnTooltip(),$('.dnnForm input[type="text"], .dnnForm input[type="password"]').unbind("focus",inputFocusFix).bind("focus",inputFocusFix),$(".dnnForm :file").dnnFileInput(),$(".dnnForm input[data-default]").dnnPlaceholder()},200),$("*[onclick*='return confirm']").each(function(){var instance=$(this),isButton="img"==this.nodeName.toLowerCase()||"input"==this.nodeName.toLowerCase(),script=/return confirm\((['"])([\s\S]*?)\1\)/g.exec(instance.attr("onclick"));if(null!=script){var confirmContent=script[2].split("\\"+script[1]).join(script[1]);instance.attr("onclick",instance.attr("onclick").replace(script[0],"void(0)")).dnnConfirm({text:confirmContent,isButton:isButton})}})},saveRgDataDivScrollTop=function(){window.__rgDataDivScrollTopPersistArray=[],$(".rgDataDiv").each(function(){var $this=$(this),ele=$this.get(0);if(ele.scrollPane){var api=ele.scrollPane.data("jsp"),y=api.getContentPositionY();window.__rgDataDivScrollTopPersistArray.push(y)}})};window.__rgDataDivScrollTopPersistArray=[],$(document).ajaxComplete(dnnInitCustomisedCtrls),Sys.WebForms.PageRequestManager.getInstance().add_beginRequest(saveRgDataDivScrollTop),Sys.WebForms.PageRequestManager.getInstance().add_endRequest(dnnInitCustomisedCtrls),$(dnnInitCustomisedCtrls)}(jQuery);