DotNetNuke.UI.WebControls.Widgets.StyleSheetWidget=function(widget){DotNetNuke.UI.WebControls.Widgets.StyleSheetWidget.initializeBase(this,[widget])},DotNetNuke.UI.WebControls.Widgets.StyleSheetWidget.activateStyleSheet=function(object,widgetId,widgetStyleSheetCategory,widgetStyleSheetName,widgetStyleSheetId){for(var div=$get(widgetId),elements=div.childNodes,w=0;w<elements.length;w++)try{if(elements[w].id.indexOf(widgetStyleSheetCategory)<0)continue;elements[w].className="UnselectedWidget"}catch(e){}object.className="SelectedWidget";var cookieName="StyleSheetWidget_"+widgetId;DotNetNuke.UI.WebControls.Utility.setCookie(cookieName,widgetStyleSheetName,30,"/");var links=(document.getElementsByTagName("head")[0],document.getElementsByTagName("link"));if(links.length>0)for(var l=0;l<links.length;l++){var link=links[l];if(link.getAttribute("title")){var styleSheetTitle=link.getAttribute("title");0==styleSheetTitle.indexOf(widgetStyleSheetCategory)&&(styleSheetTitle==widgetStyleSheetId?link.disabled=!1:link.disabled=!0)}}},DotNetNuke.UI.WebControls.Widgets.StyleSheetWidget.prototype={render:function(){var widgetHtml="",head=document.getElementsByTagName("head")[0],params=this._widget.childNodes,defaultValue="",firstValue="";cookieName="StyleSheetWidget_"+this._widget.id;for(var cookieValue=DotNetNuke.UI.WebControls.Utility.getCookie(cookieName),category=this._widget.id,template="",baseUrl="",selectedCssClass="StyleSheetWidget-Selected",cssClass="StyleSheetWidget",styleSheetList="",firstValue="",paramCounter=0,p=0;p<params.length;p++)try{switch(params[p].name.toLowerCase()){case"template":template=params[p].value;break;case"default":defaultValue=params[p].value;break;case"baseurl":baseUrl=params[p].value;break;case"cssclass":cssClass=params[p].value;break;case"selectedcssclass":selectedCssClass=params[p].value;break;default:0==paramCounter&&(firstValue=params[p].value),styleSheetList+=params[p].value+";",paramCounter++}}catch(e){continue}""==template&&(template='<a href="javascript:void(0)" {CLASS} {ID}>{TEXT}</a> '),"/"!=baseUrl.substring(baseUrl.length-1,1)&&(baseUrl+="/"),""!=cookieValue&&styleSheetList.indexOf(cookieValue+";")>-1?defaultValue=cookieValue:styleSheetList.indexOf(defaultValue+";")<0&&(defaultValue=firstValue);for(var clickEvent="",p=0;p<params.length;p++){param=params[p],tag="",name="",paramValue="";try{tag=param.tagName.toLowerCase(),name=param.name,paramValue=param.value}catch(e){continue}var lcName=name.toLowerCase(),lcValue=paramValue.toLowerCase();if("param"==tag&&"default"!=lcName&&"template"!=lcName&&"baseurl"!=lcName&&"cssclass"!=lcName&&"selectedcssclass"!=lcName){var cleanParam=lcValue.replace(/ /g,"-");cleanParam=cleanParam.replace(/\//g,"_");var styleSheetUrl=(baseUrl+lcValue+".css").replace(/\/\//,"/"),widgetClass=defaultValue==lcValue?"SelectedWidget":"UnselectedWidget",widgetId=category+"_"+cleanParam,widgetEvent="DotNetNuke.UI.WebControls.Widgets.StyleSheetWidget.activateStyleSheet(this, '"+this.getWidget().id+"', '"+category+"', '"+paramValue+"','"+widgetId+"')",html=template.replace(/\{CLASS\}/gi,' class="'+widgetClass+'"');html=html.replace(/\{ID\}/gi,' id="'+widgetId+'" onclick="'+widgetEvent+'"'),html=html.replace(/\{TEXT\}/gi,param.name),widgetHtml+=html;var newStyleSheet=document.createElement("link");newStyleSheet.rel="alternate stylesheet",newStyleSheet.type="text/css",newStyleSheet.title=widgetId,newStyleSheet.href=styleSheetUrl,newStyleSheet.disabled=!0,head.appendChild(newStyleSheet),paramValue==defaultValue&&(clickEvent=widgetEvent.replace("this","$get('"+widgetId+"')"))}}var div=document.createElement("div");div.innerHTML=widgetHtml,DotNetNuke.UI.WebControls.Widgets.StyleSheetWidget.callBaseMethod(this,"render",[div]),""!=clickEvent&&eval(clickEvent)}},DotNetNuke.UI.WebControls.Widgets.StyleSheetWidget.inheritsFrom(DotNetNuke.UI.WebControls.Widgets.BaseWidget),DotNetNuke.UI.WebControls.Widgets.StyleSheetWidget.registerClass("DotNetNuke.UI.WebControls.Widgets.StyleSheetWidget",DotNetNuke.UI.WebControls.Widgets.BaseWidget),DotNetNuke.UI.WebControls.Widgets.renderWidgetType("DotNetNuke.UI.WebControls.Widgets.StyleSheetWidget");