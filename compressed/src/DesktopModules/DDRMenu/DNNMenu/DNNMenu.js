DDR.Menu.Providers.DNNMenu||DDRjQuery(function($){DDR.Menu.Providers.DNNMenu=function(jqContainer,dnnNavParams){var me=this;me.baseConstructor(jqContainer,dnnNavParams)},DDR.Menu.Providers.DNNMenu.prototype=new DDR.Menu.Providers.BaseRenderer,DDR.Menu.Providers.DNNMenu.prototype.createRootMenu=function(){var me=this,outerContainer=$("<span />"),dnnNavContainer=me.createRenderedMenu(me.rootMenu);dnnNavContainer.addClass(me.dnnNavParams.CSSControl),outerContainer.append(dnnNavContainer),me.subMenus.each(function(m){dnnNavContainer.append(me.createRenderedMenu(m))}),me.jqContainer.replaceWith(outerContainer),me.jqContainer.show(1),me.jqContainer.queue(function(){me.addCovering(),me.prepareHideAndShow(),$(this).dequeue()})},DDR.Menu.Providers.DNNMenu.prototype.createRenderedMenu=function(menu){var me=this,level=menu.level,childItems=menu.childItems;if(0==level){menu.flyout=!1,menu.layout=me.orientHorizontal?"horizontal":"vertical";var result=$("<span />");childItems.each(function(i){result.append(me.createRenderedItem(i))})}else{menu.flyout=!0,menu.layout="vertical";var parentItem=menu.parentItem,result=(parentItem.parentMenu,$("<div><table cellspacing='0' cellpadding='0' border='0' /></div>").css({position:"absolute",left:"-1000px"})),table=result.children("table");table.addClass(this.dnnNavParams.CSSContainerSub),table.addClass("m"),table.addClass("m"+(menu.level-1)),table.addClass("mid"+menu.id),childItems.each(function(i){table.append(me.createRenderedItem(i))})}return menu.rendered=result,result},DDR.Menu.Providers.DNNMenu.prototype.createRenderedItem=function(item){var result,me=this,level=item.level,title=item.title,image=item.image,href=item.href;item.separator;if(0==level){result=$(me.orientHorizontal?"<span><span /><span /></span>":"<div><span /><span /></div>");var spanImg=result.children("span:eq(0)"),spanText=result.children("span:eq(1)");result.addClass("root"),href&&!item.isSeparator&&(item.coveringHere=function(){return item.rendered}),spanImg.addClass("icn"),image&&spanImg.append($("<img />").attr("src",image)),spanText.addClass("txt"),spanText.css("cursor","pointer").text(title);var nodeLeftHTML=me.dnnNavParams.NodeLeftHTMLRoot||"",nodeRightHTML=me.dnnNavParams.NodeRightHTMLRoot||"",separatorLeftHTML=me.dnnNavParams.SeparatorLeftHTML||"",separatorRightHTML=me.dnnNavParams.SeparatorRightHTML||"",cssClass=this.dnnNavParams.CSSNodeRoot;item.isBreadcrumb&&(""!=(me.dnnNavParams.CSSBreadCrumbRoot||"")&&(cssClass=me.dnnNavParams.CSSBreadCrumbRoot),nodeLeftHTML=me.dnnNavParams.NodeLeftHTMLBreadCrumbRoot||nodeLeftHTML,nodeRightHTML=me.dnnNavParams.NodeRightHTMLBreadCrumbRoot||nodeRightHTML,separatorLeftHTML=me.dnnNavParams.SeparatorLeftHTMLBreadCrumb||separatorLeftHTML,separatorRightHTML=me.dnnNavParams.SeparatorRightHTMLBreadCrumb||separatorRightHTML),item.isSelected&&(""!=(me.dnnNavParams.CSSNodeSelectedRoot||"")&&(cssClass=me.dnnNavParams.CSSNodeSelectedRoot),separatorLeftHTML=me.dnnNavParams.SeparatorLeftHTMLActive||separatorLeftHTML,separatorRightHTML=me.dnnNavParams.SeparatorRightHTMLActive||separatorRightHTML),result.addClass(cssClass),item.first||(separatorLeftHTML=(me.dnnNavParams.SeparatorHTML||"")+separatorLeftHTML),separatorLeftHTML+=nodeLeftHTML,separatorRightHTML=nodeRightHTML+separatorRightHTML,""!=separatorLeftHTML&&result.prepend($("<span />").append(separatorLeftHTML)),""!=separatorRightHTML&&result.append($("<span />").append(separatorRightHTML)),item.childMenu&&me.dnnNavParams.IndicateChildren&&result.css({"background-image":"url("+me.dnnNavParams.PathSystemImage+me.dnnNavParams.IndicateChildImageRoot+")","background-repeat":"no-repeat","background-position":"right"})}else{result=$("<tr><td style='position:relative'><span /></td><td style='position:relative'><span /></td><td style='position:relative'/></tr>");var tdImg=result.find("td:eq(0)"),spanImg=result.find("span:eq(0)"),spanText=result.find("span:eq(1)"),tdArrow=result.find("td:eq(2)");href&&(item.coveringHere=function(){return item.rendered.find("td")}),tdImg.addClass("icn"),image&&spanImg.append($("<img />").attr("src",image)),spanText.addClass("txt"),item.isSeparator||spanText.text(title),spanText.css("white-space","nowrap"),item.childMenu&&me.dnnNavParams.IndicateChildren&&tdArrow.append($("<img />").attr("src",me.dnnNavParams.PathSystemImage+me.dnnNavParams.IndicateChildImageSub)),tdImg.addClass(me.dnnNavParams.CSSIcon),tdArrow.addClass(me.dnnNavParams.CSSIndicateChildSub),result.css("cursor","pointer");var nodeLeftHTML=me.dnnNavParams.NodeLeftHTMLSub||"",nodeRightHTML=me.dnnNavParams.NodeRightHTMLSub||"",cssClass=me.dnnNavParams.CSSNode;item.isBreadcrumb&&(""!=(me.dnnNavParams.CSSBreadCrumbSub||"")&&(cssClass=me.dnnNavParams.CSSBreadCrumbSub),nodeLeftHTML=me.dnnNavParams.NodeLeftHTMLBreadCrumbSub||nodeLeftHTML,nodeRightHTML=me.dnnNavParams.NodeRightHTMLBreadCrumbSub||nodeRightHTML),item.isSelected&&""!=(me.dnnNavParams.CSSNodeSelectedSub||"")&&(cssClass=me.dnnNavParams.CSSNodeSelectedSub),item.isSeparator&&(cssClass=me.dnnNavParams.CSSBreak||""),result.addClass(cssClass),nodeLeftHTML&&tdImg.prepend($("<span />").append(nodeLeftHTML)),nodeRightHTML&&tdArrow.append($("<span />").append(nodeRightHTML))}return item.isSelected&&result.addClass("sel"),item.isBreadcrumb&&result.addClass("bc"),item.isSeparator&&result.addClass("break"),result.addClass("mi"),result.addClass("mi"+item.path),result.addClass("id"+item.id),item.first&&result.addClass("first"),item.last&&result.addClass("last"),item.first&&item.last&&result.addClass("firstlast"),item.rendered=result,result},DDR.Menu.Providers.DNNMenu.prototype.menuItemHover=function(item){var me=this;0==item.level?item.rendered.setHoverClass("hov "+(me.dnnNavParams.CSSNodeHoverRoot||me.dnnNavParams.CSSNodeHover||"")):item.rendered.setHoverClass("hov "+(me.dnnNavParams.CSSNodeHoverSub||me.dnnNavParams.CSSNodeHover||""))}});