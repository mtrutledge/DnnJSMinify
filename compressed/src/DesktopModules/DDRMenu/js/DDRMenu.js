window.DDR||(window.DDR={}),DDR.Menu||(DDR.Menu={}),DDR.Menu.Providers||(DDR.Menu.Providers={}),DDRjQuery(function($){DDR.Menu.Providers.BaseRenderer=function(){},DDR.Menu.Providers.BaseRenderer.prototype.baseConstructor=function(jqContainer,dnnNavParams){var me=this;me.jqContainer=jqContainer,me.dnnNavParams=dnnNavParams,me.menus=jqContainer.find("ul").toDDRObjectArray(),me.items=jqContainer.find("li").toDDRObjectArray(),me.subMenus=me.menus.filter(function(m){return m.level>0}),me.rootItems=me.items.filter(function(i){return 0==i.level}),me.jqRootMenu=jqContainer.children("ul"),me.rootMenu=me.jqRootMenu.toDDRObject(),me.clientID=jqContainer[0].id,me.showEffect=dnnNavParams.effect||"slide",me.showEffectOptions=eval("(function(){ return "+(dnnNavParams.effectOptions||"{}")+";})()"),me.showEffectSpeed=dnnNavParams.effectSpeed||200,me.orientHorizontal="Vertical"!=dnnNavParams.ControlOrientation,me.useShim=$.browser.msie&&dnnNavParams.shim},DDR.Menu.Providers.BaseRenderer.prototype.mapToRendered=function(jq){return $($.map(jq.get(),function(elt){return $(elt).ddrData().rendered.get(0)}))},DDR.Menu.Providers.BaseRenderer.prototype.addCovering=function(){var me=this,resizeCoverings=new Array,coveringBase=$("<a style='position:absolute;display:block;border:0;padding:0;margin:0;top:0;left:0;bottom:0;right:0;text-decoration:none'><span style='visibility:hidden'/></a>").css("background",$.browser.msie?"url("+me.dnnNavParams.PathSystemImage+"spacer.gif)":"transparent"),overrideDimensions=$.browser.msie&&$.browser.version.startsWith("6.")||!$.support.boxModel;me.menus.each(function(m){m.coverings=new Array,m.childItems.each(function(i){if(i.coveringHere){var itemText=i.rendered.text();i.coveringHere().each(function(){var coveringHere=$(this);coveringHere.css("position","relative");var covering=coveringBase.clone();covering.attr("href",i.href||"javascript:void(0)").children("span").text(itemText),coveringHere.prepend(covering),covering=coveringHere.children("a:first");var parent=covering.offsetParent(),chElt=coveringHere[0];chElt===parent[0]||null===chElt.offsetParent?overrideDimensions&&covering.css({left:"",right:"",width:coveringHere.outerWidth(!1)+"px",height:coveringHere.outerHeight(!1)+"px"}):(chElt.moveCovering=!0,chElt.covering=covering,chElt.coveringHere=coveringHere,covering.css({width:"0",height:"0"}),coveringHere.bind("mouseenter",function(){m.coverings.each(function(chElt){if(chElt.moveCovering){var chOffset=chElt.coveringHere.offset();chElt.covering.css({top:"0",left:"0"});var cOffset=chElt.covering.offset();chElt.covering.css({top:chOffset.top-cOffset.top+"px",left:chOffset.left-cOffset.left+"px",width:chElt.coveringHere.outerWidth(!1)+"px",height:chElt.coveringHere.outerHeight(!1)+"px"}),chElt.moveCovering=!1}})}),m.coverings.push(chElt),resizeCoverings.push(chElt))})}})}),resizeCoverings.length>0&&$(window).resize(function(){resizeCoverings.each(function(c){c.covering.css({width:"0",height:"0"}),c.moveCovering=!0})})},DDR.Menu.Providers.BaseRenderer.prototype.prepareHideAndShow=function(){var me=this;me.hideAllMenus=me.menus.filter(function(m){return m.flyout}),me.setItemsHideAndShow(),me.attachEvents(),me.closeUp()},DDR.Menu.Providers.BaseRenderer.prototype.setItemsHideAndShow=function(){var me=this;me.items.each(function(i){var allParents=i.allParentMenus,allChildren=i.allChildMenus,childMenu=i.childMenu,hideThese=me.subMenus.filter(function(m){return m.flyout&&!(allParents.contains(m)||allChildren.contains(m))});i.hideThese=hideThese,i.showThese=new Array,childMenu&&childMenu.flyout&&(i.showThese[0]=childMenu)})},DDR.Menu.Providers.BaseRenderer.prototype.attachEvents=function(){var me=this;me.menus.each(function(menu){if(menu.flyout){var jqMenu=menu.rendered,menuElt=jqMenu[0];menuElt.hideMenu=function(){jqMenu.stop(!0,!0),"none"!=this.style.display&&(jqMenu.hide(),menu.shim&&menu.shim.hide())},menuElt.showMenu=function(instant){"none"==this.style.display&&(jqMenu.stop(!0,!0),menu.childItems.allRendered().stop(!0,!0).unbind("mouseenter mouseleave"),me.positionMenu(menu),instant||0==me.showEffectSpeed?jqMenu.show():"none"==me.showEffect?(jqMenu.queue(function(){setTimeout(function(){jqMenu.dequeue()},me.showEffectSpeed)}),jqMenu.show(1)):"fade"==me.showEffect?jqMenu.fadeIn(me.showEffectSpeed):("slide"==me.showEffect||"drop"==me.showEffect?me.showEffectOptions.direction=menu.slideDirection:me.showEffectOptions.direction=menu.blindDirection,jqMenu.show(me.showEffect,me.showEffectOptions,me.showEffectSpeed)),jqMenu.queue(function(){jqMenu.css("display","none").css("display","block"),menu.childItems.each(function(i){me.menuItemHover&&me.menuItemHover(i),i.rendered.hover(function(){i.hideThese.allRendered().each(function(){this.hideMenu()}),i.showThese.allRendered().each(function(){this.showMenu()})},function(){}),i.rendered.focus(function(){i.hideThese.allRendered().each(function(){this.hideMenu()}),i.showThese.allRendered().each(function(){this.showMenu(!0)})})}),$(this).dequeue()}))}}else menu.childItems.each(function(i){me.menuItemHover&&me.menuItemHover(i),i.rendered.hover(function(){i.hideThese.allRendered().each(function(){this.hideMenu()}),i.showThese.allRendered().each(function(){this.showMenu()})},function(){}),i.rendered.focus(function(){i.hideThese.allRendered().each(function(){this.hideMenu()}),i.showThese.allRendered().each(function(){this.showMenu(!0)})})});menu.rendered.mouseover(function(){me.timeoutID&&(window.clearTimeout(me.timeoutID),me.timeoutID=null)}),menu.rendered.mouseout(function(){me.timeoutID||(me.timeoutID=window.setTimeout(function(){me.closeUp()},400))}),menu.rendered.mouseover(function(){me.timeoutID&&(window.clearTimeout(me.timeoutID),me.timeoutID=null)}),menu.rendered.mouseout(function(){me.timeoutID||(me.timeoutID=window.setTimeout(function(){me.closeUp()},400))})})},DDR.Menu.Providers.BaseRenderer.prototype.positionMenu=function(menu){if(menu.childItems&&menu.childItems.length>0){var me=this,level=menu.level,parentMenu=menu.parentItem.parentMenu,parentItem=menu.parentItem,parentRendered=menu.layout.match(/,menu$/)?parentMenu.rendered:parentItem.rendered,r=menu.rendered,windowObj=$(window),windowLeft=windowObj.scrollLeft(),windowRight=windowLeft+windowObj.width(),windowTop=windowObj.scrollTop(),windowBottom=windowTop+windowObj.height(),prevDisplay=r.css("display");r.css({display:"block",width:"auto",height:"auto","overflow-x":"visible","overflow-y":"visible","z-index":1e4+3*level}),r.width(r.width()),r.height(r.height()),parentMenu.layout.match(/^horizontal/)?(menu.slideDirection="up",menu.blindDirection="vertical",r.alignElement(function(){return menu.childItems[0].rendered.getLeft(2)},parentRendered.getLeft(2),function(){return r.getTop(1)},parentRendered.getBottom(1)),r.getRight(3)>windowRight&&r.alignHorizontal(function(){return r.getRight(3)},windowRight),r.getBottom(3)>windowBottom&&(r.alignVertical(function(){return r.getBottom(1)},parentRendered.getTop(1)),menu.slideDirection="down"),r.getTop(3)<windowTop?(r.alignVertical(function(){return r.getTop(1)},parentRendered.getBottom(1)),r.css({height:windowBottom-r.getTop(4),"overflow-x":"visible","overflow-y":"scroll"}),r.getRight(3)>windowRight&&r.alignHorizontal(function(){return r.getRight(3)},windowRight),menu.slideDirection="up"):(r.alignElement(function(){return menu.childItems[0].rendered.getLeft(2)},parentRendered.getLeft(2),function(){return r.getTop(1)},parentRendered.getBottom(1)),r.getRight(3)>windowRight&&r.alignHorizontal(function(){return r.getRight(3)},windowRight),r.getBottom(3)>windowBottom&&(r.alignVertical(function(){return r.getBottom(1)},parentRendered.getTop(1)),menu.slideDirection="down"),r.getTop(3)<windowTop&&(r.alignVertical(function(){return r.getTop(1)},parentRendered.getBottom(1)),r.css({height:windowBottom-r.getTop(4),"overflow-x":"visible","overflow-y":"scroll"}),r.getRight(3)>windowRight&&r.alignHorizontal(function(){return r.getRight(3)},windowRight),menu.slideDirection="up"))):(menu.slideDirection="left",menu.blindDirection="horizontal",r.alignElement(function(){return r.getLeft(1)},parentRendered.getRight(1),function(){return menu.childItems[0].rendered.getTop(2)},parentRendered.getTop(2)),r.getBottom(3)>windowBottom&&r.alignVertical(function(){return r.getBottom(3)},windowBottom),r.getRight(3)>windowRight&&(r.alignHorizontal(function(){return r.getRight(1)},parentRendered.getLeft(1)),menu.slideDirection="right"),r.getLeft(3)<windowLeft&&(r.alignHorizontal(function(){return r.getLeft(1)},parentRendered.getRight(1)),menu.slideDirection="left")),me.useShim&&(menu.shim||(menu.shim=$("<iframe src='javascript:false' frameBorder='0' scrolling='no' />").css({position:"absolute","z-index":9999+3*level,"background-color":"transparent",filter:"progid:DXImageTransform.Microsoft.Alpha(style=0,opacity=0)"}).appendTo($(document.body))),menu.shim.css({top:r.css("top"),left:r.css("left"),width:r.outerWidth(!0)+"px",height:r.outerHeight(!0)+"px",display:"block"})),r.css("display",prevDisplay)}},DDR.Menu.Providers.BaseRenderer.prototype.closeUp=function(){var me=this;me.hideAllMenus.allRendered().each(function(){this.hideMenu()})},DDR.Menu.getCSS=function(elt,css){return parseFloat("0"+$.curCSS(elt,css,!0))},Array.prototype.each||(Array.prototype.each=function(fn){for(var n=0;n<this.length;n++)fn(this[n])}),Array.prototype.filter||(Array.prototype.filter=function(fn){for(var result=new Array,n=0;n<this.length;n++)fn(this[n])&&(result[result.length]=this[n]);return result}),Array.prototype.contains||(Array.prototype.contains=function(o){for(var n=0;n<this.length;n++)if(this[n]==o)return!0;return!1}),Array.prototype.allRendered||(Array.prototype.allRendered=function(){return $($.map(this,function(o){return o.rendered.get(0)}))}),$.fn.extend({getLeft:function(index){var o=this,result=o.offset().left,htmlThis=o[0];return 1==index&&(result-=DDR.Menu.getCSS(htmlThis,"marginLeft")),index>=3&&(result+=DDR.Menu.getCSS(htmlThis,"borderLeftWidth")),index>=4&&(result+=DDR.Menu.getCSS(htmlThis,"paddingLeft")),result},getTop:function(index){var o=this,result=o.offset().top,htmlThis=o[0];return 1==index&&(result-=DDR.Menu.getCSS(htmlThis,"marginTop")),index>=3&&(result+=DDR.Menu.getCSS(htmlThis,"borderTopWidth")),index>=4&&(result+=DDR.Menu.getCSS(htmlThis,"paddingTop")),result},getRight:function(index){var result=this.getLeft(4)+this.width(),htmlThis=this[0];return index<4&&(result+=DDR.Menu.getCSS(htmlThis,"paddingRight")),index<3&&(result+=DDR.Menu.getCSS(htmlThis,"borderRightWidth")),index<2&&(result+=DDR.Menu.getCSS(htmlThis,"marginRight")),result},getBottom:function(index){var result=this.getTop(4)+this.height(),htmlThis=this[0];return index<4&&(result+=DDR.Menu.getCSS(htmlThis,"paddingBottom")),index<3&&(result+=DDR.Menu.getCSS(htmlThis,"borderBottomWidth")),index<2&&(result+=DDR.Menu.getCSS(htmlThis,"marginBottom")),result},alignElement:function(horizontalFn,horizontalVal,verticalFn,verticalVal){return this.each(function(){var jqThis=$(this),prevDisplay=jqThis.css("display");jqThis.css({left:"-999px",top:"-999px",position:"absolute",display:"block"}),horizontalVal-=999+horizontalFn(),verticalVal-=999+verticalFn(),"block"!=prevDisplay&&jqThis.css("display",prevDisplay),jqThis.css({left:horizontalVal+"px",top:verticalVal+"px"})})},alignHorizontal:function(horizontalFn,horizontalVal){return this.each(function(){var jqThis=$(this),prevDisplay=jqThis.css("display");jqThis.css({left:"-999px",position:"absolute",display:"block"}),horizontalVal-=999+horizontalFn(),"block"!=prevDisplay&&jqThis.css("display",prevDisplay),jqThis.css({left:horizontalVal+"px"})})},alignVertical:function(verticalFn,verticalVal){return this.each(function(){var jqThis=$(this),prevDisplay=jqThis.css("display");jqThis.css({top:"-999px",position:"absolute",display:"block"}),verticalVal-=999+verticalFn(),"block"!=prevDisplay&&jqThis.css("display",prevDisplay),jqThis.css({top:verticalVal+"px"})})},sizeElement:function(horizontalFn,horizontalVal,verticalFn,verticalVal){return this.each(function(){var jqThis=$(this),prevDisplay=jqThis.css("display");jqThis.css({width:"9999px",height:"9999px",display:"block"}),horizontalVal+=9999-horizontalFn(),verticalVal+=9999-verticalFn(),"block"!=prevDisplay&&jqThis.css("display",prevDisplay),jqThis.css({width:horizontalVal+"px",height:verticalVal+"px"})})},setContentWidth:function(width){return this.each(function(){var jqThis=$(this);jqThis.width($.support.boxModel?width:width+jqThis.fullWidth()-jqThis.width())})},setContentHeight:function(height){return this.each(function(){var jqThis=$(this);jqThis.height($.support.boxModel?height:height+jqThis.fullHeight()-jqThis.height())})},setFullWidth:function(width){return this.each(function(){var jqThis=$(this),delta=jqThis.width()-jqThis.fullWidth();jqThis.width(width+delta);for(var n=0;n<100;n++){var curWidth=jqThis.fullWidth();if(curWidth==width)return;delta+=width-curWidth,jqThis.width(width+delta)}})},setFullHeight:function(height){return this.each(function(){var jqThis=$(this),delta=jqThis.height()-jqThis.fullHeight();jqThis.height(height+delta);for(var n=0;n<100;n++){var curHeight=jqThis.fullHeight();if(curHeight==height)return;delta+=height-curHeight,jqThis.height(height+delta)}})},fullWidth:function(){var result=0;return this.each(function(){var max=$(this).outerWidth(!0);max>result&&(result=max)}),result},fullHeight:function(){var result=0;return this.each(function(){var max=$(this).outerHeight(!0);max>result&&(result=max)}),result},totalWidth:function(){var result=0;return this.each(function(){result+=$(this).outerWidth(!0)}),result},totalHeight:function(){var result=0;return this.each(function(){result+=$(this).outerHeight(!0)}),result},matchWidths:function(){return this.setFullWidth(this.fullWidth())},matchHeights:function(){return this.setFullHeight(this.fullHeight())},lineUpHorizontal:function(columns){var firstElt=$(this[0]),left0=left=firstElt.getLeft(1),top=firstElt.getTop(2),column=0;return this.each(function(){var jqThis=$(this);jqThis.alignElement(function(){return jqThis.getLeft(1)},left,function(){return jqThis.getTop(2)},top),left+=jqThis.fullWidth(),column++,column==columns&&(column=0,left=left0,top+=jqThis.fullHeight())})},lineUpVertical:function(){var firstElt=$(this[0]),left=firstElt.getLeft(2),top=firstElt.getTop(1);return this.each(function(){var jqThis=$(this);jqThis.alignElement(function(){return jqThis.getLeft(2)},left,function(){return jqThis.getTop(1)},top),top+=jqThis.fullHeight()})},fitToContent:function(){return this.each(function(){var maxRight=-999999,maxBottom=-999999,jqThis=$(this),prevDisplay=jqThis.css("display");jqThis.css({display:"block"}),jqThis.children().each(function(){var jqThis=$(this),right=jqThis.getRight(1),bottom=jqThis.getBottom(1);right>maxRight&&(maxRight=right),bottom>maxBottom&&(maxBottom=bottom)}),jqThis.sizeElement(function(){return jqThis.getRight(4)},maxRight,function(){return jqThis.getBottom(4)},maxBottom),"block"!=prevDisplay&&jqThis.css("display",prevDisplay)})},stretchBlockHyperlinks:function(){this.find("a").each(function(){var jqThis=$(this);"block"==jqThis.css("display")&&(jqThis.setFullWidth(jqThis.parent().width()),jqThis.setFullHeight(jqThis.parent().height()))})},setHoverClass:function(cssClass,alter,prevClass){return this.each(function(){if(cssClass){var jqThis=$(this),jqAlter=alter||jqThis;jqThis.hover(function(){jqAlter.each(function(){this.hoverClass||(this.hoverClass=this.className)}),jqAlter.addClass(cssClass),prevClass&&jqAlter.removeClass(prevClass)},function(){jqAlter.each(function(){this.hoverClass&&(this.className=this.hoverClass)})})}})},ddrData:function(){return this.data("ddrData")||this.data("ddrData",{}),this.data("ddrData")},setMenuData:function(level,parentItem){return this.each(function(){var jqThis=$(this),childItems=jqThis.children("li"),id=jqThis.attr("nid"),path="";null!=parentItem&&(path=parentItem.data("ddrData").path+"-"),jqThis.data("ddrData",{isMenu:!0,id:id,level:level,path:path,childItems:childItems,parentItem:parentItem,rendered:jqThis,itemIndex:0}),childItems.setItemData(level,jqThis),childItems.length>0&&(jqThis.children("li:first").ddrData().first=!0,jqThis.children("li:last").ddrData().last=!0)})},setItemData:function(level,parentMenu){this.each(function(){var jqThis=$(this),childMenu=jqThis.children("ul"),allChildMenus=jqThis.find("ul"),allParentMenus=jqThis.parents("ul"),jqLink=jqThis.children("a"),jqParent=jqLink.length?jqLink:jqThis,jqImage=jqParent.children("img"),jqText=jqParent.children("span"),id=jqThis.attr("nid"),path=parentMenu.data("ddrData").path+parentMenu.data("ddrData").itemIndex++;jqThis.data("ddrData",{isItem:!0,id:id,level:level,path:path,first:!1,last:!1,href:jqLink.attr("href"),image:jqImage.attr("src"),title:jqText.text(),isBreadcrumb:jqThis.hasClass("breadcrumb"),isSelected:jqThis.hasClass("selected"),isSeparator:jqThis.hasClass("separator"),childMenu:childMenu,parentMenu:parentMenu,allChildMenus:allChildMenus,allParentMenus:allParentMenus,rendered:jqThis}),childMenu.setMenuData(level+1,jqThis)})},toDDRObject:function(){if(this.data("ddrObject"))return this.data("ddrObject");var data=this.ddrData(),result={};this.data("ddrObject",result);var n=0;for(var member in data)"rendered"!=member&&data[member]&&data[member].jquery?"s"==member.substr(member.length-1)?result[member]=data[member].toDDRObjectArray():0==data[member].length?result[member]=null:result[member]=data[member].toDDRObject():result[member]=data[member],n++;return result},toDDRObjectArray:function(){return $.map(this,function(elt){return $(elt).toDDRObject()})}}),DDR.Menu.createTable=function(){return $("<table />").attr("cellpadding",0).attr("cellspacing",0).attr("border",0)},DDR.Menu.addTableCell=function(table,tdContents){var tr=table.find("tr:first");0==tr.length&&table.append(tr=$("<tr />"));var result=$("<td />").css({padding:0,margin:0}).append(tdContents);return tr.append(result),result},DDR.Menu.setTableColumns=function(table,columns){var tbody=table.children("tbody");0==tbody.length&&(tbody=table);var trs=tbody.children("tr"),tds=trs.children("td"),tr=$("<tr />");tbody.append(tr),tds.each(function(){var td=$(this);tr.append(td),tr.children("td").length==columns&&(tr=$("<tr />"),tbody.append(tr))}),0==tr.children("td").length&&tr.remove(),trs.remove()}}),DDR.Menu.registerMenu=function(clientID,dnnNavParams){document.write("<style type='text/css'>\t#"+clientID+" {\t\tdisplay: none;\t}</style>"),DDRjQuery(function($){var jqContainer=$("#"+clientID),rootMenu=jqContainer.children("ul");for(jqContainer.hide();0==rootMenu.children("li").length&&rootMenu.children().length>0;)rootMenu.html(rootMenu.children().html());rootMenu.children().length>0&&(rootMenu.setMenuData(0,null),new DDR.Menu.Providers[dnnNavParams.MenuStyle](jqContainer,dnnNavParams).createRootMenu(),jqContainer.css({display:"block"}))})};