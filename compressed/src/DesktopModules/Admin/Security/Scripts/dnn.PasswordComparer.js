"undefined"!=typeof dnn&&null!==dnn||(dnn={}),function($,window,document,undefined){"use strict";var pluginName="inputComparer",InputComparer=this.InputComparer=function(element,options){this.element=element,this.options=options,this.valid=this.init()};InputComparer.prototype={constructor:InputComparer,init:function(){return this.options=$.extend({},InputComparer.defaults(),this.options),this.$this=$(this),this.$element=$(this.element),this._$firstElement=this.$element.find(this.options.firstElementSelector),0!==this._$firstElement.length&&(this._$secondElement=this.$element.find(this.options.secondElementSelector),0!==this._$secondElement.length&&(this._focusOutHandler=$.proxy(this._onFocusOut,this),this._$firstElement.on("focusout change keyup paste input propertychange",this._focusOutHandler),this._$secondElement.on("focusout change keyup paste input propertychange",this._focusOutHandler),!0))},_onFocusOut:function(eventObject){"propertychange"===eventObject.type&&"value"!==eventObject.originalEvent.propertyName.toLowerCase()||(eventObject.target===this._$firstElement[0]?this._isSecondElementVisited&&this._compare(this._$firstElement,this._$secondElement):(this._isSecondElementVisited=!0,this._compare(this._$firstElement,this._$secondElement)))},_compare:function($first,$second){var firstText=$first.val(),secondText=$second.val(),e=$.Event("on-compare");this.$this.trigger(e,[firstText,secondText])},compare:function(){this._compare(this._$firstElement,this._$secondElement)}},InputComparer._defaults={},InputComparer.defaults=function(settings){return"undefined"!=typeof settings&&$.extend(InputComparer._defaults,settings),InputComparer._defaults},$.fn[pluginName]=function(option){return this.each(function(){var args=$.makeArray(arguments),params=args.slice(1);return this.each(function(){var $this=$(this),instance=$this.data(pluginName);if(!instance){var options=$.extend({},"object"==typeof option&&option);$this.data(pluginName,instance=new InputComparer(this,options))}"string"==typeof option&&instance[option].apply(instance,params)})})};var PasswordComparer=this.PasswordComparer=function(options){this.options=options,this.init()};PasswordComparer.prototype={constructor:PasswordComparer,init:function(){if(this.$this=$(this),this._$container=$(this.options.containerSelector),this._comparer=new InputComparer(this._$container,this.options),this._comparer.valid){var onCompareHandler=$.proxy(this._onCompare,this);$(this._comparer).bind("on-compare",onCompareHandler),this._$confirmElement=this._$container.find(this.options.secondElementSelector),this._$confirmElement.dnntooltip({getTooltipMarkup:$.proxy(this._getTooltipMarkup,this),cssClass:"confirm-password-tooltip",left:214,top:-32,closeOnMouseLeave:!0,disabled:!0}),this._comparer.compare()}},_getTooltipMarkup:function(element){return this._$tooltipContent||(this._$tooltipContent=$("<label/>").addClass("confirm-password-tooltip-content"),this._updateTooltipState(this._isMatched)),this._$tooltipContent},_updateTooltipState:function(isMatched){if(this._$tooltipContent){var text=isMatched?this.options.confirmPasswordMatchedText:this.options.confirmPasswordUnmatchedText;this._$tooltipContent.text(text)}},_onCompare:function(eventObject,val1,val2){this._$confirmElement.removeClass(this.options.unmatchedCssClass),this._$confirmElement.removeClass(this.options.matchedCssClass),this._isMatched=val1===val2,this._isMatched?val1&&this._$confirmElement.addClass(this.options.matchedCssClass):this._$confirmElement.addClass(this.options.unmatchedCssClass);var disabled=!val1||!val2;this._$confirmElement.dnntooltip("disabled",disabled),this._updateTooltipState(this._isMatched)}}}.apply(dnn,[jQuery,window,document]),dnn.initializePasswordComparer=function(options){$(document).ready(function(){new dnn.PasswordComparer(options)})};