!function(){function h(){this.returnValue=!1}function k(){this.cancelBubble=!0}var b,e,f=0,l=[],n={},j={},a={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},m=/[<>&\"\']/g,c=window.setTimeout,d={};!function(o){var q,s,r,p=o.split(/,/);for(q=0;q<p.length;q+=2)for(r=p[q+1].split(/ /),s=0;s<r.length;s++)j[r[s]]=p[q]}("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,audio/mp4,m4a,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe");var g={VERSION:"1.5.7",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:j,ua:function(){var p,o,q,s=navigator,r=s.userAgent,t=s.vendor;return p=/WebKit/.test(r),q=p&&t.indexOf("Apple")!==-1,o=window.opera&&window.opera.buildNumber,{windows:navigator.platform.indexOf("Win")!==-1,android:/Android/.test(r),ie:!p&&!o&&/MSIE/gi.test(r)&&/Explorer/gi.test(s.appName),webkit:p,gecko:!p&&/Gecko/.test(r),safari:q,opera:!!o}}(),typeOf:function(p){return{}.toString.call(p).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},extend:function(o){return g.each(arguments,function(p,q){q>0&&g.each(p,function(s,r){o[r]=s})}),o},cleanName:function(o){var p,q;for(q=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"],p=0;p<q.length;p+=2)o=o.replace(q[p],q[p+1]);return o=o.replace(/\s+/g,"_"),o=o.replace(/[^a-z0-9_\-\.]+/gi,"")},addRuntime:function(o,p){return p.name=o,l[o]=p,l.push(p),p},guid:function(){var p,o=(new Date).getTime().toString(32);for(p=0;p<5;p++)o+=Math.floor(65535*Math.random()).toString(32);return(g.guidPrefix||"p")+o+(f++).toString(32)},buildUrl:function(p,o){var q="";return g.each(o,function(s,r){q+=(q?"&":"")+encodeURIComponent(r)+"="+encodeURIComponent(s)}),q&&(p+=(p.indexOf("?")>0?"&":"?")+q),p},each:function(r,s){var q,p,o;if(r)if(q=r.length,q===b){for(p in r)if(r.hasOwnProperty(p)&&s(r[p],p)===!1)return}else for(o=0;o<q;o++)if(s(r[o],o)===!1)return},formatSize:function(o){return o===b||/\D/.test(o)?g.translate("N/A"):o>1073741824?Math.round(o/1073741824,1)+" GB":o>1048576?Math.round(o/1048576,1)+" MB":o>1024?Math.round(o/1024,1)+" KB":o+" b"},getPos:function(p,t){function o(C){var A,B,z=0,D=0;return C&&(B=C.getBoundingClientRect(),A="CSS1Compat"===v.compatMode?v.documentElement:v.body,z=B.left+A.scrollLeft,D=B.top+A.scrollTop),{x:z,y:D}}var w,q,r,u=0,s=0,v=document;if(p=p,t=t||v.body,p&&p.getBoundingClientRect&&g.ua.ie&&(!v.documentMode||v.documentMode<8))return q=o(p),r=o(t),{x:q.x-r.x,y:q.y-r.y};for(w=p;w&&w!=t&&w.nodeType;)u+=w.offsetLeft||0,s+=w.offsetTop||0,w=w.offsetParent;for(w=p.parentNode;w&&w!=t&&w.nodeType;)u-=w.scrollLeft||0,s-=w.scrollTop||0,w=w.parentNode;return{x:u,y:s}},getSize:function(o){return{w:o.offsetWidth||o.clientWidth,h:o.offsetHeight||o.clientHeight}},parseSize:function(o){var p;return"string"==typeof o&&(o=/^([0-9]+)([mgk]?)$/.exec(o.toLowerCase().replace(/[^0-9mkg]/g,"")),p=o[2],o=+o[1],"g"==p&&(o*=1073741824),"m"==p&&(o*=1048576),"k"==p&&(o*=1024)),o},xmlEncode:function(o){return o?(""+o).replace(m,function(p){return a[p]?"&"+a[p]+";":p}):o},toArray:function(q){var p,o=[];for(p=0;p<q.length;p++)o[p]=q[p];return o},inArray:function(q,r){if(r){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(r,q);for(var o=0,p=r.length;o<p;o++)if(r[o]===q)return o}return-1},addI18n:function(o){return g.extend(n,o)},translate:function(o){return n[o]||o},isEmptyObj:function(o){if(o===b)return!0;for(var p in o)return!1;return!0},hasClass:function(q,p){var o;return""!=q.className&&(o=new RegExp("(^|\\s+)"+p+"(\\s+|$)"),o.test(q.className))},addClass:function(p,o){g.hasClass(p,o)||(p.className=""==p.className?o:p.className.replace(/\s+$/,"")+" "+o)},removeClass:function(q,p){var o=new RegExp("(^|\\s+)"+p+"(\\s+|$)");q.className=q.className.replace(o,function(s,r,t){return" "===r&&" "===t?" ":""})},getStyle:function(p,o){return p.currentStyle?p.currentStyle[o]:window.getComputedStyle?window.getComputedStyle(p,null)[o]:void 0},addEvent:function(t,o,u){var s,r,p;p=arguments[3],o=o.toLowerCase(),e===b&&(e="Plupload_"+g.guid()),t.addEventListener?(s=u,t.addEventListener(o,s,!1)):t.attachEvent&&(s=function(){var v=window.event;v.target||(v.target=v.srcElement),v.preventDefault=h,v.stopPropagation=k,u(v)},t.attachEvent("on"+o,s)),t[e]===b&&(t[e]=g.guid()),d.hasOwnProperty(t[e])||(d[t[e]]={}),r=d[t[e]],r.hasOwnProperty(o)||(r[o]=[]),r[o].push({func:s,orig:u,key:p})},removeEvent:function(t,o){var r,u,q;if("function"==typeof arguments[2]?u=arguments[2]:q=arguments[2],o=o.toLowerCase(),t[e]&&d[t[e]]&&d[t[e]][o]){r=d[t[e]][o];for(var p=r.length-1;p>=0&&(r[p].key!==q&&r[p].orig!==u||(t.removeEventListener?t.removeEventListener(o,r[p].func,!1):t.detachEvent&&t.detachEvent("on"+o,r[p].func),r[p].orig=null,r[p].func=null,r.splice(p,1),u===b));p--);if(r.length||delete d[t[e]][o],g.isEmptyObj(d[t[e]])){delete d[t[e]];try{delete t[e]}catch(s){t[e]=b}}}},removeAllEvents:function(p){var o=arguments[1];p[e]!==b&&p[e]&&g.each(d[p[e]],function(r,q){g.removeEvent(p,q,o)})}};g.Uploader=function(s){function t(){var x,w,y=0;if(this.state==g.STARTED){for(w=0;w<u.length;w++)x||u[w].status!=g.QUEUED?y++:(x=u[w],x.status=g.UPLOADING,this.trigger("BeforeUpload",x)&&this.trigger("UploadFile",x));y==u.length&&(this.stop(),this.trigger("UploadComplete",u))}}function o(){var x,w;for(v.reset(),x=0;x<u.length;x++)w=u[x],w.size!==b?(v.size+=w.size,v.loaded+=w.loaded):v.size=b,w.status==g.DONE?v.uploaded++:w.status==g.FAILED?v.failed++:v.queued++;v.size===b?v.percent=u.length>0?Math.ceil(v.uploaded/u.length*100):0:(v.bytesPerSec=Math.ceil(v.loaded/((+new Date-r||1)/1e3)),v.percent=v.size>0?Math.ceil(v.loaded/v.size*100):0)}var v,r,p={},u=[],q=!1;v=new g.QueueProgress,s=g.extend({chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:"file",filters:[]},s),g.extend(this,{state:g.STOPPED,runtime:"",features:{},files:u,settings:s,total:v,id:g.guid(),init:function(){function w(){var F,D,E,G=y[A++];if(G){if(F=G.getFeatures(),D=B.settings.required_features)for(D=D.split(","),E=0;E<D.length;E++)if(!F[D[E]])return void w();G.init(B,function(H){H&&H.success?(B.features=F,B.runtime=G.name,B.trigger("Init",{runtime:G.name}),B.trigger("PostInit"),B.refresh()):w()})}else B.trigger("Error",{code:g.INIT_ERROR,message:g.translate("Init error.")})}var C,y,z,B=this,A=0;if("function"==typeof s.preinit?s.preinit(B):g.each(s.preinit,function(E,D){B.bind(D,E)}),s.page_url=s.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/"),/^(\w+:\/\/|\/)/.test(s.url)||(s.url=s.page_url+s.url),s.chunk_size=g.parseSize(s.chunk_size),s.max_file_size=g.parseSize(s.max_file_size),B.bind("FilesAdded",function(D,G){var F,E,J,I=0,H=s.filters;for(H&&H.length&&(J=[],g.each(H,function(K){g.each(K.extensions.split(/,/),function(L){/^\s*\*\s*$/.test(L)?J.push("\\.*"):J.push("\\."+L.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),J=new RegExp(J.join("|")+"$","i")),F=0;F<G.length;F++)E=G[F],E.loaded=0,E.percent=0,E.status=g.QUEUED,!J||J.test(E.name)?E.size!==b&&E.size>s.max_file_size?D.trigger("Error",{code:g.FILE_SIZE_ERROR,message:g.translate("File size error."),file:E}):(u.push(E),I++):D.trigger("Error",{code:g.FILE_EXTENSION_ERROR,message:g.translate("File extension error."),file:E});return!!I&&void c(function(){B.trigger("QueueChanged"),B.refresh()},1)}),s.unique_names&&B.bind("UploadFile",function(D,E){var G=E.name.match(/\.([^.]+)$/),F="tmp";G&&(F=G[1]),E.target_name=E.id+"."+F}),B.bind("UploadProgress",function(D,E){E.percent=E.size>0?Math.ceil(E.loaded/E.size*100):100,o()}),B.bind("StateChanged",function(D){if(D.state==g.STARTED)r=+new Date;else if(D.state==g.STOPPED)for(C=D.files.length-1;C>=0;C--)D.files[C].status==g.UPLOADING&&(D.files[C].status=g.QUEUED,o())}),B.bind("QueueChanged",o),B.bind("Error",function(D,E){E.file&&(E.file.status=g.FAILED,o(),D.state==g.STARTED&&c(function(){t.call(B)},1))}),B.bind("FileUploaded",function(D,E){E.status=g.DONE,E.loaded=E.size,D.trigger("UploadProgress",E),c(function(){t.call(B)},1)}),s.runtimes)for(y=[],z=s.runtimes.split(/\s?,\s?/),C=0;C<z.length;C++)l[z[C]]&&y.push(l[z[C]]);else y=l;w(),"function"==typeof s.init?s.init(B):g.each(s.init,function(E,D){B.bind(D,E)})},refresh:function(){this.trigger("Refresh")},start:function(){u.length&&this.state!=g.STARTED&&(this.state=g.STARTED,this.trigger("StateChanged"),t.call(this))},stop:function(){this.state!=g.STOPPED&&(this.state=g.STOPPED,this.trigger("CancelUpload"),this.trigger("StateChanged"))},disableBrowse:function(){q=arguments[0]===b||arguments[0],this.trigger("DisableBrowse",q)},getFile:function(x){var w;for(w=u.length-1;w>=0;w--)if(u[w].id===x)return u[w]},removeFile:function(x){var w;for(w=u.length-1;w>=0;w--)if(u[w].id===x.id)return this.splice(w,1)[0]},splice:function(y,w){var x;return x=u.splice(y===b?0:y,w===b?u.length:w),this.trigger("FilesRemoved",x),this.trigger("QueueChanged"),x},trigger:function(x){var y,w,z=p[x.toLowerCase()];if(z)for(w=Array.prototype.slice.call(arguments),w[0]=this,y=0;y<z.length;y++)if(z[y].func.apply(z[y].scope,w)===!1)return!1;return!0},hasEventListener:function(w){return!!p[w.toLowerCase()]},bind:function(w,y,x){var z;w=w.toLowerCase(),z=p[w]||[],z.push({func:y,scope:x||this}),p[w]=z},unbind:function(w){w=w.toLowerCase();var x,z=p[w],y=arguments[1];if(z){if(y!==b){for(x=z.length-1;x>=0;x--)if(z[x].func===y){z.splice(x,1);break}}else z=[];z.length||delete p[w]}},unbindAll:function(){var w=this;g.each(p,function(y,x){w.unbind(x)})},destroy:function(){this.stop(),this.trigger("Destroy"),this.unbindAll()}})},g.File=function(r,p,q){var o=this;o.id=r,o.name=p,o.size=q,o.loaded=0,o.percent=0,o.status=0},g.Runtime=function(){this.getFeatures=function(){},this.init=function(o,p){}},g.QueueProgress=function(){var o=this;o.size=0,o.loaded=0,o.uploaded=0,o.failed=0,o.queued=0,o.percent=0,o.bytesPerSec=0,o.reset=function(){o.size=o.loaded=o.uploaded=o.failed=o.queued=o.percent=o.bytesPerSec=0}},g.runtimes={},window.plupload=g}(),function(){if(!window.google||!google.gears){var a=null;if("undefined"!=typeof GearsFactory)a=new GearsFactory;else try{a=new ActiveXObject("Gears.Factory"),a.getBuildInfo().indexOf("ie_mobile")!=-1&&a.privateSetGlobalObject(this)}catch(b){"undefined"!=typeof navigator.mimeTypes&&navigator.mimeTypes["application/x-googlegears"]&&(a=document.createElement("object"),a.style.display="none",a.width=0,a.height=0,a.type="application/x-googlegears",document.documentElement.appendChild(a))}a&&(window.google||(window.google={}),google.gears||(google.gears={factory:a}))}}(),function(e,b,c,d){function a(h,k,m){var j,o;j=google.gears.factory.create("beta.canvas");try{if(j.decode(h),k.width||(k.width=j.width),k.height||(k.height=j.height),o=Math.min(k.width/j.width,k.height/j.height),o<1)j.resize(Math.round(j.width*o),Math.round(j.height*o));else if(!k.quality||"image/jpeg"!==m)return h;return k.quality?j.encode(m,{quality:k.quality/100}):j.encode(m)}catch(n){}return h}var f={};c.runtimes.Gears=c.addRuntime("gears",{getFeatures:function(){return{dragdrop:!0,jpgresize:!0,pngresize:!0,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(l,n){function j(q){var p,o,s,r=[];for(o=0;o<q.length;o++)p=q[o],s=c.guid(),f[s]=p.blob,r.push(new c.File(s,p.name,p.blob.length));l.trigger("FilesAdded",r)}var m,h,g=!1;if(!e.google||!google.gears)return n({success:!1});try{m=google.gears.factory.create("beta.desktop")}catch(k){return n({success:!1})}l.bind("PostInit",function(){var p=l.settings,o=b.getElementById(p.drop_element);o&&(c.addEvent(o,"dragover",function(q){m.setDropEffect(q,"copy"),q.preventDefault()},l.id),c.addEvent(o,"drop",function(r){var q=m.getDragData(r,"application/x-gears-files");q&&j(q.files),r.preventDefault()},l.id),o=0),c.addEvent(b.getElementById(p.browse_button),"click",function(u){var r,q,s,t=[];if(u.preventDefault(),!g){no_type_restriction:for(r=0;r<p.filters.length;r++)for(s=p.filters[r].extensions.split(","),q=0;q<s.length;q++){if("*"===s[q]){t=[];break no_type_restriction}t.push("."+s[q])}m.openFiles(j,{singleFile:!p.multi_selection,filter:t})}},l.id)}),l.bind("CancelUpload",function(){h.abort&&h.abort()}),l.bind("UploadFile",function(u,r){function p(){function A(E){var D,F,H,J="----pluploadboundary"+c.guid(),G="--",I="\r\n";y&&(h.setRequestHeader("Content-Type","multipart/form-data; boundary="+J),D=google.gears.factory.create("beta.blobbuilder"),c.each(c.extend(B,u.settings.multipart_params),function(L,K){D.append(G+J+I+'Content-Disposition: form-data; name="'+K+'"'+I+I),D.append(L+I)}),H=c.mimeTypes[r.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",D.append(G+J+I+'Content-Disposition: form-data; name="'+u.settings.file_data_name+'"; filename="'+r.name+'"'+I+"Content-Type: "+H+I+I),D.append(E),D.append(I+G+J+G+I),F=D.getAsBlob(),x=F.length-E.length,E=F),h.send(E)}var C,y=u.settings.multipart,x=0,B={name:r.target_name||r.name},z=u.settings.url;r.status!=c.DONE&&r.status!=c.FAILED&&u.state!=c.STOPPED&&(o&&(B.chunk=w,B.chunks=v),C=Math.min(s,r.size-w*s),y||(z=c.buildUrl(u.settings.url,B)),h=google.gears.factory.create("beta.httprequest"),h.open("POST",z),y||(h.setRequestHeader("Content-Disposition",'attachment; filename="'+r.name+'"'),h.setRequestHeader("Content-Type","application/octet-stream")),c.each(u.settings.headers,function(E,D){h.setRequestHeader(D,E)}),h.upload.onprogress=function(D){r.loaded=t+D.loaded-x,u.trigger("UploadProgress",r)},h.onreadystatechange=function(){var D;if(4==h.readyState&&u.state!==c.STOPPED)if(200==h.status){if(D={chunk:w,chunks:v,response:h.responseText,status:h.status},u.trigger("ChunkUploaded",r,D),D.cancelled)return void(r.status=c.FAILED);t+=C,++w>=v?(r.status=c.DONE,u.trigger("FileUploaded",r,{response:h.responseText,status:h.status})):p()}else u.trigger("Error",{code:c.HTTP_ERROR,message:c.translate("HTTP Error."),file:r,chunk:w,chunks:v,status:h.status})},w<v&&A(f[r.id].slice(w*s,C)))}var v,s,o,w=0,t=0,q=u.settings.resize;q&&/\.(png|jpg|jpeg)$/i.test(r.name)&&(f[r.id]=a(f[r.id],q,/\.png$/i.test(r.name)?"image/png":"image/jpeg")),r.size=f[r.id].length,s=u.settings.chunk_size,o=s>0,v=Math.ceil(r.size/s),o||(s=r.size,v=1),p()}),l.bind("DisableBrowse",function(o,p){g=p}),l.bind("Destroy",function(o){var p,q,r={browseButton:o.settings.browse_button,dropElm:o.settings.drop_element};for(p in r)q=b.getElementById(r[p]),q&&c.removeAllEvents(q,o.id)}),n({success:!0})}})}(window,document,plupload),function(g,b,d,e){function c(o){var n,j,l,k,m=typeof o;if(o===e||null===o)return"null";if("string"===m)return n="\bb\tt\nn\ff\rr\"\"''\\\\",'"'+o.replace(/([\u0080-\uFFFF\x00-\x1f\"])/g,function(r,q){var p=n.indexOf(q);return p+1?"\\"+n.charAt(p+1):(r=q.charCodeAt().toString(16),"\\u"+"0000".substring(r.length)+r)})+'"';if("object"==m){if(j=o.length!==e,n="",j){for(l=0;l<o.length;l++)n&&(n+=","),n+=c(o[l]);n="["+n+"]"}else{for(k in o)o.hasOwnProperty(k)&&(n&&(n+=","),n+=c(k)+":"+c(o[k]));n="{"+n+"}"}return n}return""+o}function f(s){var k,l,m,u,n,v=!1,o=null,q=0;try{try{o=new ActiveXObject("AgControl.AgControl"),o.IsVersionSupported(s)&&(v=!0),o=null}catch(r){var p=navigator.plugins["Silverlight Plug-In"];if(p){for(k=p.description,"1.0.30226.2"===k&&(k="2.0.30226.2"),l=k.split(".");l.length>3;)l.pop();for(;l.length<4;)l.push(0);for(m=s.split(".");m.length>4;)m.pop();do u=parseInt(m[q],10),n=parseInt(l[q],10),q++;while(q<m.length&&u===n);u<=n&&!isNaN(u)&&(v=!0)}}}catch(t){v=!1}return v}var a={},h={};d.silverlight={trigger:function(n,k){var j,m=a[n];m&&(j=d.toArray(arguments).slice(1),j[0]="Silverlight:"+k,setTimeout(function(){m.trigger.apply(m,j)},0))}},d.runtimes.Silverlight=d.addRuntime("silverlight",{getFeatures:function(){return{jpgresize:!0,pngresize:!0,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(p,q){function j(){return b.getElementById(p.id+"_silverlight").content.Upload}var o,l,m="",n=p.settings.filters,k=b.body;if(!f("2.0.31005.0")||g.opera&&g.opera.buildNumber)return void q({success:!1});for(h[p.id]=!1,a[p.id]=p,o=b.createElement("div"),o.id=p.id+"_silverlight_container",d.extend(o.style,{position:"absolute",top:"0px",background:p.settings.shim_bgcolor||"transparent",zIndex:99999,width:"100px",height:"100px",overflow:"hidden",opacity:p.settings.shim_bgcolor||b.documentMode>8?"":.01}),o.className="plupload silverlight",p.settings.container&&(k=b.getElementById(p.settings.container),"static"===d.getStyle(k,"position")&&(k.style.position="relative")),k.appendChild(o),l=0;l<n.length;l++)m+=(""!=m?"|":"")+n[l].title+" | *."+n[l].extensions.replace(/,/g,";*.");o.innerHTML='<object id="'+p.id+'_silverlight" data="data:application/x-silverlight," type="application/x-silverlight-2" style="outline:none;" width="1024" height="1024"><param name="source" value="'+p.settings.silverlight_xap_url+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="enablehtmlaccess" value="true"/><param name="initParams" value="id='+p.id+",filter="+m+",multiselect="+p.settings.multi_selection+'"/></object>',p.bind("Silverlight:Init",function(){var r,s={};h[p.id]||(h[p.id]=!0,p.bind("Silverlight:StartSelectFiles",function(t){r=[]}),p.bind("Silverlight:SelectFile",function(t,w,u,v){var x;x=d.guid(),s[x]=w,s[w]=x,r.push(new d.File(x,u,v))}),p.bind("Silverlight:SelectSuccessful",function(){r.length&&p.trigger("FilesAdded",r)}),p.bind("Silverlight:UploadChunkError",function(t,w,u,x,v){p.trigger("Error",{code:d.IO_ERROR,message:"IO Error.",details:v,file:t.getFile(s[w])})}),p.bind("Silverlight:UploadFileProgress",function(t,x,u,w){var v=t.getFile(s[x]);v.status!=d.FAILED&&(v.size=w,v.loaded=u,t.trigger("UploadProgress",v))}),p.bind("Refresh",function(t){var u,v,w;u=b.getElementById(t.settings.browse_button),u&&(v=d.getPos(u,b.getElementById(t.settings.container)),w=d.getSize(u),d.extend(b.getElementById(t.id+"_silverlight_container").style,{top:v.y+"px",left:v.x+"px",width:w.w+"px",height:w.h+"px"}))}),p.bind("Silverlight:UploadChunkSuccessful",function(t,w,u,z,y){var x,v=t.getFile(s[w]);x={chunk:u,chunks:z,response:y},t.trigger("ChunkUploaded",v,x),v.status!=d.FAILED&&t.state!==d.STOPPED&&j().UploadNextChunk(),u==z-1&&(v.status=d.DONE,t.trigger("FileUploaded",v,{response:y}))}),p.bind("Silverlight:UploadSuccessful",function(t,w,u){var v=t.getFile(s[w]);v.status=d.DONE,t.trigger("FileUploaded",v,{response:u})}),p.bind("FilesRemoved",function(t,v){var u;for(u=0;u<v.length;u++)j().RemoveFile(s[v[u].id])}),p.bind("UploadFile",function(t,v){var w=t.settings,u=w.resize||{};j().UploadFile(s[v.id],t.settings.url,c({name:v.target_name||v.name,mime:d.mimeTypes[v.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",chunk_size:w.chunk_size,image_width:u.width,image_height:u.height,image_quality:u.quality,multipart:!!w.multipart,multipart_params:w.multipart_params||{},file_data_name:w.file_data_name,headers:w.headers}))}),p.bind("CancelUpload",function(){j().CancelUpload()}),p.bind("Silverlight:MouseEnter",function(t){var u,v;u=b.getElementById(p.settings.browse_button),v=t.settings.browse_button_hover,u&&v&&d.addClass(u,v)}),p.bind("Silverlight:MouseLeave",function(t){var u,v;u=b.getElementById(p.settings.browse_button),v=t.settings.browse_button_hover,u&&v&&d.removeClass(u,v)}),p.bind("Silverlight:MouseLeftButtonDown",function(t){var u,v;u=b.getElementById(p.settings.browse_button),v=t.settings.browse_button_active,u&&v&&(d.addClass(u,v),d.addEvent(b.body,"mouseup",function(){d.removeClass(u,v)}))}),p.bind("Sliverlight:StartSelectFiles",function(t){var u,v;u=b.getElementById(p.settings.browse_button),v=t.settings.browse_button_active,u&&v&&d.removeClass(u,v)}),p.bind("DisableBrowse",function(t,u){j().DisableBrowse(u)}),p.bind("Destroy",function(t){var u;d.removeAllEvents(b.body,t.id),delete h[t.id],delete a[t.id],u=b.getElementById(t.id+"_silverlight_container"),u&&u.parentNode.removeChild(u)}),q({success:!0}))})}})}(window,document,plupload),function(f,b,d,e){function c(){var h;try{h=navigator.plugins["Shockwave Flash"],h=h.description}catch(k){try{h=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(j){h="0.0"}}return h=h.match(/\d+/g),parseFloat(h[0]+"."+h[1])}var a={},g={};d.flash={trigger:function(k,h,j){setTimeout(function(){var n=a[k];n&&n.trigger("Flash:"+h,j)},0)}},d.runtimes.Flash=d.addRuntime("flash",{getFeatures:function(){return{jpgresize:!0,pngresize:!0,maxWidth:8091,maxHeight:8091,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(n,p){function o(){return b.getElementById(n.id+"_flash")}function k(){return h++>5e3?void p({success:!1}):void(g[n.id]===!1&&setTimeout(k,1))}var l,m,h=0,j=b.body;return c()<10?void p({success:!1}):(g[n.id]=!1,a[n.id]=n,l=b.getElementById(n.settings.browse_button),m=b.createElement("div"),m.id=n.id+"_flash_container",d.extend(m.style,{position:"absolute",top:"0px",background:n.settings.shim_bgcolor||"transparent",zIndex:99999,width:"100%",height:"100%"}),m.className="plupload flash",n.settings.container&&(j=b.getElementById(n.settings.container),"static"===d.getStyle(j,"position")&&(j.style.position="relative")),j.appendChild(m),function(){var q,r;q='<object id="'+n.id+'_flash" type="application/x-shockwave-flash" data="'+n.settings.flash_swf_url+'" ',d.ua.ie&&(q+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),q+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+n.settings.flash_swf_url+'" /><param name="flashvars" value="id='+escape(n.id)+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',d.ua.ie?(r=b.createElement("div"),m.appendChild(r),r.outerHTML=q,r=null):m.innerHTML=q}(),k(),l=m=null,n.bind("Destroy",function(q){var r;d.removeAllEvents(b.body,q.id),delete g[q.id],delete a[q.id],r=b.getElementById(q.id+"_flash_container"),r&&r.parentNode.removeChild(r)}),void n.bind("Flash:Init",function(){var s={};try{o().setFileFilters(n.settings.filters,n.settings.multi_selection)}catch(q){return void p({success:!1})}g[n.id]||(g[n.id]=!0,n.bind("UploadFile",function(t,v){var w=t.settings,u=n.settings.resize||{};o().uploadFile(s[v.id],w.url,{name:v.target_name||v.name,mime:d.mimeTypes[v.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",chunk_size:w.chunk_size,width:u.width,height:u.height,quality:u.quality,multipart:w.multipart,multipart_params:w.multipart_params||{},file_data_name:w.file_data_name,format:/\.(jpg|jpeg)$/i.test(v.name)?"jpg":"png",headers:w.headers,urlstream_upload:w.urlstream_upload})}),n.bind("CancelUpload",function(){o().cancelUpload()}),n.bind("Flash:UploadProcess",function(u,t){var v=u.getFile(s[t.id]);v.status!=d.FAILED&&(v.loaded=t.loaded,v.size=t.size,u.trigger("UploadProgress",v))}),n.bind("Flash:UploadChunkComplete",function(t,v){var w,u=t.getFile(s[v.id]);w={chunk:v.chunk,chunks:v.chunks,response:v.text},t.trigger("ChunkUploaded",u,w),u.status!==d.FAILED&&t.state!==d.STOPPED&&o().uploadNextChunk(),v.chunk==v.chunks-1&&(u.status=d.DONE,t.trigger("FileUploaded",u,{response:v.text}))}),n.bind("Flash:SelectFiles",function(t,w){var v,u,y,x=[];for(u=0;u<w.length;u++)v=w[u],y=d.guid(),s[y]=v.id,s[v.id]=y,x.push(new d.File(y,v.name,v.size));x.length&&n.trigger("FilesAdded",x)}),n.bind("Flash:SecurityError",function(t,u){n.trigger("Error",{code:d.SECURITY_ERROR,message:d.translate("Security error."),details:u.message,file:n.getFile(s[u.id])})}),n.bind("Flash:GenericError",function(t,u){n.trigger("Error",{code:d.GENERIC_ERROR,message:d.translate("Generic error."),details:u.message,file:n.getFile(s[u.id])})}),n.bind("Flash:IOError",function(t,u){n.trigger("Error",{code:d.IO_ERROR,message:d.translate("IO error."),details:u.message,file:n.getFile(s[u.id])})}),n.bind("Flash:ImageError",function(t,u){n.trigger("Error",{code:parseInt(u.code,10),message:d.translate("Image error."),file:n.getFile(s[u.id])})}),n.bind("Flash:StageEvent:rollOver",function(t){var u,v;u=b.getElementById(n.settings.browse_button),v=t.settings.browse_button_hover,u&&v&&d.addClass(u,v)}),n.bind("Flash:StageEvent:rollOut",function(t){var u,v;u=b.getElementById(n.settings.browse_button),v=t.settings.browse_button_hover,u&&v&&d.removeClass(u,v)}),n.bind("Flash:StageEvent:mouseDown",function(t){var u,v;u=b.getElementById(n.settings.browse_button),v=t.settings.browse_button_active,u&&v&&(d.addClass(u,v),d.addEvent(b.body,"mouseup",function(){d.removeClass(u,v)},t.id))}),n.bind("Flash:StageEvent:mouseUp",function(t){var u,v;u=b.getElementById(n.settings.browse_button),v=t.settings.browse_button_active,u&&v&&d.removeClass(u,v)}),n.bind("Flash:ExifData",function(t,u){n.trigger("ExifData",n.getFile(s[u.id]),u.data)}),n.bind("Flash:GpsData",function(t,u){n.trigger("GpsData",n.getFile(s[u.id]),u.data)}),n.bind("QueueChanged",function(t){n.refresh()}),n.bind("FilesRemoved",function(t,v){var u;for(u=0;u<v.length;u++)o().removeFile(s[v[u].id])}),n.bind("StateChanged",function(t){n.refresh()}),n.bind("Refresh",function(t){var u,v,w;o().setFileFilters(n.settings.filters,n.settings.multi_selection),u=b.getElementById(t.settings.browse_button),u&&(v=d.getPos(u,b.getElementById(t.settings.container)),w=d.getSize(u),d.extend(b.getElementById(t.id+"_flash_container").style,{top:v.y+"px",left:v.x+"px",width:w.w+"px",height:w.h+"px"}))}),n.bind("DisableBrowse",function(t,u){o().disableBrowse(u)}),p({success:!0}))}))}})}(window,document,plupload),function(a){a.runtimes.BrowserPlus=a.addRuntime("browserplus",{getFeatures:function(){return{dragdrop:!0,jpgresize:!0,pngresize:!0,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(g,j){function f(o){var m,l,p,k=[];for(m=0;m<o.length;m++)l=o[m],p=a.guid(),h[p]=l,k.push(new a.File(p,l.name,l.size));m&&g.trigger("FilesAdded",k)}function b(){var k=!1;g.bind("PostInit",function(){function r(t,s){e.DragAndDrop.AddDropTarget({id:t},function(u){e.DragAndDrop.AttachCallbacks({id:t,hover:function(v){!v&&s&&s()},drop:function(v){s&&s(),f(v)}},function(){})})}function p(){document.getElementById(q).style.top="-1000px"}var o,m=d.drop_element,q=g.id+"_droptarget",l=document.getElementById(m);l&&(document.attachEvent&&/MSIE/gi.test(navigator.userAgent)?(o=document.createElement("div"),o.setAttribute("id",q),a.extend(o.style,{position:"absolute",top:"-1000px",background:"red",filter:"alpha(opacity=0)",opacity:0}),document.body.appendChild(o),a.addEvent(l,"dragenter",function(t){var s,u;s=document.getElementById(m),u=a.getPos(s),a.extend(document.getElementById(q).style,{top:u.y+"px",left:u.x+"px",width:s.offsetWidth+"px",height:s.offsetHeight+"px"})}),r(q,p)):r(m)),a.addEvent(document.getElementById(d.browse_button),"click",function(y){var u,t,w,v,s=[],x=d.filters;if(y.preventDefault(),!k){no_type_restriction:for(u=0;u<x.length;u++)for(w=x[u].extensions.split(","),t=0;t<w.length;t++){if("*"===w[t]){s=[];break no_type_restriction}v=a.mimeTypes[w[t]],v&&a.inArray(v,s)===-1&&s.push(a.mimeTypes[w[t]])}e.FileBrowse.OpenBrowseDialog({mimeTypes:s},function(z){z.success&&f(z.value)})}}),l=o=null}),g.bind("CancelUpload",function(){e.Uploader.cancel({},function(){})}),g.bind("DisableBrowse",function(l,m){k=m}),g.bind("UploadFile",function(o,l){function s(u,w){var v;l.status!=a.FAILED&&(t.name=l.target_name||l.name,m&&(t.chunk=""+u,t.chunks=""+w),v=q.shift(),e.Uploader.upload({url:o.settings.url,files:{file:v},cookies:document.cookies,postvars:a.extend(t,o.settings.multipart_params),progressCallback:function(z){var y,x=0;for(p[u]=parseInt(z.filePercent*v.size/100,10),y=0;y<p.length;y++)x+=p[y];l.loaded=x,o.trigger("UploadProgress",l)}},function(y){var x;y.success?(x=y.value.statusCode,m&&o.trigger("ChunkUploaded",l,{chunk:u,chunks:w,response:y.value.body,status:x}),q.length>0?s(++u,w):(l.status=a.DONE,o.trigger("FileUploaded",l,{response:y.value.body,status:x}),x>=400&&o.trigger("Error",{code:a.HTTP_ERROR,message:a.translate("HTTP Error."),file:l,status:x}))):o.trigger("Error",{code:a.GENERIC_ERROR,message:a.translate("Generic Error."),file:l,details:y.error})}))}function r(u){l.size=u.size,m?e.FileAccess.chunk({file:u,chunkSize:m},function(x){if(x.success){var y=x.value,v=y.length;p=Array(v);for(var w=0;w<v;w++)p[w]=0,q.push(y[w]);s(0,v)}}):(p=Array(1),q.push(u),s(0,1))}var p,n=h[l.id],t={},m=o.settings.chunk_size,q=[];c&&/\.(png|jpg|jpeg)$/i.test(l.name)?BrowserPlus.ImageAlter.transform({file:n,quality:c.quality||90,actions:[{scale:{maxwidth:c.width,maxheight:c.height}}]},function(u){u.success&&r(u.value.file)}):r(n)}),j({success:!0})}var e=window.BrowserPlus,h={},d=g.settings,c=d.resize;e?e.init(function(l){var k=[{service:"Uploader",version:"3"},{service:"DragAndDrop",version:"1"},{service:"FileBrowse",version:"1"},{service:"FileAccess",version:"2"}];c&&k.push({service:"ImageAlter",version:"4"}),l.success?e.require({services:k},function(m){m.success?b():j()}):j()}):j()}})}(plupload),function(k,m,l,g){function c(s){var r=s.naturalWidth,u=s.naturalHeight;if(r*u>1048576){var t=m.createElement("canvas");t.width=t.height=1;var q=t.getContext("2d");return q.drawImage(s,-r+1,0),0===q.getImageData(0,0,1,1).data[3]}return!1}function f(u,r,z){var q=m.createElement("canvas");q.width=1,q.height=z;var A=q.getContext("2d");A.drawImage(u,0,0);for(var t=A.getImageData(0,0,1,z).data,x=0,v=z,y=z;y>x;){var s=t[4*(y-1)+3];0===s?v=y:x=y,y=v+x>>1}var w=y/z;return 0===w?1:w}function o(K,s,t){var v=K.naturalWidth,z=K.naturalHeight,E=t.width,B=t.height,F=s.getContext("2d");F.save();var r=c(K);r&&(v/=2,z/=2);var I=1024,q=m.createElement("canvas");q.width=q.height=I;for(var u=q.getContext("2d"),G=f(K,v,z),A=0;A<z;){for(var J=A+I>z?z-A:I,C=0;C<v;){var D=C+I>v?v-C:I;u.clearRect(0,0,I,I),u.drawImage(K,-C,-A);var x=C*E/v<<0,y=Math.ceil(D*E/v),w=A*B/z/G<<0,H=Math.ceil(J*B/z/G);F.drawImage(q,0,0,D,J,x,w,y,H),C+=I}A+=I}F.restore(),q=u=null}function p(r,s){var q;return"FileReader"in k?(q=new FileReader,q.readAsDataURL(r),q.onload=function(){s(q.result)},void 0):s(r.getAsDataURL())}function n(r,s){var q;return"FileReader"in k?(q=new FileReader,q.readAsBinaryString(r),q.onload=function(){s(q.result)},void 0):s(r.getAsBinary())}function e(u,s,q,y){var t,x,v,w=this;p(d[u.id],function(z){t=m.createElement("canvas"),t.style.display="none",m.body.appendChild(t),x=new Image,x.onerror=x.onabort=function(){y({success:!1})},x.onload=function(){var F,A,B,E;if(s.width||(s.width=x.width),s.height||(s.height=x.height),v=Math.min(s.width/x.width,s.height/x.height),v<1)F=Math.round(x.width*v),A=Math.round(x.height*v);else{if(!s.quality||"image/jpeg"!==q)return void y({
success:!1});F=x.width,A=x.height}if(t.width=F,t.height=A,o(x,t,{width:F,height:A}),"image/jpeg"===q&&(B=new h(atob(z.substring(z.indexOf("base64,")+7))),B.headers&&B.headers.length&&(E=new a,E.init(B.get("exif")[0])&&(E.setExif("PixelXDimension",F),E.setExif("PixelYDimension",A),B.set("exif",E.getBinary()),w.hasEventListener("ExifData")&&w.trigger("ExifData",u,E.EXIF()),w.hasEventListener("GpsData")&&w.trigger("GpsData",u,E.GPS())))),s.quality&&"image/jpeg"===q)try{z=t.toDataURL(q,s.quality/100)}catch(D){z=t.toDataURL(q)}else z=t.toDataURL(q);z=z.substring(z.indexOf("base64,")+7),z=atob(z),B&&B.headers&&B.headers.length&&(z=B.restore(z),B.purge()),t.parentNode.removeChild(t),y({success:!0,data:z})},x.src=z})}function b(){function u(w,y){var x,v=t?0:-8*(y-1),z=0;for(x=0;x<y;x++)z|=r.charCodeAt(w+x)<<Math.abs(v+8*x);return z}function q(x,v,w){var w=3===arguments.length?w:r.length-v-1;r=r.substr(0,v)+x+r.substr(w+v)}function s(w,x,z){var y,A="",v=t?0:-8*(z-1);for(y=0;y<z;y++)A+=String.fromCharCode(x>>Math.abs(v+8*y)&255);q(A,w,z)}var r,t=!1;return{II:function(v){return v===g?t:void(t=v)},init:function(v){t=!1,r=v},SEGMENT:function(v,x,w){switch(arguments.length){case 1:return r.substr(v,r.length-v-1);case 2:return r.substr(v,x);case 3:q(w,v,x);break;default:return r}},BYTE:function(v){return u(v,1)},SHORT:function(v){return u(v,2)},LONG:function(v,w){return w===g?u(v,4):void s(v,w,4)},SLONG:function(v){var w=u(v,4);return w>2147483647?w-4294967296:w},STRING:function(v,w){var x="";for(w+=v;v<w;v++)x+=String.fromCharCode(u(v,1));return x}}}function h(v){var u,q,r,x={65505:{app:"EXIF",name:"APP1",signature:"Exif\0"},65506:{app:"ICC",name:"APP2",signature:"ICC_PROFILE\0"},65517:{app:"IPTC",name:"APP13",signature:"Photoshop 3.0\0"}},w=[],s=g,t=0;if(u=new b,u.init(v),65496===u.SHORT(0)){for(q=2,r=Math.min(1048576,v.length);q<=r;)if(s=u.SHORT(q),s>=65488&&s<=65495)q+=2;else{if(65498===s||65497===s)break;t=u.SHORT(q+2)+2,x[s]&&u.STRING(q+4,x[s].signature.length)===x[s].signature&&w.push({hex:s,app:x[s].app.toUpperCase(),name:x[s].name.toUpperCase(),start:q,length:t,segment:u.SEGMENT(q,t)}),q+=t}return u.init(null),{headers:w,restore:function(B){u.init(B);var z=new h(B);if(!z.headers)return!1;for(var A=z.headers.length;A>0;A--){var C=z.headers[A-1];u.SEGMENT(C.start,C.length,"")}z.purge(),q=65504==u.SHORT(2)?4+u.SHORT(4):2;for(var A=0,y=w.length;A<y;A++)u.SEGMENT(q,0,w[A].segment),q+=w[A].length;return u.SEGMENT()},get:function(A){for(var B=[],z=0,y=w.length;z<y;z++)w[z].app===A.toUpperCase()&&B.push(w[z].segment);return B},set:function(B,A){var C=[];"string"==typeof A?C.push(A):C=A;for(var z=ii=0,y=w.length;z<y&&(w[z].app===B.toUpperCase()&&(w[z].segment=C[ii],w[z].length=C[ii].length,ii++),!(ii>=C.length));z++);},purge:function(){w=[],u.init(null)}}}}function a(){function s(x,F){var C,I,J,E,D,y,A,G,z=t.SHORT(x),H=[],B={};for(C=0;C<z;C++)if(A=y=x+12*C+2,J=F[t.SHORT(A)],J!==g){switch(E=t.SHORT(A+=2),D=t.LONG(A+=2),A+=4,H=[],E){case 1:case 7:for(D>4&&(A=t.LONG(A)+r.tiffHeader),I=0;I<D;I++)H[I]=t.BYTE(A+I);break;case 2:D>4&&(A=t.LONG(A)+r.tiffHeader),B[J]=t.STRING(A,D-1);continue;case 3:for(D>2&&(A=t.LONG(A)+r.tiffHeader),I=0;I<D;I++)H[I]=t.SHORT(A+2*I);break;case 4:for(D>1&&(A=t.LONG(A)+r.tiffHeader),I=0;I<D;I++)H[I]=t.LONG(A+4*I);break;case 5:for(A=t.LONG(A)+r.tiffHeader,I=0;I<D;I++)H[I]=t.LONG(A+4*I)/t.LONG(A+4*I+4);break;case 9:for(A=t.LONG(A)+r.tiffHeader,I=0;I<D;I++)H[I]=t.SLONG(A+4*I);break;case 10:for(A=t.LONG(A)+r.tiffHeader,I=0;I<D;I++)H[I]=t.SLONG(A+4*I)/t.SLONG(A+4*I+4);break;default:continue}G=1==D?H[0]:H,w.hasOwnProperty(J)&&"object"!=typeof G?B[J]=w[J][G]:B[J]=G}return B}function v(){var y=g,x=r.tiffHeader;return t.II(18761==t.SHORT(x)),42===t.SHORT(x+=2)&&(r.IFD0=r.tiffHeader+t.LONG(x+=2),y=s(r.IFD0,q.tiff),r.exifIFD="ExifIFDPointer"in y?r.tiffHeader+y.ExifIFDPointer:g,r.gpsIFD="GPSInfoIFDPointer"in y?r.tiffHeader+y.GPSInfoIFDPointer:g,!0)}function u(z,x,C){var E,B,A,D=0;if("string"==typeof x){var y=q[z.toLowerCase()];for(hex in y)if(y[hex]===x){x=hex;break}}for(E=r[z.toLowerCase()+"IFD"],B=t.SHORT(E),i=0;i<B;i++)if(A=E+12*i+2,t.SHORT(A)==x){D=A+8;break}return!!D&&(t.LONG(D,C),!0)}var t,q,w,r={};return t=new b,q={tiff:{274:"Orientation",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}},w={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},{init:function(x){return r={tiffHeader:10},!(x===g||!x.length)&&(t.init(x),65505===t.SHORT(0)&&"EXIF\0"===t.STRING(4,5).toUpperCase()&&v())},EXIF:function(){var y;if(y=s(r.exifIFD,q.exif),y.ExifVersion&&"array"===l.typeOf(y.ExifVersion)){for(var z=0,x="";z<y.ExifVersion.length;z++)x+=String.fromCharCode(y.ExifVersion[z]);y.ExifVersion=x}return y},GPS:function(){var x;return x=s(r.gpsIFD,q.gps),x.GPSVersionID&&(x.GPSVersionID=x.GPSVersionID.join(".")),x},setExif:function(x,y){return("PixelXDimension"===x||"PixelYDimension"===x)&&u("exif",x,y)},getBinary:function(){return t.SEGMENT()}}}var j,d={};l.runtimes.Html5=l.addRuntime("html5",{getFeatures:function(){var v,r,u,t,s,q;return r=u=s=q=!1,k.XMLHttpRequest&&(v=new XMLHttpRequest,u=!!v.upload,r=!(!v.sendAsBinary&&!v.upload)),r&&(t=!!(v.sendAsBinary||k.Uint8Array&&k.ArrayBuffer),s=!(!File||!File.prototype.getAsDataURL&&!k.FileReader||!t),q=!(!File||!(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice))),j=l.ua.safari&&l.ua.windows,{html5:r,dragdrop:function(){var w=m.createElement("div");return"draggable"in w||"ondragstart"in w&&"ondrop"in w}(),jpgresize:s,pngresize:s,multipart:s||!!k.FileReader||!!k.FormData,canSendBinary:t,cantSendBlobInFormData:!(!(l.ua.gecko&&k.FormData&&k.FileReader)||FileReader.prototype.readAsArrayBuffer)||l.ua.android,progress:u,chunks:q,multi_selection:!(l.ua.safari&&l.ua.windows),triggerDialog:l.ua.gecko&&k.FormData||l.ua.webkit}},init:function(s,u){function r(z){var x,w,A,y=[],v={};for(w=0;w<z.length;w++)x=z[w],v[x.name]&&l.ua.safari&&l.ua.windows||(v[x.name]=!0,A=l.guid(),d[A]=x,y.push(new l.File(A,x.fileName||x.name,x.fileSize||x.size)));y.length&&s.trigger("FilesAdded",y)}var q,t;return q=this.getFeatures(),q.html5?(s.bind("Init",function(A){var J,I,z,G,x,E,H,F=[],w=A.settings.filters,v=m.body;J=m.createElement("div"),J.id=A.id+"_html5_container",l.extend(J.style,{position:"absolute",background:s.settings.shim_bgcolor||"transparent",width:"100px",height:"100px",overflow:"hidden",zIndex:99999,opacity:s.settings.shim_bgcolor?"":0}),J.className="plupload html5",s.settings.container&&(v=m.getElementById(s.settings.container),"static"===l.getStyle(v,"position")&&(v.style.position="relative")),v.appendChild(J);no_type_restriction:for(z=0;z<w.length;z++)for(x=w[z].extensions.split(/,/),G=0;G<x.length;G++){if("*"===x[G]){F=[];break no_type_restriction}E=l.mimeTypes[x[G]],E&&l.inArray(E,F)===-1&&F.push(E)}if(J.innerHTML='<input id="'+s.id+'_html5"  style="font-size:999px" type="file" accept="'+F.join(",")+'" '+(s.settings.multi_selection&&s.features.multi_selection?'multiple="multiple"':"")+" />",J.scrollTop=100,H=m.getElementById(s.id+"_html5"),A.features.triggerDialog?l.extend(H.style,{position:"absolute",width:"100%",height:"100%"}):l.extend(H.style,{cssFloat:"right",styleFloat:"right"}),H.onchange=function(){r(this.files),this.value=""},I=m.getElementById(A.settings.browse_button)){var C=A.settings.browse_button_hover,D=A.settings.browse_button_active,B=A.features.triggerDialog?I:J;C&&(l.addEvent(B,"mouseover",function(){l.addClass(I,C)},A.id),l.addEvent(B,"mouseout",function(){l.removeClass(I,C)},A.id)),D&&(l.addEvent(B,"mousedown",function(){l.addClass(I,D)},A.id),l.addEvent(m.body,"mouseup",function(){l.removeClass(I,D)},A.id)),A.features.triggerDialog&&l.addEvent(I,"click",function(K){var y=m.getElementById(A.id+"_html5");y&&!y.disabled&&y.click(),K.preventDefault()},A.id)}}),s.bind("PostInit",function(){var v=m.getElementById(s.settings.drop_element);if(v){if(j)return void l.addEvent(v,"dragenter",function(z){var y,w,x;y=m.getElementById(s.id+"_drop"),y||(y=m.createElement("input"),y.setAttribute("type","file"),y.setAttribute("id",s.id+"_drop"),y.setAttribute("multiple","multiple"),l.addEvent(y,"change",function(){r(this.files),l.removeEvent(y,"change",s.id),y.parentNode.removeChild(y)},s.id),l.addEvent(y,"dragover",function(A){A.stopPropagation()},s.id),v.appendChild(y)),w=l.getPos(v,m.getElementById(s.settings.container)),x=l.getSize(v),"static"===l.getStyle(v,"position")&&l.extend(v.style,{position:"relative"}),l.extend(y.style,{position:"absolute",display:"block",top:0,left:0,width:x.w+"px",height:x.h+"px",opacity:0})},s.id);l.addEvent(v,"dragover",function(w){w.preventDefault()},s.id),l.addEvent(v,"drop",function(x){var w=x.dataTransfer;w&&w.files&&r(w.files),x.preventDefault()},s.id)}}),s.bind("Refresh",function(v){var w,x,y,A,z;w=m.getElementById(s.settings.browse_button),w&&(x=l.getPos(w,m.getElementById(v.settings.container)),y=l.getSize(w),A=m.getElementById(s.id+"_html5_container"),l.extend(A.style,{top:x.y+"px",left:x.x+"px",width:y.w+"px",height:y.h+"px"}),s.features.triggerDialog&&("static"===l.getStyle(w,"position")&&l.extend(w.style,{position:"relative"}),z=parseInt(l.getStyle(w,"zIndex"),10),isNaN(z)&&(z=0),l.extend(w.style,{zIndex:z}),l.extend(A.style,{zIndex:z-1})))}),s.bind("DisableBrowse",function(v,x){var w=m.getElementById(v.id+"_html5");w&&(w.disabled=x)}),s.bind("CancelUpload",function(){t&&t.abort&&t.abort()}),s.bind("UploadFile",function(v,x){function A(D,G,C){var E;if(!File.prototype.slice)return(E=File.prototype.webkitSlice||File.prototype.mozSlice)?E.call(D,G,C):null;try{return D.slice(),D.slice(G,C)}catch(F){return D.slice(G,C-G)}}function z(C){function D(){function J(S){if(t.sendAsBinary)t.sendAsBinary(S);else if(v.features.canSendBinary){for(var Q=new Uint8Array(S.length),R=0;R<S.length;R++)Q[R]=255&S.charCodeAt(R);t.send(Q.buffer)}}function I(R){var T,V=0,W="----pluploadboundary"+l.guid(),S="--",U="\r\n",Q="";if(t=new XMLHttpRequest,t.upload&&(t.upload.onprogress=function(X){x.loaded=Math.min(x.size,E+X.loaded-V),v.trigger("UploadProgress",x)}),t.onreadystatechange=function(){var X,Z;if(4==t.readyState&&v.state!==l.STOPPED){try{X=t.status}catch(Y){X=0}if(X>=400)v.trigger("Error",{code:l.HTTP_ERROR,message:l.translate("HTTP Error."),file:x,status:X});else{if(N){if(Z={chunk:F,chunks:N,response:t.responseText,status:X},v.trigger("ChunkUploaded",x,Z),E+=M,Z.cancelled)return void(x.status=l.FAILED);x.loaded=Math.min(x.size,(F+1)*K)}else x.loaded=x.size;v.trigger("UploadProgress",x),R=L=T=Q=null,!N||++F>=N?(x.status=l.DONE,v.trigger("FileUploaded",x,{response:t.responseText,status:X})):D()}}},v.settings.multipart&&q.multipart){if(O.name=x.target_name||x.name,t.open("post",G,!0),l.each(v.settings.headers,function(Y,X){t.setRequestHeader(X,Y)}),"string"!=typeof R&&k.FormData)return T=new FormData,l.each(l.extend(O,v.settings.multipart_params),function(Y,X){T.append(X,Y)}),T.append(v.settings.file_data_name,R),void t.send(T);if("string"==typeof R)return t.setRequestHeader("Content-Type","multipart/form-data; boundary="+W),l.each(l.extend(O,v.settings.multipart_params),function(Y,X){Q+=S+W+U+'Content-Disposition: form-data; name="'+X+'"'+U+U,Q+=unescape(encodeURIComponent(Y))+U}),H=l.mimeTypes[x.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",Q+=S+W+U+'Content-Disposition: form-data; name="'+v.settings.file_data_name+'"; filename="'+unescape(encodeURIComponent(x.name))+'"'+U+"Content-Type: "+H+U+U+R+U+S+W+S+U,V=Q.length-R.length,R=Q,void J(R)}G=l.buildUrl(v.settings.url,l.extend(O,v.settings.multipart_params)),t.open("post",G,!0),t.setRequestHeader("Content-Type","application/octet-stream"),l.each(v.settings.headers,function(Y,X){t.setRequestHeader(X,Y)}),"string"==typeof R?J(R):t.send(R)}var L,N,O,K,M,H,G=v.settings.url;x.status!=l.DONE&&x.status!=l.FAILED&&v.state!=l.STOPPED&&(O={name:x.target_name||x.name},y.chunk_size&&x.size>y.chunk_size&&(q.chunks||"string"==typeof C)?(K=y.chunk_size,N=Math.ceil(x.size/K),M=Math.min(K,x.size-F*K),L="string"==typeof C?C.substring(F*K,F*K+M):A(C,F*K,F*K+M),O.chunk=F,O.chunks=N):(M=x.size,L=C),v.settings.multipart&&q.multipart&&"string"!=typeof L&&k.FileReader&&q.cantSendBlobInFormData&&q.chunks&&v.settings.chunk_size?!function(){var Q=new FileReader;Q.onload=function(){I(Q.result),Q=null},Q.readAsBinaryString(L)}():I(L))}var F=0,E=0;D()}var B,y=v.settings;B=d[x.id],q.jpgresize&&v.settings.resize&&/\.(png|jpg|jpeg)$/i.test(x.name)?e.call(v,x,v.settings.resize,/\.png$/i.test(x.name)?"image/png":"image/jpeg",function(C){C.success?(x.size=C.data.length,z(C.data)):q.chunks?z(B):n(B,z)}):!q.chunks&&q.jpgresize?n(B,z):z(B)}),s.bind("Destroy",function(v){var x,y,w=m.body,z={inputContainer:v.id+"_html5_container",inputFile:v.id+"_html5",browseButton:v.settings.browse_button,dropElm:v.settings.drop_element};for(x in z)y=m.getElementById(z[x]),y&&l.removeAllEvents(y,v.id);l.removeAllEvents(m.body,v.id),v.settings.container&&(w=m.getElementById(v.settings.container)),w.removeChild(m.getElementById(z.inputContainer))}),void u({success:!0})):void u({success:!1})}})}(window,document,plupload),function(d,a,b,c){function e(f){return a.getElementById(f)}b.runtimes.Html4=b.addRuntime("html4",{getFeatures:function(){return{multipart:!0,triggerDialog:b.ua.gecko&&d.FormData||b.ua.webkit}},init:function(f,g){f.bind("Init",function(p){function v(){var C,A,y,B;q=b.guid(),z.push(q),C=a.createElement("form"),C.setAttribute("id","form_"+q),C.setAttribute("method","post"),C.setAttribute("enctype","multipart/form-data"),C.setAttribute("encoding","multipart/form-data"),C.setAttribute("target",p.id+"_iframe"),C.style.position="absolute",A=a.createElement("input"),A.setAttribute("id","input_"+q),A.setAttribute("type","file"),A.setAttribute("accept",t),A.setAttribute("size",1),B=e(p.settings.browse_button),p.features.triggerDialog&&B&&b.addEvent(e(p.settings.browse_button),"click",function(D){A.disabled||A.click(),D.preventDefault()},p.id),b.extend(A.style,{width:"100%",height:"100%",opacity:0,fontSize:"99px",cursor:"pointer"}),b.extend(C.style,{overflow:"hidden"}),y=p.settings.shim_bgcolor,y&&(C.style.background=y),r&&b.extend(A.style,{filter:"alpha(opacity=0)"}),b.addEvent(A,"change",function(G){var D,E=G.target,F=[];E.value&&(e("form_"+q).style.top="-1048575px",D=E.value.replace(/\\/g,"/"),D=D.substring(D.length,D.lastIndexOf("/")+1),F.push(new b.File(q,D)),p.features.triggerDialog?b.removeEvent(B,"click",p.id):b.removeAllEvents(C,p.id),b.removeEvent(A,"change",p.id),v(),F.length&&f.trigger("FilesAdded",F))},p.id),C.appendChild(A),j.appendChild(C),p.refresh()}function u(){var y=a.createElement("div");y.innerHTML='<iframe id="'+p.id+'_iframe" name="'+p.id+'_iframe" src="'+h+':&quot;&quot;" style="display:none"></iframe>',n=y.firstChild,j.appendChild(n),b.addEvent(n,"load",function(D){var C,A,E=D.target;if(k){try{C=E.contentWindow.document||E.contentDocument||d.frames[E.id].document}catch(B){return void p.trigger("Error",{code:b.SECURITY_ERROR,message:b.translate("Security error."),file:k})}A=C.documentElement.innerText||C.documentElement.textContent,A&&(k.status=b.DONE,k.loaded=1025,k.percent=100,p.trigger("UploadProgress",k),p.trigger("FileUploaded",k,{response:A}))}},p.id)}var n,k,q,o,l,s,w,j=a.body,h="javascript",z=[],r=/MSIE/.test(navigator.userAgent),t=[],m=p.settings.filters;no_type_restriction:for(o=0;o<m.length;o++)for(l=m[o].extensions.split(/,/),w=0;w<l.length;w++){if("*"===l[w]){t=[];break no_type_restriction}s=b.mimeTypes[l[w]],s&&b.inArray(s,t)===-1&&t.push(s)}t=t.join(","),p.settings.container&&(j=e(p.settings.container),"static"===b.getStyle(j,"position")&&(j.style.position="relative")),p.bind("UploadFile",function(y,B){var C,A;B.status!=b.DONE&&B.status!=b.FAILED&&y.state!=b.STOPPED&&(C=e("form_"+B.id),A=e("input_"+B.id),A.setAttribute("name",y.settings.file_data_name),C.setAttribute("action",y.settings.url),b.each(b.extend({name:B.target_name||B.name},y.settings.multipart_params),function(F,D){var E=a.createElement("input");b.extend(E,{type:"hidden",name:D,value:F}),C.insertBefore(E,C.firstChild)}),k=B,e("form_"+q).style.top="-1048575px",C.submit())}),p.bind("FileUploaded",function(y){y.refresh()}),p.bind("StateChanged",function(y){y.state==b.STARTED?u():y.state==b.STOPPED&&d.setTimeout(function(){b.removeEvent(n,"load",y.id),n.parentNode&&n.parentNode.removeChild(n)},0),b.each(y.files,function(B,A){if(B.status===b.DONE||B.status===b.FAILED){var C=e("form_"+B.id);C&&C.parentNode.removeChild(C)}})}),p.bind("Refresh",function(A){var G,B,C,D,y,H,I,F,E;G=e(A.settings.browse_button),G&&(y=b.getPos(G,e(A.settings.container)),H=b.getSize(G),I=e("form_"+q),F=e("input_"+q),b.extend(I.style,{top:y.y+"px",left:y.x+"px",width:H.w+"px",height:H.h+"px"}),A.features.triggerDialog&&("static"===b.getStyle(G,"position")&&b.extend(G.style,{position:"relative"}),E=parseInt(G.style.zIndex,10),isNaN(E)&&(E=0),b.extend(G.style,{zIndex:E}),b.extend(I.style,{zIndex:E-1})),C=A.settings.browse_button_hover,D=A.settings.browse_button_active,B=A.features.triggerDialog?G:I,C&&(b.addEvent(B,"mouseover",function(){b.addClass(G,C)},A.id),b.addEvent(B,"mouseout",function(){b.removeClass(G,C)},A.id)),D&&(b.addEvent(B,"mousedown",function(){b.addClass(G,D)},A.id),b.addEvent(a.body,"mouseup",function(){b.removeClass(G,D)},A.id)))}),f.bind("FilesRemoved",function(y,B){var A,C;for(A=0;A<B.length;A++)C=e("form_"+B[A].id),C&&C.parentNode.removeChild(C)}),f.bind("DisableBrowse",function(y,B){var A=a.getElementById("input_"+q);A&&(A.disabled=B)}),f.bind("Destroy",function(y){var A,B,C,D={inputContainer:"form_"+q,inputFile:"input_"+q,browseButton:y.settings.browse_button};for(A in D)B=e(D[A]),B&&b.removeAllEvents(B,y.id);b.removeAllEvents(a.body,y.id),b.each(z,function(F,E){C=e("form_"+F),C&&C.parentNode.removeChild(C)})}),v()}),g({success:!0})}})}(window,document,plupload);