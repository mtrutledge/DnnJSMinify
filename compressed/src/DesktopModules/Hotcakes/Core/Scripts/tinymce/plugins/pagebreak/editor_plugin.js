!function(){tinymce.create("tinymce.plugins.PageBreakPlugin",{init:function(b,d){var e,f='<img src="'+b.theme.url+'/img/trans.gif" class="mcePageBreak mceItemNoResize" />',a="mcePageBreak",c=b.getParam("pagebreak_separator","<!-- pagebreak -->");e=new RegExp(c.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(g){return"\\"+g}),"g"),b.addCommand("mcePageBreak",function(){b.execCommand("mceInsertContent",0,f)}),b.addButton("pagebreak",{title:"pagebreak.desc",cmd:a}),b.onInit.add(function(){b.theme.onResolveName&&b.theme.onResolveName.add(function(g,h){"IMG"==h.node.nodeName&&b.dom.hasClass(h.node,a)&&(h.name="pagebreak")})}),b.onClick.add(function(g,h){h=h.target,"IMG"===h.nodeName&&g.dom.hasClass(h,a)&&g.selection.select(h)}),b.onNodeChange.add(function(h,g,i){g.setActive("pagebreak","IMG"===i.nodeName&&h.dom.hasClass(i,a))}),b.onBeforeSetContent.add(function(g,h){h.content=h.content.replace(e,f)}),b.onPostProcess.add(function(g,h){h.get&&(h.content=h.content.replace(/<img[^>]+>/g,function(i){return i.indexOf('class="mcePageBreak')!==-1&&(i=c),i}))})},getInfo:function(){return{longname:"PageBreak",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/pagebreak",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("pagebreak",tinymce.plugins.PageBreakPlugin)}();