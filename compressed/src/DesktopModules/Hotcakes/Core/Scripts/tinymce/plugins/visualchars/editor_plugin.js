!function(){tinymce.create("tinymce.plugins.VisualChars",{init:function(a,b){var c=this;c.editor=a,a.addCommand("mceVisualChars",c._toggleVisualChars,c),a.addButton("visualchars",{title:"visualchars.desc",cmd:"mceVisualChars"}),a.onBeforeGetContent.add(function(d,e){c.state&&"raw"!=e.format&&!e.draft&&(c.state=!0,c._toggleVisualChars(!1))})},getInfo:function(){return{longname:"Visual characters",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/visualchars",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_toggleVisualChars:function(m){var a,g,l,c,f,p=this,k=p.editor,o=(k.getDoc(),k.getBody()),q=k.selection;if(p.state=!p.state,k.controlManager.setActive("visualchars",p.state),m&&(f=q.getBookmark()),p.state)for(a=[],tinymce.walk(o,function(b){3==b.nodeType&&b.nodeValue&&b.nodeValue.indexOf("Â ")!=-1&&a.push(b)},"childNodes"),g=0;g<a.length;g++){for(l=a[g].nodeValue,l=l.replace(/(\u00a0)/g,'<span data-mce-bogus="1" class="mceItemHidden mceItemNbsp">$1</span>'),c=k.dom.create("div",null,l);node=c.lastChild;)k.dom.insertAfter(node,a[g]);k.dom.remove(a[g])}else for(a=k.dom.select("span.mceItemNbsp",o),g=a.length-1;g>=0;g--)k.dom.remove(a[g],1);q.moveToBookmark(f)}}),tinymce.PluginManager.add("visualchars",tinymce.plugins.VisualChars)}();