!function(e){var b,a=/^\s*|\s*$/g,d="$1"==="B".replace(/A(.)|B/,"$1"),c={majorVersion:"3",minorVersion:"5.8",releaseDate:"2012-11-20",_init:function(){function h(i){return i.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(i.src)?(/_(src|dev)\.js/g.test(i.src)&&(s.suffix="_src"),(j=i.src.indexOf("?"))!=-1&&(s.query=i.src.substring(j+1)),s.baseURL=i.src.substring(0,i.src.lastIndexOf("/")),k&&s.baseURL.indexOf("://")==-1&&0!==s.baseURL.indexOf("/")&&(s.baseURL=k+s.baseURL),s.baseURL):null}var m,f,l,k,j,r,s=this,q=document,o=navigator,g=o.userAgent;if(s.isOpera=e.opera&&opera.buildNumber,s.isWebKit=/WebKit/.test(g),s.isIE=!s.isWebKit&&!s.isOpera&&/MSIE/gi.test(g)&&/Explorer/gi.test(o.appName),s.isIE6=s.isIE&&/MSIE [56]/.test(g),s.isIE7=s.isIE&&/MSIE [7]/.test(g),s.isIE8=s.isIE&&/MSIE [8]/.test(g),s.isIE9=s.isIE&&/MSIE [9]/.test(g),s.isGecko=!s.isWebKit&&/Gecko/.test(g),s.isMac=g.indexOf("Mac")!=-1,s.isAir=/adobeair/i.test(g),s.isIDevice=/(iPad|iPhone)/.test(g),s.isIOS5=s.isIDevice&&g.match(/AppleWebKit\/(\d*)/)[1]>=534,e.tinyMCEPreInit)return s.suffix=tinyMCEPreInit.suffix,s.baseURL=tinyMCEPreInit.base,void(s.query=tinyMCEPreInit.query);for(s.suffix="",f=q.getElementsByTagName("base"),m=0;m<f.length;m++)r=f[m].href,r&&(/^https?:\/\/[^\/]+$/.test(r)&&(r+="/"),k=r?r.match(/.*\//)[0]:"");for(f=q.getElementsByTagName("script"),m=0;m<f.length;m++)if(h(f[m]))return;if(l=q.getElementsByTagName("head")[0])for(f=l.getElementsByTagName("script"),m=0;m<f.length;m++)if(h(f[m]))return},is:function(g,f){return f?!("array"!=f||!c.isArray(g))||typeof g==f:g!==b},isArray:Array.isArray||function(f){return"[object Array]"===Object.prototype.toString.call(f)},makeMap:function(f,j,h){var g;for(f=f||[],j=j||",","string"==typeof f&&(f=f.split(j)),h=h||{},g=f.length;g--;)h[f[g]]={};return h},each:function(i,f,h){var j,g;if(!i)return 0;if(h=h||i,i.length!==b){for(j=0,g=i.length;j<g;j++)if(f.call(h,i[j],j,i)===!1)return 0}else for(j in i)if(i.hasOwnProperty(j)&&f.call(h,i[j],j,i)===!1)return 0;return 1},trim:function(f){return(f?""+f:"").replace(a,"")},create:function(o,f,j){var g,i,k,l,h,n=this,m=0;if(o=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(o),k=o[3].match(/(^|\.)(\w+)$/i)[2],i=n.createNS(o[3].replace(/\.\w+$/,""),j),!i[k]){if("static"==o[2])return i[k]=f,void(this.onCreate&&this.onCreate(o[2],o[3],i[k]));f[k]||(f[k]=function(){},m=1),i[k]=f[k],n.extend(i[k].prototype,f),o[5]&&(g=n.resolve(o[5]).prototype,l=o[5].match(/\.(\w+)$/i)[1],h=i[k],m?i[k]=function(){return g[l].apply(this,arguments)}:i[k]=function(){return this.parent=g[l],h.apply(this,arguments)},i[k].prototype[k]=i[k],n.each(g,function(p,q){i[k].prototype[q]=g[q]}),n.each(f,function(p,q){g[q]?i[k].prototype[q]=function(){return this.parent=g[q],p.apply(this,arguments)}:q!=k&&(i[k].prototype[q]=p)})),n.each(f.static,function(p,q){i[k][q]=p}),this.onCreate&&this.onCreate(o[2],o[3],i[k].prototype)}},walk:function(i,h,j,g){g=g||this,i&&(j&&(i=i[j]),c.each(i,function(k,f){return h.call(g,k,f,j)!==!1&&void c.walk(k,h,j,g)}))},createNS:function(j,h){var g,f;for(h=h||e,j=j.split("."),g=0;g<j.length;g++)f=j[g],h[f]||(h[f]={}),h=h[f];return h},resolve:function(j,h){var g,f;for(h=h||e,j=j.split("."),g=0,f=j.length;g<f&&(h=h[j[g]],h);g++);return h},addUnload:function(j,i){function k(){function f(){l.detachEvent("onstop",f),g&&g(),l=0}var l=document;"interactive"==l.readyState&&(l&&l.attachEvent("onstop",f),e.setTimeout(function(){l&&l.detachEvent("onstop",f)},0))}var g,h=this;return g=function(){var l,m,f=h.unloads;if(f){for(m in f)l=f[m],l&&l.func&&l.func.call(l.scope,1);e.detachEvent?(e.detachEvent("onbeforeunload",k),e.detachEvent("onunload",g)):e.removeEventListener&&e.removeEventListener("unload",g,!1),h.unloads=l=f=w=g=0,e.CollectGarbage&&CollectGarbage()}},j={func:j,scope:i||this},h.unloads?h.unloads.push(j):(e.attachEvent?(e.attachEvent("onunload",g),e.attachEvent("onbeforeunload",k)):e.addEventListener&&e.addEventListener("unload",g,!1),h.unloads=[j]),j},removeUnload:function(i){var g=this.unloads,h=null;return c.each(g,function(j,f){if(j&&j.func==i)return g.splice(f,1),h=i,!1}),h},explode:function(f,g){return!f||c.is(f,"array")?f:c.map(f.split(g||","),c.trim)},_addVer:function(g){var f;return this.query?(f=(g.indexOf("?")==-1?"?":"&")+this.query,g.indexOf("#")==-1?g+f:g.replace("#",f+"#")):g},_replace:function(h,f,g){return d?g.replace(h,function(){var k,l=f,j=arguments;for(k=0;k<j.length-2;k++)l=j[k]===b?l.replace(new RegExp("\\$"+k,"g"),""):l.replace(new RegExp("\\$"+k,"g"),j[k]);return l}):g.replace(h,f)}};c._init(),e.tinymce=e.tinyMCE=c}(window),function(f,e){var c,b=(e.is,/^(href|src|style)$/i);if(!f&&window.console)return console.log("Load jQuery first!");e.$=f,e.adapter={patchEditor:function(j){function h(m,n){var l=this;return n&&l.removeAttr("data-mce-style"),i.css.apply(l,arguments)}function g(m,n){var l=this;return b.test(m)?n!==c?(l.each(function(o,p){j.dom.setAttrib(p,m,n)}),l):l.attr("data-mce-"+m):i.attr.apply(l,arguments)}function k(l){return l.css!==h&&(l.css=h,l.attr=g,l.tinymce=j,l.pushStack=function(){return k(i.pushStack.apply(this,arguments))}),l}var i=f.fn;j.$=function(l,m){var n=j.getDoc();return k(f(l||n,n||m))}}},e.extend=f.extend,e.extend(e,{map:f.map,grep:function(g,h){return f.grep(g,h||function(){return 1})},inArray:function(g,h){return f.inArray(h,g||[])}});var a={"tinymce.dom.DOMUtils":{select:function(i,h){var g=this;return f.find(i,g.get(h)||g.get(g.settings.root_element)||g.doc,[])},is:function(h,g){return f(this.get(h)).is(g)}}};e.onCreate=function(g,i,h){e.extend(h,a[i])}}(window.jQuery,tinymce),tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,inDispatch:!1,Dispatcher:function(a){this.scope=a||this,this.listeners=[]},add:function(b,a){return this.listeners.push({cb:b,scope:a||this.scope}),b},addToTop:function(d,b){var a=this,c={cb:d,scope:b||a.scope};return a.inDispatch?a.listeners=[c].concat(a.listeners):a.listeners.unshift(c),d},remove:function(c){var b=this.listeners,a=null;return tinymce.each(b,function(e,d){if(c==e.cb)return a=e,b.splice(d,1),!1}),a},dispatch:function(){var e,c,f,a=this,b=arguments,d=a.listeners;for(a.inDispatch=!0,c=0;c<d.length&&(f=d[c],e=f.cb.apply(f.scope,b.length>0?b:[f.scope]),e!==!1);c++);return a.inDispatch=!1,e}}),function(){var a=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(e,g){var c,h,f=this;return e=tinymce.trim(e),g=f.settings=g||{},/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e)?void(f.source=e):(0===e.indexOf("/")&&0!==e.indexOf("//")&&(e=(g.base_uri?g.base_uri.protocol||"http":"http")+"://mce_host"+e),/^[\w\-]*:?\/\//.test(e)||(h=g.base_uri?g.base_uri.path:new tinymce.util.URI(location.href).directory,e=(g.base_uri&&g.base_uri.protocol||"http")+"://mce_host"+f.toAbsPath(h,e)),e=e.replace(/@@/g,"(mce_at)"),e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e),a(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(b,j){var k=e[j];k&&(k=k.replace(/\(mce_at\)/g,"@@")),f[b]=k}),c=g.base_uri,void(c&&(f.protocol||(f.protocol=c.protocol),f.userInfo||(f.userInfo=c.userInfo),f.port||"mce_host"!==f.host||(f.port=c.port),f.host&&"mce_host"!==f.host||(f.host=c.host),f.source="")))},setPath:function(c){var b=this;c=/^(.*?)\/?(\w+)?$/.exec(c),b.path=c[0],b.directory=c[1],b.file=c[2],b.source="",b.getURI()},toRelative:function(b){var f,d=this;if("./"===b)return b;if(b=new tinymce.util.URI(b,{base_uri:d}),"mce_host"!=b.host&&d.host!=b.host&&b.host||d.port!=b.port||d.protocol!=b.protocol)return b.getURI();var c=d.getURI(),e=b.getURI();return c==e||"/"==c.charAt(c.length-1)&&c.substr(0,c.length-1)==e?c:(f=d.toRelPath(d.path,b.path),b.query&&(f+="?"+b.query),b.anchor&&(f+="#"+b.anchor),f)},toAbsolute:function(b,c){return b=new tinymce.util.URI(b,{base_uri:this}),b.getURI(this.host==b.host&&this.protocol==b.protocol?c:0)},toRelPath:function(g,h){var c,e,b,f=0,d="";if(g=g.substring(0,g.lastIndexOf("/")),g=g.split("/"),c=h.split("/"),g.length>=c.length)for(e=0,b=g.length;e<b;e++)if(e>=c.length||g[e]!=c[e]){f=e+1;break}if(g.length<c.length)for(e=0,b=c.length;e<b;e++)if(e>=g.length||g[e]!=c[e]){f=e+1;break}if(1===f)return h;for(e=0,b=g.length-(f-1);e<b;e++)d+="../";for(e=f-1,b=c.length;e<b;e++)d+=e!=f-1?"/"+c[e]:c[e];return d},toAbsPath:function(e,f){var c,d,g,b=0,h=[];for(d=/\/$/.test(f)?"/":"",e=e.split("/"),f=f.split("/"),a(e,function(i){i&&h.push(i)}),e=h,c=f.length-1,h=[];c>=0;c--)0!==f[c].length&&"."!==f[c]&&(".."!==f[c]?b>0?b--:h.push(f[c]):b++);return c=e.length-b,g=c<=0?h.reverse().join("/"):e.slice(0,c).join("/")+"/"+h.reverse().join("/"),0!==g.indexOf("/")&&(g="/"+g),d&&g.lastIndexOf("/")!==g.length-1&&(g+=d),g},getURI:function(d){var c,b=this;return b.source&&!d||(c="",d||(b.protocol&&(c+=b.protocol+"://"),b.userInfo&&(c+=b.userInfo+"@"),b.host&&(c+=b.host),b.port&&(c+=":"+b.port)),b.path&&(c+=b.path),b.query&&(c+="?"+b.query),b.anchor&&(c+="#"+b.anchor),b.source=c),b.source}})}(),function(){var a=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(d){var c,b=this.get(d);return b&&a(b.split("&"),function(e){e=e.split("="),c=c||{},c[unescape(e[0])]=unescape(e[1])}),c},setHash:function(j,b,g,f,i,c){var h="";a(b,function(e,d){h+=(h?"&":"")+escape(d)+"="+escape(e)}),this.set(j,h,g,f,i,c)},get:function(i){var g,d,h=document.cookie,f=i+"=";if(h){if(d=h.indexOf("; "+f),d==-1){if(d=h.indexOf(f),0!==d)return null}else d+=2;return g=h.indexOf(";",d),g==-1&&(g=h.length),unescape(h.substring(d+f.length,g))}},set:function(i,b,g,f,h,c){document.cookie=i+"="+escape(b)+(g?"; expires="+g.toGMTString():"")+(f?"; path="+escape(f):"")+(h?"; domain="+h:"")+(c?"; secure":"")},remove:function(c,e,d){var b=new Date;b.setTime(b.getTime()-1e3),this.set(c,"",b,e,d)}})}(),function(){function serialize(o,quote){var i,v,t,name;if(quote=quote||'"',null==o)return"null";if(t=typeof o,"string"==t)return v="\bb\tt\nn\ff\rr\"\"''\\\\",quote+o.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(a,b){return'"'===quote&&"'"===a?a:(i=v.indexOf(b),i+1?"\\"+v.charAt(i+1):(a=b.charCodeAt().toString(16),"\\u"+"0000".substring(a.length)+a))})+quote;if("object"==t){if(o.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(o)){for(i=0,v="[";i<o.length;i++)v+=(i>0?",":"")+serialize(o[i],quote);return v+"]"}v="{";for(name in o)o.hasOwnProperty(name)&&(v+="function"!=typeof o[name]?(v.length>1?","+quote:quote)+name+quote+":"+serialize(o[name],quote):"");return v+"}"}return""+o}tinymce.util.JSON={serialize:serialize,parse:function(s){try{return eval("("+s+")")}catch(ex){}}}}(),tinymce.create("static tinymce.util.XHR",{send:function(g){function f(){!g.async||4==a.readyState||h++>1e4?(g.success&&h<1e4&&200==a.status?g.success.call(g.success_scope,""+a.responseText,a,g):g.error&&g.error.call(g.error_scope,h>1e4?"TIMED_OUT":"GENERAL",a,g),a=null):b.setTimeout(f,10)}function d(i){a=0;try{a=new ActiveXObject(i)}catch(c){}return a}var a,e,b=window,h=0;if(g.scope=g.scope||this,g.success_scope=g.success_scope||g.scope,g.error_scope=g.error_scope||g.scope,g.async=g.async!==!1,g.data=g.data||"",a=b.XMLHttpRequest?new XMLHttpRequest:d("Microsoft.XMLHTTP")||d("Msxml2.XMLHTTP")){if(a.overrideMimeType&&a.overrideMimeType(g.content_type),a.open(g.type||(g.data?"POST":"GET"),g.url,g.async),g.content_type&&a.setRequestHeader("Content-Type",g.content_type),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.send(g.data),!g.async)return f();e=b.setTimeout(f,10)}}}),function(){var c=tinymce.extend,b=tinymce.util.JSON,a=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(d){this.settings=c({},d),this.count=0},send:function(f){var e=f.error,d=f.success;f=c(this.settings,f),f.success=function(h,g){h=b.parse(h),"undefined"==typeof h&&(h={error:"JSON Parse error."}),h.error?e.call(f.error_scope||f.scope,h.error,g):d.call(f.success_scope||f.scope,h.result)},f.error=function(h,g){e&&e.call(f.error_scope||f.scope,h,g)},f.data=b.serialize({id:f.id||"c"+this.count++,method:f.method,params:f.params}),f.content_type="application/json",a.send(f)},static:{sendRPC:function(d){return(new tinymce.util.JSONRequest).send(d)}}})}(),function(a){a.VK={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(b){return b.shiftKey||b.ctrlKey||b.altKey},metaKeyPressed:function(b){return a.isMac?b.metaKey:b.ctrlKey&&!b.altKey}}}(tinymce),tinymce.util.Quirks=function(a){function A(N,M){try{a.getDoc().execCommand(N,!1,M)}catch(L){}}function n(){var L=a.getDoc().documentMode;return L?L:6}function z(L){return L.isDefaultPrevented()}function J(){function L(O){var M,Q,N,P;if(M=l.getRng(),Q=e.getParent(M.startContainer,e.isBlock),O&&(Q=e.getNext(Q,e.isBlock)),Q){for(N=Q.firstChild;N&&3==N.nodeType&&0===N.nodeValue.length;)N=N.nextSibling;N&&"SPAN"===N.nodeName&&(P=N.cloneNode(!1))}E(e.select("span",Q),function(R){R.setAttribute("data-mce-mark","1")}),a.getDoc().execCommand(O?"ForwardDelete":"Delete",!1,null),Q=e.getParent(M.startContainer,e.isBlock),E(e.select("span",Q),function(R){var S=l.getBookmark();P?e.replace(P.cloneNode(!1),R,!0):R.getAttribute("data-mce-mark")?R.removeAttribute("data-mce-mark"):e.remove(R,!0),l.moveToBookmark(S)})}a.onKeyDown.add(function(M,O){var N;N=O.keyCode==k,z(O)||!N&&O.keyCode!=f||j.modifierPressed(O)||(O.preventDefault(),L(N))}),a.addCommand("Delete",function(){L()})}function q(){function L(O){var N=e.create("body"),P=O.cloneContents();return N.appendChild(P),l.serializer.serialize(N,{format:"html"})}function M(N){var P=L(N),Q=e.createRng();Q.selectNode(a.getBody());var O=L(Q);return P===O}a.onKeyDown.add(function(O,Q){var N,P=Q.keyCode;if(!z(Q)&&(P==k||P==f)){if(N=O.selection.isCollapsed(),N&&!e.isEmpty(O.getBody()))return;if(tinymce.isIE&&!N)return;if(!N&&!M(O.selection.getRng()))return;O.setContent(""),O.selection.setCursorLocation(O.getBody(),0),O.nodeChanged()}})}function I(){a.onKeyDown.add(function(L,M){!z(M)&&65==M.keyCode&&j.metaKeyPressed(M)&&(M.preventDefault(),L.execCommand("SelectAll"))})}function K(){a.settings.content_editable||(e.bind(a.getDoc(),"focusin",function(L){l.setRng(l.getRng())}),e.bind(a.getDoc(),"mousedown",function(L){L.target==a.getDoc().documentElement&&(a.getWin().focus(),l.setRng(l.getRng()))}))}function B(){a.onKeyDown.add(function(L,O){if(!z(O)&&O.keyCode===f&&l.isCollapsed()&&0===l.getRng(!0).startOffset){var N=l.getNode(),M=N.previousSibling;M&&M.nodeName&&"hr"===M.nodeName.toLowerCase()&&(e.remove(M),tinymce.dom.Event.cancel(O))}})}function y(){Range.prototype.getClientRects||a.onMouseDown.add(function(M,N){if(!z(N)&&"HTML"===N.target.nodeName){var L=M.getBody();L.blur(),setTimeout(function(){L.focus()},0)}})}function h(){a.onClick.add(function(L,M){M=M.target,/^(IMG|HR)$/.test(M.nodeName)&&l.getSel().setBaseAndExtent(M,0,M,1),"A"==M.nodeName&&e.hasClass(M,"mceItemAnchor")&&l.select(M),L.nodeChanged()})}function c(){function M(){var O=e.getAttribs(l.getStart().cloneNode(!1));return function(){var P=l.getStart();P!==a.getBody()&&(e.setAttrib(P,"style",null),E(O,function(Q){P.setAttributeNode(Q.cloneNode(!0))}))}}function L(){return!l.isCollapsed()&&e.getParent(l.getStart(),e.isBlock)!=e.getParent(l.getEnd(),e.isBlock)}function N(O,P){return P.preventDefault(),!1}a.onKeyPress.add(function(O,Q){var P;if(!z(Q)&&(8==Q.keyCode||46==Q.keyCode)&&L())return P=M(),O.getDoc().execCommand("delete",!1,null),P(),Q.preventDefault(),!1}),e.bind(a.getDoc(),"cut",function(P){var O;!z(P)&&L()&&(O=M(),a.onKeyUp.addToTop(N),setTimeout(function(){O(),a.onKeyUp.remove(N)},0))})}function b(){var M,L;e.bind(a.getDoc(),"selectionchange",function(){L&&(clearTimeout(L),L=0),L=window.setTimeout(function(){var N=l.getRng();M&&tinymce.dom.RangeUtils.compareRanges(N,M)||(a.nodeChanged(),M=N)},50)})}function x(){document.body.setAttribute("role","application")}function t(){a.onKeyDown.add(function(L,N){if(!z(N)&&N.keyCode===f&&l.isCollapsed()&&0===l.getRng(!0).startOffset){var M=l.getNode().previousSibling;if(M&&M.nodeName&&"table"===M.nodeName.toLowerCase())return tinymce.dom.Event.cancel(N)}})}function C(){n()>7||(A("RespectVisibilityInDesign",!0),a.contentStyles.push(".mceHideBrInPre pre br {display: none}"),e.addClass(a.getBody(),"mceHideBrInPre"),v.addNodeFilter("pre",function(L,N){for(var Q,M,R,P,O=L.length;O--;)for(Q=L[O].getAll("br"),M=Q.length;M--;)R=Q[M],P=R.prev,P&&3===P.type&&"\n"!=P.value.charAt(P.value-1)?P.value+="\n":R.parent.insert(new tinymce.html.Node("#text",3),R,!0).value="\n"}),o.addNodeFilter("pre",function(L,N){for(var Q,M,R,P,O=L.length;O--;)for(Q=L[O].getAll("br"),M=Q.length;M--;)R=Q[M],P=R.prev,P&&3==P.type&&(P.value=P.value.replace(/\r?\n$/,""))}))}function g(){e.bind(a.getBody(),"mouseup",function(N){var M,L=l.getNode();"IMG"==L.nodeName&&((M=e.getStyle(L,"width"))&&(e.setAttrib(L,"width",M.replace(/[^0-9%]+/g,"")),e.setStyle(L,"width","")),(M=e.getStyle(L,"height"))&&(e.setAttrib(L,"height",M.replace(/[^0-9%]+/g,"")),e.setStyle(L,"height","")))})}function d(){a.onKeyDown.add(function(R,S){var Q,L,M,O,P,T,N;Q=S.keyCode==k,z(S)||!Q&&S.keyCode!=f||j.modifierPressed(S)||(L=l.getRng(),M=L.startContainer,O=L.startOffset,N=L.collapsed,3==M.nodeType&&M.nodeValue.length>0&&(0===O&&!N||N&&O===(Q?0:1))&&(nonEmptyElements=R.schema.getNonEmptyElements(),S.preventDefault(),P=e.create("br",{id:"__tmp"}),M.parentNode.insertBefore(P,M),R.getDoc().execCommand(Q?"ForwardDelete":"Delete",!1,null),M=l.getRng().startContainer,T=M.previousSibling,T&&1==T.nodeType&&!e.isBlock(T)&&e.isEmpty(T)&&!nonEmptyElements[T.nodeName.toLowerCase()]&&e.remove(T),e.remove("__tmp")))})}function G(){a.onKeyDown.add(function(P,Q){var N,M,R,L,O;if(!z(Q)&&Q.keyCode==j.BACKSPACE&&(N=l.getRng(),M=N.startContainer,R=N.startOffset,L=e.getRoot(),O=M,N.collapsed&&0===R)){for(;O&&O.parentNode&&O.parentNode.firstChild==O&&O.parentNode!=L;)O=O.parentNode;"BLOCKQUOTE"===O.tagName&&(P.formatter.toggle("blockquote",null,O),N=e.createRng(),N.setStart(M,0),N.setEnd(M,0),l.setRng(N))}})}function F(){function L(){a._refreshContentEditable(),A("StyleWithCSS",!1),A("enableInlineTableEditing",!1),H.object_resizing||A("enableObjectResizing",!1)}H.readonly||(a.onBeforeExecCommand.add(L),a.onMouseDown.add(L))}function s(){function L(M,N){E(e.select("a"),function(Q){var O=Q.parentNode,P=e.getRoot();if(O.lastChild===Q){for(;O&&!e.isBlock(O);){if(O.parentNode.lastChild!==O||O===P)return;O=O.parentNode}e.add(O,"br",{"data-mce-bogus":1})}})}a.onExecCommand.add(function(M,N){"CreateLink"===N&&L(M)}),a.onSetContent.add(l.onSetContent.add(L))}function m(){H.forced_root_block&&a.onInit.add(function(){A("DefaultParagraphSeparator",H.forced_root_block)})}function p(){function L(N,M){N&&M.initial||a.execCommand("mceRepaint")}a.onUndo.add(L),a.onRedo.add(L),a.onSetContent.add(L)}function i(){a.onKeyDown.add(function(M,N){var L;z(N)||N.keyCode!=f||(L=M.getDoc().selection.createRange(),L&&L.item&&(N.preventDefault(),M.undoManager.beforeChange(),e.remove(L.item(0)),M.undoManager.add()))})}function r(){var L;n()>=10&&(L="",E("p div h1 h2 h3 h4 h5 h6".split(" "),function(M,N){L+=(N>0?",":"")+M+":empty"}),a.contentStyles.push(L+"{padding-right: 1px !important}"))}function u(){function R(ah){var ag,af;ag=ah.screenX-ab,af=ah.screenY-Z,W=ag*Y[2]+ac,V=af*Y[3]+O,W=W<5?5:W,V=V<5?5:V,(j.modifierPressed(ah)||"IMG"==ad.nodeName&&Y[2]*Y[3]!==0)&&(W=Math.round(V/P),V=Math.round(W*P)),e.setStyles(L,{width:W,height:V}),Y[2]<0&&L.clientWidth<=W&&e.setStyle(L,"left",N+(ac-W)),Y[3]<0&&L.clientHeight<=V&&e.setStyle(L,"top",M+(O-V))}function ae(){function af(ag,ah){ah&&(ad.style[ag]||!a.schema.isValid(ad.nodeName.toLowerCase(),ag)?e.setStyle(ad,ag,ah):e.setAttrib(ad,ag,ah))}af("width",W),af("height",V),e.unbind(T,"mousemove",R),e.unbind(T,"mouseup",ae),X!=T&&(e.unbind(X,"mousemove",R),e.unbind(X,"mouseup",ae)),e.remove(L),Q(ad)}function Q(ai){var ag,ah,af;S(),ag=e.getPos(ai),N=ag.x,M=ag.y,ah=ai.offsetWidth,af=ai.offsetHeight,ad!=ai&&(ad=ai,W=V=0),E(aa,function(al,aj){var ak;ak=e.get("mceResizeHandle"+aj),ak?e.show(ak):(ak=e.add(T.documentElement,"div",{id:"mceResizeHandle"+aj,class:"mceResizeHandle",style:"cursor:"+aj+"-resize; margin:0; padding:0"}),e.bind(ak,"mousedown",function(am){am.preventDefault(),ae(),ab=am.screenX,Z=am.screenY,ac=ad.clientWidth,O=ad.clientHeight,P=O/ac,Y=al,L=ad.cloneNode(!0),e.addClass(L,"mceClonedResizable"),e.setStyles(L,{left:N,top:M,margin:0}),T.documentElement.appendChild(L),e.bind(T,"mousemove",R),e.bind(T,"mouseup",ae),X!=T&&(e.bind(X,"mousemove",R),e.bind(X,"mouseup",ae))})),e.setStyles(ak,{left:ah*al[0]+N-ak.offsetWidth/2,top:af*al[1]+M-ak.offsetHeight/2})}),tinymce.isOpera||"IMG"!=ad.nodeName||ad.setAttribute("data-mce-selected","1")}function S(){ad&&ad.removeAttribute("data-mce-selected");for(var af in aa)e.hide("mceResizeHandle"+af)}function U(){var af=e.getParent(l.getNode(),"table,img");E(e.select("img[data-mce-selected]"),function(ag){ag.removeAttribute("data-mce-selected")}),af?Q(af):S()}var N,M,ad,L,Y,ab,Z,ac,O,P,aa,W,V,X=document,T=a.getDoc();H.object_resizing&&H.webkit_fake_resize!==!1&&(A("enableObjectResizing",!1),aa={n:[.5,0,0,-1],e:[1,.5,1,0],s:[.5,1,0,1],w:[0,.5,-1,0],nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},a.contentStyles.push(".mceResizeHandle {position: absolute;border: 1px solid black;background: #FFF;width: 5px;height: 5px;z-index: 10000}.mceResizeHandle:hover {background: #000}img[data-mce-selected] {outline: 1px solid black}img.mceClonedResizable, table.mceClonedResizable {position: absolute;outline: 1px dashed black;opacity: .5;z-index: 10000}"),a.onNodeChange.add(U),e.bind(T,"selectionchange",U),a.serializer.addAttributeFilter("data-mce-selected",function(af,ag){for(var ah=af.length;ah--;)af[ah].attr(ag,null)}))}function D(){n()<9&&(v.addNodeFilter("noscript",function(L){for(var N,O,M=L.length;M--;)N=L[M],O=N.firstChild,O&&N.attr("data-mce-innertext",O.value)}),o.addNodeFilter("noscript",function(L){for(var N,P,O,M=L.length;M--;)N=L[M],P=L[M].firstChild,P?P.value=tinymce.html.Entities.decode(P.value):(O=N.attributes.map["data-mce-innertext"],O&&(N.attr("data-mce-innertext",null),P=new tinymce.html.Node("#text",3),P.value=O,P.raw=!0,N.append(P)))}))}var j=tinymce.VK,f=j.BACKSPACE,k=j.DELETE,e=a.dom,l=a.selection,H=a.settings,v=a.parser,o=a.serializer,E=tinymce.each;t(),G(),q(),tinymce.isWebKit&&(d(),J(),K(),h(),m(),tinymce.isIDevice?b():(u(),I())),tinymce.isIE&&(B(),x(),C(),g(),i(),r(),D()),tinymce.isGecko&&(B(),y(),c(),F(),s(),p()),tinymce.isOpera&&u()},function(j){function h(l){var m;return m=document.createElement("div"),m.innerHTML=l,m.textContent||m.innerText||l}function e(m,p){var n,o,l,q={};if(m){for(m=m.split(","),p=p||10,n=0;n<m.length;n+=2)o=String.fromCharCode(parseInt(m[n],p)),g[o]||(l="&"+m[n+1]+";",q[o]=l,q[l]=o);return q}}var a,g,d,k=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,b=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,f=/[<>&\"\']/g,c=/&(#x|#)?([\w]+);/g,i={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};g={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"},d={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},a=e("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),j.html=j.html||{},j.html.Entities={encodeRaw:function(m,l){return m.replace(l?k:b,function(n){return g[n]||n})},encodeAllRaw:function(l){return(""+l).replace(f,function(m){return g[m]||m})},encodeNumeric:function(m,l){return m.replace(l?k:b,function(n){return n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":g[n]||"&#"+n.charCodeAt(0)+";"})},encodeNamed:function(n,l,m){return m=m||a,n.replace(l?k:b,function(o){return g[o]||m[o]||o})},getEncodeFunc:function(l,o){function m(r,q){return r.replace(q?k:b,function(s){return g[s]||o[s]||"&#"+s.charCodeAt(0)+";"||s})}function n(r,q){return p.encodeNamed(r,q,o)}var p=j.html.Entities;return o=e(o)||a,l=j.makeMap(l.replace(/\+/g,",")),l.named&&l.numeric?m:l.named?o?n:p.encodeNamed:l.numeric?p.encodeNumeric:p.encodeRaw},decode:function(l){return l.replace(c,function(n,m,o){return m?(o=parseInt(o,2===m.length?16:10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(1023&o))):i[o]||String.fromCharCode(o)):d[n]||a[n]||h(n)})}}}(tinymce),tinymce.html.Styles=function(d,f){function c(n,q,p,i){function o(r){return r=parseInt(r).toString(16),r.length>1?r:"0"+r}return"#"+o(q)+o(p)+o(i)}var e,g,j,k=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,h=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,b=/\s*([^:]+):\s*([^;]+);?/g,l=/\s+$/,a={};for(d=d||{},j="\\\" \\' \\; \\: ; : \ufeff".split(" "),g=0;g<j.length;g++)a[j[g]]="\ufeff"+g,a["\ufeff"+g]=j[g];return{toHex:function(i){return i.replace(k,c)},parse:function(s){function p(D,G){var F,C,B,E;F=z[D+"-top"+G],F&&(C=z[D+"-right"+G],F==C&&(B=z[D+"-bottom"+G],C==B&&(E=z[D+"-left"+G],B==E&&(z[D+G]=E,delete z[D+"-top"+G],delete z[D+"-right"+G],delete z[D+"-bottom"+G],delete z[D+"-left"+G]))))}function u(C){var B,D=z[C];if(D&&!(D.indexOf(" ")<0)){for(D=D.split(" "),B=D.length;B--;)if(D[B]!==D[0])return!1;return z[C]=D[0],!0}}function A(D,C,B,E){u(C)&&u(B)&&u(E)&&(z[D]=z[C]+" "+z[B]+" "+z[E],delete z[C],delete z[B],delete z[E])}function t(B){return r=!0,a[B]}function i(C,B){return r&&(C=C.replace(/\uFEFF[0-9]/g,function(D){return a[D]})),B||(C=C.replace(/\\([\'\";:])/g,"$1")),C}function o(C,B,F,E,G,D){return(G=G||D)?(G=i(G),"'"+G.replace(/\'/g,"\\'")+"'"):(B=i(B||F||E),v&&(B=v.call(y,B,"style")),"url('"+B.replace(/\'/g,"\\'")+"')")}var q,n,x,r,z={},v=d.url_converter,y=d.url_converter_scope||this;if(s){for(s=s.replace(/\\[\"\';:\uFEFF]/g,t).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(B){return B.replace(/[;:]/g,t)});q=b.exec(s);)n=q[1].replace(l,"").toLowerCase(),x=q[2].replace(l,""),n&&x.length>0&&("font-weight"===n&&"700"===x?x="bold":"color"!==n&&"background-color"!==n||(x=x.toLowerCase()),x=x.replace(k,c),x=x.replace(h,o),z[n]=r?i(x,!0):x),b.lastIndex=q.index+q[0].length;p("border",""),p("border","-width"),p("border","-color"),p("border","-style"),p("padding",""),p("margin",""),A("border","border-width","border-style","border-color"),"medium none"===z.border&&delete z.border}return z},serialize:function(p,r){function i(t){var x,u,s,v;if(x=f.styles[t])for(u=0,s=x.length;u<s;u++)t=x[u],v=p[t],v!==e&&v.length>0&&(o+=(o.length>0?" ":"")+t+": "+v+";")}var n,q,o="";if(r&&f&&f.styles)i("*"),i(r);else for(n in p)q=p[n],q!==e&&q.length>0&&(o+=(o.length>0?" ":"")+n+": "+q+";");return o}}},function(f){function d(j,i){return j.split(i||",")}function h(m,l){function i(n){return n.replace(/[A-Z]+/g,function(o){return i(m[o])})}var j,k={};for(j in m)m.hasOwnProperty(j)&&(m[j]=i(m[j]));return i(l).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(q,o,n,p){n=d(n,"|"),k[o]={attributes:e(n),attributesOrder:n,children:e(p,"|",{"#comment":{}})}}),k}function b(){var i=a.html5;return i||(i=a.html5=h({A:"id|accesskey|class|dir|draggable|item|hidden|itemprop|role|spellcheck|style|subject|title|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"#|a|abbr|area|audio|b|bdo|br|button|canvas|cite|code|command|datalist|del|dfn|em|embed|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|meta|meter|noscript|object|output|progress|q|ruby|samp|script|select|small|span|strong|sub|sup|svg|textarea|time|var|video|wbr",C:"#|a|abbr|area|address|article|aside|audio|b|bdo|blockquote|br|button|canvas|cite|code|command|datalist|del|details|dfn|dialog|div|dl|em|embed|fieldset|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|menu|meta|meter|nav|noscript|ol|object|output|p|pre|progress|q|ruby|samp|script|section|select|small|span|strong|style|sub|sup|svg|table|textarea|time|ul|var|video"},"html[A|manifest][body|head]head[A][base|command|link|meta|noscript|script|style|title]title[A][#]base[A|href|target][]link[A|href|rel|media|type|sizes][]meta[A|http-equiv|name|content|charset][]style[A|type|media|scoped][#]script[A|charset|type|src|defer|async][#]noscript[A][C]body[A][C]section[A][C]nav[A][C]article[A][C]aside[A][C]h1[A][B]h2[A][B]h3[A][B]h4[A][B]h5[A][B]h6[A][B]hgroup[A][h1|h2|h3|h4|h5|h6]header[A][C]footer[A][C]address[A][C]p[A][B]br[A][]pre[A][B]dialog[A][dd|dt]blockquote[A|cite][C]ol[A|start|reversed][li]ul[A][li]li[A|value][C]dl[A][dd|dt]dt[A][B]dd[A][C]a[A|href|target|ping|rel|media|type][B]em[A][B]strong[A][B]small[A][B]cite[A][B]q[A|cite][B]dfn[A][B]abbr[A][B]code[A][B]var[A][B]samp[A][B]kbd[A][B]sub[A][B]sup[A][B]i[A][B]b[A][B]mark[A][B]progress[A|value|max][B]meter[A|value|min|max|low|high|optimum][B]time[A|datetime][B]ruby[A][B|rt|rp]rt[A][B]rp[A][B]bdo[A][B]span[A][B]ins[A|cite|datetime][B]del[A|cite|datetime][B]figure[A][C|legend|figcaption]figcaption[A][C]img[A|alt|src|height|width|usemap|ismap][]iframe[A|name|src|height|width|sandbox|seamless][]embed[A|src|height|width|type][]object[A|data|type|height|width|usemap|name|form|classid][param]param[A|name|value][]details[A|open][C|legend]command[A|type|label|icon|disabled|checked|radiogroup][]menu[A|type|label][C|li]legend[A][C|B]div[A][C]source[A|src|type|media][]audio[A|src|autobuffer|autoplay|loop|controls][source]video[A|src|autobuffer|autoplay|loop|controls|width|height|poster][source]hr[A][]form[A|accept-charset|action|autocomplete|enctype|method|name|novalidate|target][C]fieldset[A|disabled|form|name][C|legend]label[A|form|for][B]input[A|type|accept|alt|autocomplete|autofocus|checked|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|height|list|max|maxlength|min|multiple|pattern|placeholder|readonly|required|size|src|step|width|files|value|name][]button[A|autofocus|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|name|value|type][B]select[A|autofocus|disabled|form|multiple|name|size][option|optgroup]datalist[A][B|option]optgroup[A|disabled|label][option]option[A|disabled|selected|label|value][]textarea[A|autofocus|disabled|form|maxlength|name|placeholder|readonly|required|rows|cols|wrap][]keygen[A|autofocus|challenge|disabled|form|keytype|name][]output[A|for|form|name][B]canvas[A|width|height][]map[A|name][B|C]area[A|shape|coords|href|alt|target|media|rel|ping|type][]mathml[A][]svg[A][]table[A|border][caption|colgroup|thead|tfoot|tbody|tr]caption[A][C]colgroup[A|span][col]col[A|span][]thead[A][tr]tfoot[A][tr]tbody[A][tr]tr[A][th|td]th[A|headers|rowspan|colspan|scope][B]td[A|headers|rowspan|colspan][C]wbr[A][]")),
i}function c(){var i=a.html4;return i||(i=a.html4=h({Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]")),i}var a={},e=f.makeMap,g=f.each;f.html.Schema=function(A){function m(F,E,H){var G=A[F];return G?G=e(G,",",e(G.toUpperCase()," ")):(G=a[F],G||(G=e(E," ",e(E.toUpperCase()," ")),G=f.extend(G,H),a[F]=G)),G}function i(E){return new RegExp("^"+E.replace(/([?+*])/g,".$1")+"$")}function C(L){var K,G,Z,V,F,I,U,X,Q,Y,ac,O,J,W,E,S,H,ad,T,N=/^([#+\-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,R=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,M=/[*?+]/;if(L)for(L=d(L),s["@"]&&(S=s["@"].attributes,H=s["@"].attributesOrder),K=0,G=L.length;K<G;K++)if(F=N.exec(L[K])){if(W=F[1],Q=F[2],E=F[3],X=F[4],O={},J=[],I={attributes:O,attributesOrder:J},"#"===W&&(I.paddEmpty=!0),"-"===W&&(I.removeEmpty=!0),S){for(ad in S)O[ad]=S[ad];J.push.apply(J,H)}if(X)for(X=d(X,"|"),Z=0,V=X.length;Z<V;Z++)if(F=R.exec(X[Z])){if(U={},ac=F[1],Y=F[2].replace(/::/g,":"),W=F[3],T=F[4],"!"===ac&&(I.attributesRequired=I.attributesRequired||[],I.attributesRequired.push(Y),U.required=!0),"-"===ac){delete O[Y],J.splice(f.inArray(J,Y),1);continue}W&&("="===W&&(I.attributesDefault=I.attributesDefault||[],I.attributesDefault.push({name:Y,value:T}),U.defaultValue=T),":"===W&&(I.attributesForced=I.attributesForced||[],I.attributesForced.push({name:Y,value:T}),U.forcedValue=T),"<"===W&&(U.validValues=e(T,"?"))),M.test(Y)?(I.attributePatterns=I.attributePatterns||[],U.pattern=i(Y),I.attributePatterns.push(U)):(O[Y]||J.push(Y),O[Y]=U)}S||"@"!=Q||(S=O,H=J),E&&(I.outputName=Q,s[E]=I),M.test(Q)?(I.pattern=i(Q),j.push(I)):s[Q]=I}}function t(E){s={},j=[],C(E),g(y,function(G,F){k[F]=G.children})}function l(F){var E=/^(~)?(.+)$/;F&&g(d(F),function(J){var H=E.exec(J),I="~"===H[1],K=I?"span":"div",G=H[2];k[G]=k[K],p[G]=K,I||(v[G.toUpperCase()]={},v[G]={}),s[G]||(s[G]=s[K]),g(k,function(L,M){L[K]&&(L[G]=L[K])})})}function x(F){var E=/^([+\-]?)(\w+)\[([^\]]+)\]$/;F&&g(d(F),function(J){var G,H,I=E.exec(J);I&&(H=I[1],G=H?k[I[2]]:k[I[2]]={"#comment":{}},G=k[I[2]],g(d(I[3],"|"),function(K){"-"===H?delete G[K]:G[K]={}}))})}function B(E){var F,G=s[E];if(G)return G;for(F=j.length;F--;)if(G=j[F],G.pattern.test(E))return G}var D,y,o,q,z,r,v,n,u=this,s={},k={},j=[],p={};A=A||{},y="html5"==A.schema?b():c(),A.verify_html===!1&&(A.valid_elements="*[*]"),A.valid_styles&&(D={},g(A.valid_styles,function(F,E){D[E]=f.explode(F)})),o=m("whitespace_elements","pre script noscript style textarea"),q=m("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),z=m("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr"),r=m("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),n=m("non_empty_elements","td th iframe video audio object",z),textBlockElementsMap=m("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),v=m("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex samp option datalist select optgroup",textBlockElementsMap),A.valid_elements?t(A.valid_elements):(g(y,function(F,E){s[E]={attributes:F.attributes,attributesOrder:F.attributesOrder},k[E]=F.children}),"html5"!=A.schema&&g(d("strong/b,em/i"),function(E){E=d(E,"/"),s[E[1]].outputName=E[0]}),s.img.attributesDefault=[{name:"alt",value:""}],g(d("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr,strong,em,b,i"),function(E){s[E]&&(s[E].removeEmpty=!0)}),g(d("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(E){s[E].paddEmpty=!0})),l(A.custom_elements),x(A.valid_children),C(A.extended_valid_elements),x("+ol[ul|ol],+ul[ul|ol]"),A.invalid_elements&&f.each(f.explode(A.invalid_elements),function(E){s[E]&&delete s[E]}),B("span")||C("span[!data-mce-type|*]"),u.children=k,u.styles=D,u.getBoolAttrs=function(){return r},u.getBlockElements=function(){return v},u.getTextBlockElements=function(){return textBlockElementsMap},u.getShortEndedElements=function(){return z},u.getSelfClosingElements=function(){return q},u.getNonEmptyElements=function(){return n},u.getWhiteSpaceElements=function(){return o},u.isValidChild=function(E,G){var F=k[E];return!(!F||!F[G])},u.isValid=function(F,E){var H,G,I=B(F);if(I){if(!E)return!0;if(I.attributes[E])return!0;if(H=I.attributePatterns)for(G=H.length;G--;)if(H[G].pattern.test(F))return!0}return!1},u.getElementRule=B,u.getCustomElements=function(){return p},u.addValidElements=C,u.setValidElements=t,u.addCustomElements=l,u.addValidChildren=x,u.elements=s}}(tinymce),function(a){a.html.SaxParser=function(c,e){var b=this,d=function(){};c=c||{},b.schema=e=e||new a.html.Schema,c.fix_self_closing!==!1&&(c.fix_self_closing=!0),a.each("comment cdata text start end pi doctype".split(" "),function(f){f&&(b[f]=c[f]||d)}),b.parse=function(E){function u(T){var V,U;for(V=A.length;V--&&A[V].name!==T;);if(V>=0){for(U=A.length-1;U>=V;U--)T=A[U],T.valid&&n.end(T.name);A.length=V}}function p(U,T,Y,X,W){var Z,V;if(T=T.toLowerCase(),Y=T in H?T:j(Y||X||W||""),v&&!z&&0!==T.indexOf("data-")){if(Z=P[T],!Z&&F){for(V=F.length;V--&&(Z=F[V],!Z.pattern.test(T)););V===-1&&(Z=null)}if(!Z)return;if(Z.validValues&&!(Y in Z.validValues))return}N.map[T]=Y,N.push({name:T,value:Y})}var g,I,B,N,Q,C,r,z,s,M,H,O,v,m,k,t,R,o,P,F,S,L,f,J,l,D,K,h,y,q,n=this,G=0,A=[],x=0,j=a.html.Entities.decode;for(l=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),D=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,K={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi},M=e.getShortEndedElements(),J=c.self_closing_elements||e.getSelfClosingElements(),H=e.getBoolAttrs(),v=c.validate,s=c.remove_internals,y=c.fix_self_closing,q=a.isIE,o=/^:/;g=l.exec(E);){if(G<g.index&&n.text(j(E.substr(G,g.index-G))),I=g[6])I=I.toLowerCase(),q&&o.test(I)&&(I=I.substr(1)),u(I);else if(I=g[7]){if(I=I.toLowerCase(),q&&o.test(I)&&(I=I.substr(1)),O=I in M,y&&J[I]&&A.length>0&&A[A.length-1].name===I&&u(I),!v||(m=e.getElementRule(I))){if(k=!0,v&&(P=m.attributes,F=m.attributePatterns),(R=g[8])?(z=R.indexOf("data-mce-type")!==-1,z&&s&&(k=!1),N=[],N.map={},R.replace(D,p)):(N=[],N.map={}),v&&!z){if(S=m.attributesRequired,L=m.attributesDefault,f=m.attributesForced)for(Q=f.length;Q--;)t=f[Q],r=t.name,h=t.value,"{$uid}"===h&&(h="mce_"+x++),N.map[r]=h,N.push({name:r,value:h});if(L)for(Q=L.length;Q--;)t=L[Q],r=t.name,r in N.map||(h=t.value,"{$uid}"===h&&(h="mce_"+x++),N.map[r]=h,N.push({name:r,value:h}));if(S){for(Q=S.length;Q--&&!(S[Q]in N.map););Q===-1&&(k=!1)}N.map["data-mce-bogus"]&&(k=!1)}k&&n.start(I,N,O)}else k=!1;if(B=K[I]){B.lastIndex=G=g.index+g[0].length,(g=B.exec(E))?(k&&(C=E.substr(G,g.index-G)),G=g.index+g[0].length):(C=E.substr(G),G=E.length),k&&C.length>0&&n.text(C,!0),k&&n.end(I),l.lastIndex=G;continue}O||(R&&R.indexOf("/")==R.length-1?k&&n.end(I):A.push({name:I,valid:k}))}else(I=g[1])?n.comment(I):(I=g[2])?n.cdata(I):(I=g[3])?n.doctype(I):(I=g[4])&&n.pi(I,g[5]);G=g.index+g[0].length}for(G<E.length&&n.text(j(E.substr(G))),Q=A.length-1;Q>=0;Q--)I=A[Q],I.valid&&n.end(I.name)}}}(tinymce),function(d){function a(k,l,j){var i,h,f=j?"lastChild":"firstChild",g=j?"prev":"next";if(k[f])return k[f];if(k!==l){if(i=k[g])return i;for(h=k.parent;h&&h!==l;h=h.parent)if(i=h[g])return i}}function b(f,g){this.name=f,this.type=g,1===g&&(this.attributes=[],this.attributes.map={})}var c=/^[ \t\r\n]*$/,e={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};d.extend(b.prototype,{replace:function(g){var f=this;return g.parent&&g.remove(),f.insert(g,f),f.remove(),f},attr:function(h,l){var g,j,k,f=this;if("string"!=typeof h){for(j in h)f.attr(j,h[j]);return f}if(g=f.attributes){if(l!==k){if(null===l){if(h in g.map)for(delete g.map[h],j=g.length;j--;)if(g[j].name===h)return g=g.splice(j,1),f;return f}if(h in g.map){for(j=g.length;j--;)if(g[j].name===h){g[j].value=l;break}}else g.push({name:h,value:l});return g.map[h]=l,f}return g.map[h]}},clone:function(){var h,f,m,j,k,g=this,n=new b(g.name,g.type);if(m=g.attributes){for(k=[],k.map={},h=0,f=m.length;h<f;h++)j=m[h],"id"!==j.name&&(k[k.length]={name:j.name,value:j.value},k.map[j.name]=j.value);n.attributes=k}return n.value=g.value,n.shortEnded=g.shortEnded,n},wrap:function(g){var f=this;return f.parent.insert(g,f),g.append(f),f},unwrap:function(){var h,g,f=this;for(h=f.firstChild;h;)g=h.next,f.insert(h,f,!0),h=g;f.remove()},remove:function(){var f=this,h=f.parent,g=f.next,i=f.prev;return h&&(h.firstChild===f?(h.firstChild=g,g&&(g.prev=null)):i.next=g,h.lastChild===f?(h.lastChild=i,i&&(i.next=null)):g.prev=i,f.parent=f.next=f.prev=null),f},append:function(h){var g,f=this;return h.parent&&h.remove(),g=f.lastChild,g?(g.next=h,h.prev=g,f.lastChild=h):f.lastChild=f.firstChild=h,h.parent=f,h},insert:function(h,f,i){var g;return h.parent&&h.remove(),g=f.parent||this,i?(f===g.firstChild?g.firstChild=h:f.prev.next=h,h.prev=f.prev,h.next=f,f.prev=h):(f===g.lastChild?g.lastChild=h:f.next.prev=h,h.next=f.next,h.prev=f,f.next=h),h.parent=g,h},getAll:function(g){var h,f=this,i=[];for(h=f.firstChild;h;h=a(h,f))h.name===g&&i.push(h);return i},empty:function(){var f,h,j,g=this;if(g.firstChild){for(f=[],j=g.firstChild;j;j=a(j,g))f.push(j);for(h=f.length;h--;)j=f[h],j.parent=j.firstChild=j.lastChild=j.next=j.prev=null}return g.firstChild=g.lastChild=null,g},isEmpty:function(k){var h,g,f=this,j=f.firstChild;if(j)do{if(1===j.type){if(j.attributes.map["data-mce-bogus"])continue;if(k[j.name])return!1;for(h=j.attributes.length;h--;)if(g=j.attributes[h].name,"name"===g||0===g.indexOf("data-mce-"))return!1}if(8===j.type)return!1;if(3===j.type&&!c.test(j.value))return!1}while(j=a(j,f));return!0},walk:function(f){return a(this,null,f)}}),d.extend(b,{create:function(g,f){var i,h;if(i=new b(g,e[g]||1),f)for(h in f)i.attr(h,f[h]);return i}}),d.html.Node=b}(tinymce),function(b){var a=b.html.Node;b.html.DomParser=function(g,h){function j(n){var p,q,y,x,A,o,r,l,u,k,t,m,z,s;for(t=b.makeMap("tr,td,th,tbody,thead,tfoot,table"),k=h.getNonEmptyElements(),m=h.getTextBlockElements(),p=0;p<n.length;p++)if(q=n[p],q.parent&&!q.fixed)if(m[q.name]&&"li"==q.parent.name){for(z=q.next;z&&m[z.name];)z.name="li",z.fixed=!0,q.parent.insert(z,q.parent),z=z.next;q.unwrap(q)}else{for(x=[q],y=q.parent;y&&!h.isValidChild(y.name,q.name)&&!t[y.name];y=y.parent)x.push(y);if(y&&x.length>1){for(x.reverse(),A=o=f.filterNode(x[0].clone()),u=0;u<x.length-1;u++){for(h.isValidChild(o.name,x[u].name)?(r=f.filterNode(x[u].clone()),o.append(r)):r=o,l=x[u].firstChild;l&&l!=x[u+1];)s=l.next,r.append(l),l=s;o=r}A.isEmpty(k)?y.insert(q,x[0],!0):(y.insert(A,x[0],!0),y.insert(q,A)),y=x[0],(y.isEmpty(k)||y.firstChild===y.lastChild&&"br"===y.firstChild.name)&&y.empty().remove()}else if(q.parent){if("li"===q.name){if(z=q.prev,z&&("ul"===z.name||"ul"===z.name)){z.append(q);continue}if(z=q.next,z&&("ul"===z.name||"ul"===z.name)){z.insert(q,z.firstChild,!0);continue}q.wrap(f.filterNode(new a("ul",1)));continue}h.isValidChild(q.parent.name,"div")&&h.isValidChild("div",q.name)?q.wrap(f.filterNode(new a("div",1))):"style"===q.name||"script"===q.name?q.empty().remove():q.unwrap()}}}var f=this,e={},d=[],i={},c={};g=g||{},g.validate=!("validate"in g)||g.validate,g.root_name=g.root_name||"body",f.schema=h=h||new b.html.Schema,f.filterNode=function(m){var l,k,n;k in e&&(n=i[k],n?n.push(m):i[k]=[m]),l=d.length;for(;l--;)k=d[l].name,k in m.attributes.map&&(n=c[k],n?n.push(m):c[k]=[m]);return m},f.addNodeFilter=function(k,l){b.each(b.explode(k),function(m){var n=e[m];n||(e[m]=n=[]),n.push(l)})},f.addAttributeFilter=function(k,l){b.each(b.explode(k),function(m){var n;for(n=0;n<d.length;n++)if(d[n].name===m)return void d[n].callbacks.push(l);d.push({name:m,callbacks:[l]})})},f.parse=function(v,m){function G(){for(var l,P,O=J.firstChild;O;)l=O.next,3==O.type||1==O.type&&"p"!==O.name&&!o[O.name]&&!O.attr("data-mce-type")?P?P.append(O):(P=K(q,1),J.insert(P,O),P.append(O)):P=null,O=l}function K(l,O){var Q,P=new a(l,O);return l in e&&(Q=i[l],Q?Q.push(P):i[l]=[P]),P}function I(P){var Q,l,O;for(Q=P.prev;Q&&3===Q.type;)l=Q.value.replace(t,""),l.length>0?(Q.value=l,Q=Q.prev):(O=Q.prev,Q.remove(),Q=O)}function H(O){var P,l={};for(P in O)"li"!==P&&"p"!=P&&(l[P]=O[P]);return l}var n,J,B,A,D,C,x,r,F,N,z,o,E,L,t,k,y,s,p,u,q,M=[];if(m=m||{},i={},c={},o=b.extend(b.makeMap("script,style,head,html,body,title,meta,param"),h.getBlockElements()),u=h.getNonEmptyElements(),p=h.children,z=g.validate,q="forced_root_block"in m?m.forced_root_block:g.forced_root_block,s=h.getWhiteSpaceElements(),E=/^[ \t\r\n]+/,t=/[ \t\r\n]+$/,k=/[ \t\r\n]+/g,y=/^[ \t\r\n]+$/,n=new b.html.SaxParser({validate:z,self_closing_elements:H(h.getSelfClosingElements()),cdata:function(l){B.append(K("#cdata",4)).value=l},text:function(P,l){var O;L||(P=P.replace(k," "),B.lastChild&&o[B.lastChild.name]&&(P=P.replace(E,""))),0!==P.length&&(O=K("#text",3),O.raw=!!l,B.append(O).value=P)},comment:function(l){B.append(K("#comment",8)).value=l},pi:function(l,O){B.append(K(l,7)).value=O,I(B)},doctype:function(O){var l;l=B.append(K("#doctype",10)),l.value=O,I(B)},start:function(l,W,P){var U,R,Q,S,T;if(Q=z?h.getElementRule(l):{}){for(U=K(Q.outputName||l,1),U.attributes=W,U.shortEnded=P,B.append(U),T=p[B.name],T&&p[U.name]&&!T[U.name]&&M.push(U),R=d.length;R--;)S=d[R].name,S in W.map&&(F=c[S],F?F.push(U):c[S]=[U]);o[l]&&I(U),P||(B=U),!L&&s[l]&&(L=!0)}},end:function(l){var S,P,R,O,Q;if(P=z?h.getElementRule(l):{}){if(o[l]&&!L){if(S=B.firstChild,S&&3===S.type)for(R=S.value.replace(E,""),R.length>0?(S.value=R,S=S.next):(O=S.next,S.remove(),S=O);S&&3===S.type;)R=S.value,O=S.next,(0===R.length||y.test(R))&&(S.remove(),S=O),S=O;if(S=B.lastChild,S&&3===S.type)for(R=S.value.replace(t,""),R.length>0?(S.value=R,S=S.prev):(O=S.prev,S.remove(),S=O);S&&3===S.type;)R=S.value,O=S.prev,(0===R.length||y.test(R))&&(S.remove(),S=O),S=O}if(L&&s[l]&&(L=!1),(P.removeEmpty||P.paddEmpty)&&B.isEmpty(u))if(P.paddEmpty)B.empty().append(new a("#text","3")).value=" ";else if(!B.attributes.map.name&&!B.attributes.map.id)return Q=B.parent,B.empty().remove(),void(B=Q);B=B.parent}}},h),J=B=new a(m.context||g.root_name,11),n.parse(v),z&&M.length&&(m.context?m.invalid=!0:j(M)),q&&"body"==J.name&&G(),!m.invalid){for(N in i){for(F=e[N],A=i[N],x=A.length;x--;)A[x].parent||A.splice(x,1);for(D=0,C=F.length;D<C;D++)F[D](A,N,m)}for(D=0,C=d.length;D<C;D++)if(F=d[D],F.name in c){for(A=c[F.name],x=A.length;x--;)A[x].parent||A.splice(x,1);for(x=0,r=F.callbacks.length;x<r;x++)F.callbacks[x](A,F.name,m)}}return J},g.remove_trailing_brs&&f.addNodeFilter("br",function(n,m){var r,o,t,s,p,u,q=n.length,v=b.extend({},h.getBlockElements()),k=h.getNonEmptyElements();for(v.body=1,r=0;r<q;r++)if(o=n[r],t=o.parent,v[o.parent.name]&&o===t.lastChild){for(p=o.prev;p;){if(u=p.name,"span"!==u||"bookmark"!==p.attr("data-mce-type")){if("br"!==u)break;if("br"===u){o=null;break}}p=p.prev}o&&(o.remove(),t.isEmpty(k)&&(elementRule=h.getElementRule(t.name),elementRule&&(elementRule.removeEmpty?t.remove():elementRule.paddEmpty&&(t.empty().append(new b.html.Node("#text",3)).value=" "))))}else{for(s=o;t.firstChild===s&&t.lastChild===s&&(s=t,!v[t.name]);)t=t.parent;s===t&&(textNode=new b.html.Node("#text",3),textNode.value=" ",o.replace(textNode))}}),g.allow_html_in_named_anchor||f.addAttributeFilter("id,name",function(k,l){for(var p,m,o,q,n=k.length;n--;)if(q=k[n],"a"===q.name&&q.firstChild&&!q.attr("href")){o=q.parent,p=q.lastChild;do m=p.prev,o.insert(p,q),p=m;while(p)}})}}(tinymce),tinymce.html.Writer=function(e){var a,b,d,f,g,c=[];return e=e||{},a=e.indent,b=tinymce.makeMap(e.indent_before||""),d=tinymce.makeMap(e.indent_after||""),f=tinymce.html.Entities.getEncodeFunc(e.entity_encoding||"raw",e.entities),g="html"==e.element_format,{start:function(m,k,p){var n,j,h,o;if(a&&b[m]&&c.length>0&&(o=c[c.length-1],o.length>0&&"\n"!==o&&c.push("\n")),c.push("<",m),k)for(n=0,j=k.length;n<j;n++)h=k[n],c.push(" ",h.name,'="',f(h.value,!0),'"');!p||g?c[c.length]=">":c[c.length]=" />",p&&a&&d[m]&&c.length>0&&(o=c[c.length-1],o.length>0&&"\n"!==o&&c.push("\n"))},end:function(h){var i;c.push("</",h,">"),a&&d[h]&&c.length>0&&(i=c[c.length-1],i.length>0&&"\n"!==i&&c.push("\n"))},text:function(i,h){i.length>0&&(c[c.length]=h?i:f(i))},cdata:function(h){c.push("<![CDATA[",h,"]]>")},comment:function(h){c.push("<!--",h,"-->")},pi:function(h,i){i?c.push("<?",h," ",i,"?>"):c.push("<?",h,"?>"),a&&c.push("\n")},doctype:function(h){c.push("<!DOCTYPE",h,">",a?"\n":"")},reset:function(){c.length=0},getContent:function(){return c.join("").replace(/\n$/,"")}}},function(a){a.html.Serializer=function(c,d){var b=this,e=new a.html.Writer(c);c=c||{},c.validate=!("validate"in c)||c.validate,b.schema=d=d||new a.html.Schema,b.writer=e,b.serialize=function(h){function f(k){var j,o,s,r,p,u,n,m,q,t=g[k.type];if(t)t(k);else{if(j=k.name,o=k.shortEnded,s=k.attributes,i&&s&&s.length>1){for(u=[],u.map={},q=d.getElementRule(k.name),n=0,m=q.attributesOrder.length;n<m;n++)r=q.attributesOrder[n],r in s.map&&(p=s.map[r],u.map[r]=p,u.push({name:r,value:p}));for(n=0,m=s.length;n<m;n++)r=s[n].name,r in u.map||(p=s.map[r],u.map[r]=p,u.push({name:r,value:p}));s=u}if(e.start(k.name,s,o),!o){if(k=k.firstChild)do f(k);while(k=k.next);e.end(j)}}}var g,i;return i=c.validate,g={3:function(k,j){e.text(k.value,k.raw)},8:function(j){e.comment(j.value)},7:function(j){e.pi(j.name,j.value)},10:function(j){e.doctype(j.value)},4:function(j){e.cdata(j.value)},11:function(j){if(j=j.firstChild)do f(j);while(j=j.next)}},e.reset(),1!=h.type||c.inner?g[11](h):f(h),e.getContent()}}}(tinymce),tinymce.dom={},function(b,h){function c(k,j,l,i){k.addEventListener?k.addEventListener(j,l,i||!1):k.attachEvent&&k.attachEvent("on"+j,l)}function e(k,j,l,i){k.removeEventListener?k.removeEventListener(j,l,i||!1):k.detachEvent&&k.detachEvent("on"+j,l)}function a(n,l){function j(){return!1}function m(){return!0}var i,k=l||{};for(i in n)"layerX"!==i&&"layerY"!==i&&(k[i]=n[i]);return k.target||(k.target=k.srcElement||document),k.preventDefault=function(){k.isDefaultPrevented=m,n&&(n.preventDefault?n.preventDefault():n.returnValue=!1)},k.stopPropagation=function(){k.isPropagationStopped=m,n&&(n.stopPropagation?n.stopPropagation():n.cancelBubble=!0)},k.stopImmediatePropagation=function(){k.isImmediatePropagationStopped=m,k.stopPropagation()},k.isDefaultPrevented||(k.isDefaultPrevented=j,k.isPropagationStopped=j,k.isImmediatePropagationStopped=j),k}function d(m,n,l){function i(){l.domLoaded||(l.domLoaded=!0,n(j))}var k=m.document,j={type:"ready"};return"complete"==k.readyState?void i():(g?c(m,"DOMContentLoaded",i):(c(k,"readystatechange",function(){"complete"===k.readyState&&(e(k,"readystatechange",arguments.callee),i())}),k.documentElement.doScroll&&m===m.top&&!function(){try{k.documentElement.doScroll("left")}catch(o){return void setTimeout(arguments.callee,0)}i()}()),void c(m,"load",i))}function f(k){function j(t,x){var s,u,r,v;if(s=p[x][t.type])for(u=0,r=s.length;u<r;u++)if(v=s[u],v&&v.func.call(v.scope,t)===!1&&t.preventDefault(),t.isImmediatePropagationStopped())return}var i,n,m,l,q=this,p={};m="onmouseenter"in document.documentElement,n="onfocusin"in document.documentElement,l={mouseenter:"mouseover",mouseleave:"mouseout"},i=1,q.domLoaded=!1,q.events=p,q.bind=function(x,A,D,E){function y(F){j(a(F||v.event),s)}var s,t,u,r,B,z,C,v=window;if(x&&3!==x.nodeType&&8!==x.nodeType){for(x[h]?(s=x[h],p[s]||(p[s]={})):(s=i++,x[h]=s,p[s]={}),E=E||x,A=A.split(" "),u=A.length;u--;)r=A[u],z=y,B=C=!1,"DOMContentLoaded"===r&&(r="ready"),!q.domLoaded&&"complete"!=x.readyState||"ready"!==r?(m||(B=l[r],B&&(z=function(F){var H,G;if(H=F.currentTarget,G=F.relatedTarget,G&&H.contains)G=H.contains(G);else for(;G&&G!==H;)G=G.parentNode;G||(F=a(F||v.event),F.type="mouseout"===F.type?"mouseleave":"mouseenter",F.target=H,j(F,s))})),n||"focusin"!==r&&"focusout"!==r||(C=!0,B="focusin"===r?"focus":"blur",z=function(F){F=a(F||v.event),F.type="focus"===F.type?"focusin":"focusout",j(F,s)}),t=p[s][r],t?t.push({func:D,scope:E}):(p[s][r]=t=[{func:D,scope:E}],t.fakeName=B,t.capture=C,t.nativeHandler=z,g||(t.proxyHandler=k(s)),"ready"===r?d(x,z,q):c(x,B||r,g?z:t.proxyHandler,C))):(q.domLoaded=!0,D.call(E,a({type:r})));return x=t=0,D}},q.unbind=function(x,z,A){var s,u,v,B,r,t;if(!x||3===x.nodeType||8===x.nodeType)return q;if(s=x[h]){if(t=p[s],z){for(z=z.split(" "),v=z.length;v--;)if(r=z[v],u=t[r]){if(A)for(B=u.length;B--;)u[B].func===A&&u.splice(B,1);A&&0!==u.length||(delete t[r],e(x,u.fakeName||r,g?u.nativeHandler:u.proxyHandler,u.capture))}}else{for(r in t)u=t[r],e(x,u.fakeName||r,g?u.nativeHandler:u.proxyHandler,u.capture);t={}}for(r in t)return q;delete p[s];try{delete x[h]}catch(y){x[h]=null}}return q},q.fire=function(u,s,r){var v,t;if(!u||3===u.nodeType||8===u.nodeType)return q;t=a(null,r),t.type=s;do v=u[h],v&&j(t,v),u=u.parentNode||u.ownerDocument||u.defaultView||u.parentWindow;while(u&&!t.isPropagationStopped());return q},q.clean=function(u){var s,r,t=q.unbind;if(!u||3===u.nodeType||8===u.nodeType)return q;if(u[h]&&t(u),u.getElementsByTagName||(u=u.document),u&&u.getElementsByTagName)for(t(u),r=u.getElementsByTagName("*"),s=r.length;s--;)u=r[s],u[h]&&t(u);return q},q.callNativeHandler=function(s,r){p&&p[s][r.type].nativeHandler(r)},q.destory=function(){p={}},q.add=function(v,s,u,t){"string"==typeof v&&(v=document.getElementById(v));{if(!(v&&v instanceof Array))return"init"===s&&(s="ready"),q.bind(v,s instanceof Array?s.join(" "):s,u,t);for(var r=v.length;r--;)q.add(v[r],s,u,t)}},q.remove=function(v,s,u,t){if(!v)return q;if("string"==typeof v&&(v=document.getElementById(v)),v instanceof Array){for(var r=v.length;r--;)q.remove(v[r],s,u,t);return q}return q.unbind(v,s instanceof Array?s.join(" "):s,u)},q.clear=function(r){return"string"==typeof r&&(r=document.getElementById(r)),q.clean(r)},q.cancel=function(r){return r&&(q.prevent(r),q.stop(r)),!1},q.prevent=function(r){return r.preventDefault||(r=a(r)),r.preventDefault(),!1},q.stop=function(r){return r.stopPropagation||(r=a(r)),r.stopPropagation(),!1}}var g=!!document.addEventListener;b.EventUtils=f,b.Event=new f(function(i){return function(j){tinymce.dom.Event.callNativeHandler(i,j)}}),b.Event.bind(window,"ready",function(){}),b=0}(tinymce.dom,"data-mce-expando"),tinymce.dom.TreeWalker=function(a,c){function d(i,f,e,j){var h,g;if(i){if(!j&&i[f])return i[f];if(i!=c){if(h=i[e])return h;for(g=i.parentNode;g&&g!=c;g=g.parentNode)if(h=g[e])return h}}}var b=a;this.current=function(){return b},this.next=function(e){return b=d(b,"firstChild","nextSibling",e)},this.prev=function(e){return b=d(b,"lastChild","previousSibling",e)}},function(e){var g=e.each,d=e.is,f=e.isWebKit,b=e.isIE,h=e.html.Entities,a=/^[ \t\r\n]*$/;e.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{for:"htmlFor",class:"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(o,l){var n,k=this;if(k.doc=o,k.win=window,k.files={},k.cssFlicker=!1,k.counter=0,k.stdMode=!e.isIE||o.documentMode>=8,k.boxModel=!e.isIE||"CSS1Compat"==o.compatMode||k.stdMode,k.hasOuterHTML="outerHTML"in o.createElement("a"),k.settings=l=e.extend({keep_values:!1,hex_colors:1},l),k.schema=l.schema,k.styles=new e.html.Styles({url_converter:l.url_converter,url_converter_scope:l.url_converter_scope},l.schema),e.isIE6)try{o.execCommand("BackgroundImageCache",!1,!0)}catch(m){k.cssFlicker=!0}k.fixDoc(o),k.events=l.ownEvents?new e.dom.EventUtils(l.proxy):e.dom.Event,e.addUnload(k.destroy,k),n=l.schema?l.schema.getBlockElements():{},k.isBlock=function(q){if(!q)return!1;var p=q.nodeType;return p?!(1!==p||!n[q.nodeName]):!!n[q]}},fixDoc:function(k){var i,j=this.settings;if(b&&j.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(l){k.createElement(l)});for(i in j.schema.getCustomElements())k.createElement(i)}},clone:function(k,i){var m,l,j=this;return!b||1!==k.nodeType||i?k.cloneNode(i):(l=j.doc,i?m.firstChild:(m=l.createElement(k.nodeName),g(j.getAttribs(k),function(n){j.setAttrib(m,n.nodeName,j.getAttrib(k,n.nodeName))}),m))},getRoot:function(){var i=this,j=i.settings;return j&&i.get(j.root_element)||i.doc.body},getViewPort:function(j){var k,i;return j=j?j:this.win,k=j.document,i=this.boxModel?k.documentElement:k.body,{x:j.pageXOffset||i.scrollLeft,y:j.pageYOffset||i.scrollTop,w:j.innerWidth||i.clientWidth,h:j.innerHeight||i.clientHeight}},getRect:function(l){var k,j,i=this;return l=i.get(l),k=i.getPos(l),j=i.getSize(l),{x:k.x,y:k.y,w:j.w,h:j.h}},getSize:function(l){var i,k,j=this;return l=j.get(l),i=j.getStyle(l,"width"),k=j.getStyle(l,"height"),i.indexOf("px")===-1&&(i=0),k.indexOf("px")===-1&&(k=0),{w:parseInt(i,10)||l.offsetWidth||l.clientWidth,h:parseInt(k,10)||l.offsetHeight||l.clientHeight}},getParent:function(k,j,i){return this.getParents(k,j,i,!1)},getParents:function(s,m,k,q){var i,j=this,l=j.settings,p=[];for(s=j.get(s),q=void 0===q,l.strict_root&&(k=k||j.getRoot()),d(m,"string")&&(i=m,m="*"===m?function(o){return 1==o.nodeType}:function(o){return j.is(o,i)});s&&s!=k&&s.nodeType&&9!==s.nodeType;){if(!m||m(s)){if(!q)return s;p.push(s)}s=s.parentNode}return q?p:null},get:function(i){var j;return i&&this.doc&&"string"==typeof i&&(j=i,i=this.doc.getElementById(i),i&&i.id!==j)?this.doc.getElementsByName(j)[1]:i},getNext:function(j,i){return this._findSib(j,i,"nextSibling")},getPrev:function(j,i){return this._findSib(j,i,"previousSibling")},add:function(l,o,i,k,m){var j=this;return this.run(l,function(r){var q;return q=d(o,"string")?j.doc.createElement(o):o,j.setAttribs(q,i),k&&(k.nodeType?q.appendChild(k):j.setHTML(q,k)),m?q:r.appendChild(q)})},create:function(k,i,j){return this.add(this.doc.createElement(k),k,i,j,1)},createHTML:function(q,i,m){var j,p="",l=this;p+="<"+q;for(j in i)i.hasOwnProperty(j)&&(p+=" "+j+'="'+l.encode(i[j])+'"');return"undefined"!=typeof m?p+">"+m+"</"+q+">":p+" />"},remove:function(i,j){return this.run(i,function(l){var m,k=l.parentNode;if(!k)return null;if(j)for(;m=l.firstChild;)!e.isIE||3!==m.nodeType||m.nodeValue?k.insertBefore(m,l):l.removeChild(m);return k.removeChild(l)})},setStyle:function(l,i,j){var k=this;return k.run(l,function(o){var n;switch(n=o.style,i=i.replace(/-(\D)/g,function(q,p){return p.toUpperCase()}),k.pixelStyles.test(i)&&(e.is(j,"number")||/^[\-0-9\.]+$/.test(j))&&(j+="px"),i){case"opacity":b&&(n.filter=""===j?"":"alpha(opacity="+100*j+")",l.currentStyle&&l.currentStyle.hasLayout||(n.display="inline-block")),n[i]=n["-moz-opacity"]=n["-khtml-opacity"]=j||"";break;case"float":b?n.styleFloat=j:n.cssFloat=j;break;default:n[i]=j||""}k.settings.update_styles&&k.setAttrib(o,"data-mce-style")})},getStyle:function(l,i,k){if(l=this.get(l)){if(this.doc.defaultView&&k){i=i.replace(/[A-Z]/g,function(m){return"-"+m});try{return this.doc.defaultView.getComputedStyle(l,null).getPropertyValue(i)}catch(j){return null}}return i=i.replace(/-(\D)/g,function(n,m){return m.toUpperCase()}),"float"==i&&(i=b?"styleFloat":"cssFloat"),l.currentStyle&&k?l.currentStyle[i]:l.style?l.style[i]:void 0}},setStyles:function(l,m){var i,j=this,k=j.settings;i=k.update_styles,k.update_styles=0,g(m,function(o,p){j.setStyle(l,p,o)}),k.update_styles=i,k.update_styles&&j.setAttrib(l,k.cssText)},removeAllAttribs:function(i){return this.run(i,function(l){var k,j=l.attributes;for(k=j.length-1;k>=0;k--)l.removeAttributeNode(j.item(k))})},setAttrib:function(k,l,i){var j=this;if(k&&l)return j.settings.strict&&(l=l.toLowerCase()),this.run(k,function(p){var o=j.settings,m=p.getAttribute(l);if(null!==i)switch(l){case"style":if(!d(i,"string"))return void g(i,function(q,r){j.setStyle(p,r,q)});o.keep_values&&(i&&!j._isRes(i)?p.setAttribute("data-mce-style",i,2):p.removeAttribute("data-mce-style",2)),p.style.cssText=i;break;case"class":p.className=i||"";break;case"src":case"href":o.keep_values&&(o.url_converter&&(i=o.url_converter.call(o.url_converter_scope||j,i,l,p)),j.setAttrib(p,"data-mce-"+l,i,2));break;case"shape":p.setAttribute("data-mce-style",i)}if(d(i)&&null!==i&&0!==i.length?p.setAttribute(l,""+i,2):p.removeAttribute(l,2),tinyMCE.activeEditor&&m!=i){var n=tinyMCE.activeEditor;
n.onSetAttrib.dispatch(n,p,l,i)}})},setAttribs:function(j,k){var i=this;return this.run(j,function(l){g(k,function(m,o){i.setAttrib(l,o,m)})})},getAttrib:function(m,o,k){var i,l,j=this;if(m=j.get(m),!m||1!==m.nodeType)return k!==l&&k;if(d(k)||(k=""),/^(src|href|style|coords|shape)$/.test(o)&&(i=m.getAttribute("data-mce-"+o)))return i;if(b&&j.props[o]&&(i=m[j.props[o]],i=i&&i.nodeValue?i.nodeValue:i),i||(i=m.getAttribute(o,2)),/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(o))return m[j.props[o]]===!0&&""===i?o:i?o:"";if("FORM"===m.nodeName&&m.getAttributeNode(o))return m.getAttributeNode(o).nodeValue;if("style"===o&&(i=i||m.style.cssText,i&&(i=j.serializeStyle(j.parseStyle(i),m.nodeName),j.settings.keep_values&&!j._isRes(i)&&m.setAttribute("data-mce-style",i))),f&&"class"===o&&i&&(i=i.replace(/(apple|webkit)\-[a-z\-]+/gi,"")),b)switch(o){case"rowspan":case"colspan":1===i&&(i="");break;case"size":"+0"!==i&&20!==i&&0!==i||(i="");break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":0===i&&(i="");break;case"hspace":i===-1&&(i="");break;case"maxlength":case"tabindex":32768!==i&&2147483647!==i&&"32768"!==i||(i="");break;case"multiple":case"compact":case"noshade":case"nowrap":return 65535===i?o:k;case"shape":i=i.toLowerCase();break;default:0===o.indexOf("on")&&i&&(i=e._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+i))}return i!==l&&null!==i&&""!==i?""+i:k},getPos:function(q,l){var m,k,j=this,i=0,p=0,o=j.doc;if(q=j.get(q),l=l||o.body,q){if(q.getBoundingClientRect)return q=q.getBoundingClientRect(),m=j.boxModel?o.documentElement:o.body,i=q.left+(o.documentElement.scrollLeft||o.body.scrollLeft)-m.clientTop,p=q.top+(o.documentElement.scrollTop||o.body.scrollTop)-m.clientLeft,{x:i,y:p};for(k=q;k&&k!=l&&k.nodeType;)i+=k.offsetLeft||0,p+=k.offsetTop||0,k=k.offsetParent;for(k=q.parentNode;k&&k!=l&&k.nodeType;)i-=k.scrollLeft||0,p-=k.scrollTop||0,k=k.parentNode}return{x:i,y:p}},parseStyle:function(i){return this.styles.parse(i)},serializeStyle:function(j,i){return this.styles.serialize(j,i)},addStyle:function(j){var i,k=this.doc;styleElm=k.getElementById("mceDefaultStyles"),styleElm||(styleElm=k.createElement("style"),styleElm.id="mceDefaultStyles",styleElm.type="text/css",i=k.getElementsByTagName("head")[0],i.firstChild?i.insertBefore(styleElm,i.firstChild):i.appendChild(styleElm)),styleElm.styleSheet?styleElm.styleSheet.cssText+=j:styleElm.appendChild(k.createTextNode(j))},loadCSS:function(i){var j,k=this,l=k.doc;i||(i=""),j=l.getElementsByTagName("head")[0],g(i.split(","),function(m){var n;k.files[m]||(k.files[m]=!0,n=k.create("link",{rel:"stylesheet",href:e._addVer(m)}),b&&l.documentMode&&l.recalc&&(n.onload=function(){l.recalc&&l.recalc(),n.onload=null}),j.appendChild(n))})},addClass:function(i,j){return this.run(i,function(k){var l;return j?this.hasClass(k,j)?k.className:(l=this.removeClass(k,j),k.className=(""!=l?l+" ":"")+j):0})},removeClass:function(k,l){var j,i=this;return i.run(k,function(n){var m;return i.hasClass(n,l)?(j||(j=new RegExp("(^|\\s+)"+l+"(\\s+|$)","g")),m=n.className.replace(j," "),m=e.trim(" "!=m?m:""),n.className=m,m||(n.removeAttribute("class"),n.removeAttribute("className")),m):n.className})},hasClass:function(j,i){return j=this.get(j),!(!j||!i)&&(" "+j.className+" ").indexOf(" "+i+" ")!==-1},show:function(i){return this.setStyle(i,"display","block")},hide:function(i){return this.setStyle(i,"display","none")},isHidden:function(i){return i=this.get(i),!i||"none"==i.style.display||"none"==this.getStyle(i,"display")},uniqueId:function(i){return(i?i:"mce_")+this.counter++},setHTML:function(k,j){var i=this;return i.run(k,function(m){if(b){for(;m.firstChild;)m.removeChild(m.firstChild);try{m.innerHTML="<br />"+j,m.removeChild(m.firstChild)}catch(l){var n=i.create("div");n.innerHTML="<br />"+j,g(e.grep(n.childNodes),function(p,o){o&&m.canHaveHTML&&m.appendChild(p)})}}else m.innerHTML=j;return j})},getOuterHTML:function(k){var j,i=this;return(k=i.get(k))?1===k.nodeType&&i.hasOuterHTML?k.outerHTML:(j=(k.ownerDocument||i.doc).createElement("body"),j.appendChild(k.cloneNode(!0)),j.innerHTML):null},setOuterHTML:function(l,j,m){function k(p,o,r){var s,q;for(q=r.createElement("body"),q.innerHTML=o,s=q.lastChild;s;)i.insertAfter(s.cloneNode(!0),p),s=s.previousSibling;i.remove(p)}var i=this;return this.run(l,function(o){if(o=i.get(o),1==o.nodeType)if(m=m||o.ownerDocument||i.doc,b)try{b&&1==o.nodeType?o.outerHTML=j:k(o,j,m)}catch(n){k(o,j,m)}else k(o,j,m)})},decode:h.decode,encode:h.encodeAllRaw,insertAfter:function(i,j){return j=this.get(j),this.run(i,function(l){var k,m;return k=j.parentNode,m=j.nextSibling,m?k.insertBefore(l,m):k.appendChild(l),l})},replace:function(m,l,i){var j=this;return d(l,"array")&&(m=m.cloneNode(!0)),j.run(l,function(k){return i&&g(e.grep(k.childNodes),function(n){m.appendChild(n)}),k.parentNode.replaceChild(m,k)})},rename:function(l,i){var j,k=this;return l.nodeName!=i.toUpperCase()&&(j=k.create(i),g(k.getAttribs(l),function(m){k.setAttrib(j,m.nodeName,k.getAttrib(l,m.nodeName))}),k.replace(j,l,1)),j||l},findCommonAncestor:function(k,i){for(var j,l=k;l;){for(j=i;j&&l!=j;)j=j.parentNode;if(l==j)break;l=l.parentNode}return!l&&k.ownerDocument?k.ownerDocument.documentElement:l},toHex:function(i){function j(l){return l=parseInt(l,10).toString(16),l.length>1?l:"0"+l}var k=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(i);return k?i="#"+j(k[1])+j(k[2])+j(k[3]):i},getClasses:function(){function q(i){g(i.imports,function(s){q(s)}),g(i.cssRules||i.rules,function(s){switch(s.type||1){case 1:s.selectorText&&g(s.selectorText.split(","),function(r){r=r.replace(/^\s*|\s*$|^\s\./g,""),!/\.mce/.test(r)&&/\.[\w\-]+$/.test(r)&&(l=r,r=e._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",r),p&&!(r=p(r,l))||o[r]||(j.push({class:r}),o[r]=1))});break;case 3:q(s.styleSheet)}})}var l,n=this,j=[],o={},p=n.settings.class_filter;if(n.classes)return n.classes;try{g(n.doc.styleSheets,q)}catch(k){}return j.length>0&&(n.classes=j),j},run:function(l,k,j){var m,i=this;return i.doc&&"string"==typeof l&&(l=i.get(l)),!!l&&(j=j||this,l.nodeType||!l.length&&0!==l.length?k.call(j,l):(m=[],g(l,function(o,n){o&&("string"==typeof o&&(o=i.doc.getElementById(o)),m.push(k.call(j,o,n)))}),m))},getAttribs:function(j){var i;return j=this.get(j),j?b?(i=[],"OBJECT"==j.nodeName?j.attributes:("OPTION"===j.nodeName&&this.getAttrib(j,"selected")&&i.push({specified:1,nodeName:"selected"}),j.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(k){i.push({specified:1,nodeName:k})}),i)):j.attributes:[]},isEmpty:function(m,k){var o,n,q,j,l,r=this,p=0;if(m=m.firstChild){j=new e.dom.TreeWalker(m,m.parentNode),k=k||r.schema?r.schema.getNonEmptyElements():null;do{if(q=m.nodeType,1===q){if(m.getAttribute("data-mce-bogus"))continue;if(l=m.nodeName.toLowerCase(),k&&k[l]){if("br"===l){p++;continue}return!1}for(n=r.getAttribs(m),o=m.attributes.length;o--;)if(l=m.attributes[o].nodeName,"name"===l||"data-mce-bookmark"===l)return!1}if(8==q)return!1;if(3===q&&!a.test(m.nodeValue))return!1}while(m=j.next())}return p<=1},destroy:function(j){var i=this;i.win=i.doc=i.root=i.events=i.frag=null,j||e.removeUnload(i.destroy)},createRng:function(){var i=this.doc;return i.createRange?i.createRange():new e.dom.Range(this)},nodeIndex:function(m,n){var k,l,j,i=0;if(m)for(k=m.nodeType,m=m.previousSibling,l=m;m;m=m.previousSibling)j=m.nodeType,(!n||3!=j||j!=k&&m.nodeValue.length)&&(i++,k=j);return i},split:function(m,l,p){function j(v){function x(A){var z=A.previousSibling&&"SPAN"==A.previousSibling.nodeName,y=A.nextSibling&&"SPAN"==A.nextSibling.nodeName;return z&&y}var t,s=v.childNodes,u=v.nodeType;if(1!=u||"bookmark"!=v.getAttribute("data-mce-type")){for(t=s.length-1;t>=0;t--)j(s[t]);if(9!=u){if(3==u&&v.nodeValue.length>0){var r=e.trim(v.nodeValue).length;if(!q.isBlock(v.parentNode)||r>0||0===r&&x(v))return}else if(1==u&&(s=v.childNodes,1==s.length&&s[0]&&1==s[0].nodeType&&"bookmark"==s[0].getAttribute("data-mce-type")&&v.parentNode.insertBefore(s[0],v),s.length||/^(br|hr|input|img)$/i.test(v.nodeName)))return;q.remove(v)}return v}}var n,k,o,q=this,i=q.createRng();if(m&&l)return i.setStart(m.parentNode,q.nodeIndex(m)),i.setEnd(l.parentNode,q.nodeIndex(l)),n=i.extractContents(),i=q.createRng(),i.setStart(l.parentNode,q.nodeIndex(l)+1),i.setEnd(m.parentNode,q.nodeIndex(m)+1),k=i.extractContents(),o=m.parentNode,o.insertBefore(j(n),m),p?o.replaceChild(p,l):o.insertBefore(l,m),o.insertBefore(j(k),m),q.remove(m),p||l},bind:function(l,i,k,j){return this.events.add(l,i,k,j||this)},unbind:function(k,i,j){return this.events.remove(k,i,j)},fire:function(k,j,i){return this.events.fire(k,j,i)},getContentEditable:function(j){var i;return 1!=j.nodeType?null:(i=j.getAttribute("data-mce-contenteditable"),i&&"inherit"!==i?i:"inherit"!==j.contentEditable?j.contentEditable:null)},_findSib:function(l,i,j){var k=this,m=i;if(l)for(d(m,"string")&&(m=function(n){return k.is(n,i)}),l=l[j];l;l=l[j])if(m(l))return l;return null},_isRes:function(i){return/^(top|left|bottom|right|width|height)/i.test(i)||/;\s*(top|left|bottom|right|width|height)/i.test(i)}}),e.DOM=new e.dom.DOMUtils(document,{process_html:0})}(tinymce),function(a){function b(c){function x(){return e.createDocumentFragment()}function q(X,t){C(E,X,t)}function s(X,t){C(S,X,t)}function g(t){q(t.parentNode,n(t))}function J(t){q(t.parentNode,n(t)+1)}function K(t){s(t.parentNode,n(t))}function u(t){s(t.parentNode,n(t)+1)}function B(t){t?(O[Q]=O[h],O[A]=O[W]):(O[h]=O[Q],O[W]=O[A]),O.collapsed=E}function y(t){g(t),u(t)}function G(t){q(t,0),s(t,1===t.nodeType?t.childNodes.length:t.nodeValue.length)}function v(aa,t){var ad=O[h],Y=O[W],ac=O[Q],X=O[A],ab=t.startContainer,af=t.startOffset,Z=t.endContainer,ae=t.endOffset;return 0===aa?H(ad,Y,ab,af):1===aa?H(ac,X,ab,af):2===aa?H(ac,X,Z,ae):3===aa?H(ad,Y,Z,ae):void 0}function p(){l(j)}function I(){return l(U)}function d(){return l(F)}function D(aa){var Z,Y,X=this[h],t=this[W];3!==X.nodeType&&4!==X.nodeType||!X.nodeValue?(X.childNodes.length>0&&(Y=X.childNodes[t]),Y?X.insertBefore(aa,Y):X.appendChild(aa)):t?t>=X.nodeValue.length?c.insertAfter(aa,X):(Z=X.splitText(t),X.parentNode.insertBefore(aa,Z)):X.parentNode.insertBefore(aa,X)}function N(X){var t=O.extractContents();O.insertNode(X),X.appendChild(t),O.selectNode(X)}function L(){return k(new b(c),{startContainer:O[h],startOffset:O[W],endContainer:O[Q],endOffset:O[A],collapsed:O.collapsed,commonAncestorContainer:O.commonAncestorContainer})}function P(t,X){var Y;if(3==t.nodeType)return t;if(X<0)return t;for(Y=t.firstChild;Y&&X>0;)--X,Y=Y.nextSibling;return Y?Y:t}function m(){return O[h]==O[Q]&&O[W]==O[A]}function H(Z,ab,X,aa){var ac,Y,t,ad,af,ae;if(Z==X)return ab==aa?0:ab<aa?-1:1;for(ac=X;ac&&ac.parentNode!=Z;)ac=ac.parentNode;if(ac){for(Y=0,t=Z.firstChild;t!=ac&&Y<ab;)Y++,t=t.nextSibling;return ab<=Y?-1:1}for(ac=Z;ac&&ac.parentNode!=X;)ac=ac.parentNode;if(ac){for(Y=0,t=X.firstChild;t!=ac&&Y<aa;)Y++,t=t.nextSibling;return Y<aa?-1:1}for(ad=c.findCommonAncestor(Z,X),af=Z;af&&af.parentNode!=ad;)af=af.parentNode;for(af||(af=ad),ae=X;ae&&ae.parentNode!=ad;)ae=ae.parentNode;if(ae||(ae=ad),af==ae)return 0;for(t=ad.firstChild;t;){if(t==af)return-1;if(t==ae)return 1;t=t.nextSibling}}function C(X,aa,Z){var t,Y;for(X?(O[h]=aa,O[W]=Z):(O[Q]=aa,O[A]=Z),t=O[Q];t.parentNode;)t=t.parentNode;for(Y=O[h];Y.parentNode;)Y=Y.parentNode;Y==t?H(O[h],O[W],O[Q],O[A])>0&&O.collapse(X):O.collapse(X),O.collapsed=m(),O.commonAncestorContainer=c.findCommonAncestor(O[h],O[Q])}function l(ad){var ac,X,ab,Y,aa,t,ae,Z=0,af=0;if(O[h]==O[Q])return f(ad);for(ac=O[Q],X=ac.parentNode;X;ac=X,X=X.parentNode){if(X==O[h])return r(ac,ad);++Z}for(ac=O[h],X=ac.parentNode;X;ac=X,X=X.parentNode){if(X==O[Q])return V(ac,ad);++af}for(ab=af-Z,Y=O[h];ab>0;)Y=Y.parentNode,ab--;for(aa=O[Q];ab<0;)aa=aa.parentNode,ab++;for(t=Y.parentNode,ae=aa.parentNode;t!=ae;t=t.parentNode,ae=ae.parentNode)Y=t,aa=ae;return o(Y,aa,ad)}function f(ac){var ae,af,t,Y,Z,ad,aa,X,ab;if(ac!=j&&(ae=x()),O[W]==O[A])return ae;if(3==O[h].nodeType){if(af=O[h].nodeValue,t=af.substring(O[W],O[A]),ac!=F&&(Y=O[h],X=O[W],ab=O[A]-O[W],0===X&&ab>=Y.nodeValue.length-1?Y.parentNode.removeChild(Y):Y.deleteData(X,ab),O.collapse(E)),ac==j)return;return t.length>0&&ae.appendChild(e.createTextNode(t)),ae}for(Y=P(O[h],O[W]),Z=O[A]-O[W];Y&&Z>0;)ad=Y.nextSibling,aa=z(Y,ac),ae&&ae.appendChild(aa),--Z,Y=ad;return ac!=F&&O.collapse(E),ae}function r(ad,aa){var ac,ab,X,t,Z,Y;if(aa!=j&&(ac=x()),ab=i(ad,aa),ac&&ac.appendChild(ab),X=n(ad),t=X-O[W],t<=0)return aa!=F&&(O.setEndBefore(ad),O.collapse(S)),ac;for(ab=ad.previousSibling;t>0;)Z=ab.previousSibling,Y=z(ab,aa),ac&&ac.insertBefore(Y,ac.firstChild),--t,ab=Z;return aa!=F&&(O.setEndBefore(ad),O.collapse(S)),ac}function V(ab,aa){var ad,X,ac,t,Z,Y;for(aa!=j&&(ad=x()),ac=R(ab,aa),ad&&ad.appendChild(ac),X=n(ab),++X,t=O[A]-X,ac=ab.nextSibling;ac&&t>0;)Z=ac.nextSibling,Y=z(ac,aa),ad&&ad.appendChild(Y),--t,ac=Z;return aa!=F&&(O.setStartAfter(ab),O.collapse(E)),ad}function o(ab,t,ae){var Y,ag,aa,ac,ad,X,af,Z;for(ae!=j&&(ag=x()),Y=R(ab,ae),ag&&ag.appendChild(Y),aa=ab.parentNode,ac=n(ab),ad=n(t),++ac,X=ad-ac,af=ab.nextSibling;X>0;)Z=af.nextSibling,Y=z(af,ae),ag&&ag.appendChild(Y),af=Z,--X;return Y=i(t,ae),ag&&ag.appendChild(Y),ae!=F&&(O.setStartAfter(ab),O.collapse(E)),ag}function i(ac,ad){var ae,ab,aa,t,X,Y=P(O[Q],O[A]-1),Z=Y!=O[Q];if(Y==ac)return M(Y,Z,S,ad);for(ae=Y.parentNode,ab=M(ae,S,S,ad);ae;){for(;Y;)aa=Y.previousSibling,t=M(Y,Z,S,ad),ad!=j&&ab.insertBefore(t,ab.firstChild),Z=E,Y=aa;if(ae==ac)return ab;Y=ae.previousSibling,ae=ae.parentNode,X=M(ae,S,S,ad),ad!=j&&X.appendChild(ab),ab=X}}function R(ac,ad){var ae,ab,Y,t,X,Z=P(O[h],O[W]),aa=Z!=O[h];if(Z==ac)return M(Z,aa,E,ad);for(ae=Z.parentNode,ab=M(ae,S,E,ad);ae;){for(;Z;)Y=Z.nextSibling,t=M(Z,aa,E,ad),ad!=j&&ab.appendChild(t),aa=E,Z=Y;if(ae==ac)return ab;Z=ae.nextSibling,ae=ae.parentNode,X=M(ae,S,E,ad),ad!=j&&X.appendChild(ab),ab=X}}function M(t,aa,ad,ae){var Z,Y,ab,X,ac;if(aa)return z(t,ae);if(3==t.nodeType){if(Z=t.nodeValue,ad?(X=O[W],Y=Z.substring(X),ab=Z.substring(0,X)):(X=O[A],Y=Z.substring(0,X),ab=Z.substring(X)),ae!=F&&(t.nodeValue=ab),ae==j)return;return ac=c.clone(t,S),ac.nodeValue=Y,ac}if(ae!=j)return c.clone(t,S)}function z(X,t){return t!=j?t==F?c.clone(X,E):X:void X.parentNode.removeChild(X)}function T(){return c.create("body",null,d()).outerText}var O=this,e=c.doc,U=0,F=1,j=2,E=!0,S=!1,W="startOffset",h="startContainer",Q="endContainer",A="endOffset",k=tinymce.extend,n=c.nodeIndex;return k(O,{startContainer:e,startOffset:0,endContainer:e,endOffset:0,collapsed:E,commonAncestorContainer:e,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:q,setEnd:s,setStartBefore:g,setStartAfter:J,setEndBefore:K,setEndAfter:u,collapse:B,selectNode:y,selectNodeContents:G,compareBoundaryPoints:v,deleteContents:p,extractContents:I,cloneContents:d,insertNode:D,surroundContents:N,cloneRange:L,toStringIE:T}),O}a.Range=b,b.prototype.toString=function(){return this.toStringIE()}}(tinymce.dom),function(){function a(d){function e(i,j){var k,q,n,m,l,o,r,s,t=0,p=-1;if(k=i.duplicate(),k.collapse(j),s=k.parentElement(),s.ownerDocument===d.dom.doc){for(;"false"===s.contentEditable;)s=s.parentNode;if(!s.hasChildNodes())return{node:s,inside:1};for(m=s.children,q=m.length-1;t<=q;)if(r=Math.floor((t+q)/2),l=m[r],k.moveToElementText(l),p=k.compareEndPoints(j?"StartToStart":"EndToEnd",i),p>0)q=r-1;else{if(!(p<0))return{node:l};t=r+1}if(p<0)for(l?k.collapse(!1):(k.moveToElementText(s),k.collapse(!0),l=s,n=!0),o=0;0!==k.compareEndPoints(j?"StartToStart":"StartToEnd",i)&&0!==k.move("character",1)&&s==k.parentElement();)o++;else for(k.collapse(!0),o=0;0!==k.compareEndPoints(j?"StartToStart":"StartToEnd",i)&&0!==k.move("character",-1)&&s==k.parentElement();)o++;return{node:l,position:p,offset:o,inside:n}}}function g(){function o(A){var s,y,x,v,t,u=e(i,A),z=0;if(s=u.node,y=u.offset,u.inside&&!s.hasChildNodes())return void r[A?"setStart":"setEnd"](s,0);if(y===v)return void r[A?"setStartBefore":"setEndAfter"](s);if(u.position<0){if(x=u.inside?s.firstChild:s.nextSibling,!x)return void r[A?"setStartAfter":"setEndAfter"](s);if(!y)return void(3==x.nodeType?r[A?"setStart":"setEnd"](x,0):r[A?"setStartBefore":"setEndBefore"](x));for(;x;){if(t=x.nodeValue,z+=t.length,z>=y){s=x,z-=y,z=t.length-z;break}x=x.nextSibling}}else{if(x=s.previousSibling,!x)return r[A?"setStartBefore":"setEndBefore"](s);if(!y)return void(3==s.nodeType?r[A?"setStart":"setEnd"](x,s.nodeValue.length):r[A?"setStartAfter":"setEndAfter"](x));for(;x;){if(z+=x.nodeValue.length,z>=y){s=x,z-=y;break}x=x.previousSibling}}r[A?"setStart":"setEnd"](s,z)}var l,k,p,q,m,i=d.getRng(),r=h.createRng();if(l=i.item?i.item(0):i.parentElement(),l.ownerDocument!=h.doc)return r;if(k=d.isCollapsed(),i.item)return r.setStart(l.parentNode,h.nodeIndex(l)),r.setEnd(r.startContainer,r.startOffset+1),r;try{o(!0),k||o()}catch(n){if(n.number!=-2147024809)throw n;m=b.getBookmark(2),p=i.duplicate(),p.collapse(!0),l=p.parentElement(),k||(p=i.duplicate(),p.collapse(!1),q=p.parentElement(),q.innerHTML=q.innerHTML),l.innerHTML=l.innerHTML,b.moveToBookmark(m),i=d.getRng(),o(!0),k||o()}return r}var b=this,h=d.dom,f=!1;this.getBookmark=function(m){function n(u){var t,p,s,r,q=[];for(t=u.parentNode,p=h.getRoot().parentNode;t!=p&&9!==t.nodeType;){for(s=t.children,r=s.length;r--;)if(u===s[r]){q.push(r);break}u=t,t=t.parentNode}return q}function k(q){var p;if(p=e(j,q))return{position:p.position,offset:p.offset,indexes:n(p.node),inside:p.inside}}var j=d.getRng(),l={};return 2===m&&(j.item?l.start={ctrl:!0,indexes:n(j.item(0))}:(l.start=k(!0),d.isCollapsed()||(l.end=k()))),l},this.moveToBookmark=function(k){function m(o){var r,q,n,p;for(r=h.getRoot(),q=o.length-1;q>=0;q--)p=r.children,n=o[q],n<=p.length-1&&(r=p[n]);return r}function l(r){var q,p,o,n=k[r?"start":"end"];n&&(q=n.position>0,p=i.createTextRange(),p.moveToElementText(m(n.indexes)),offset=n.offset,offset!==o?(p.collapse(n.inside||q),p.moveStart("character",q?-offset:offset)):p.collapse(r),j.setEndPoint(r?"StartToStart":"EndToStart",p),r&&j.collapse(!0))}var j,i=h.doc.body;k.start&&(k.start.ctrl?(j=i.createControlRange(),j.addElement(m(k.start.indexes)),j.select()):(j=i.createTextRange(),l(!0),l(),j.select()))},this.addRange=function(i){function j(C){var y,B,x,A,z;x=h.create("a"),y=C?k:v,B=C?p:q,A=n.duplicate(),y!=s&&y!=s.documentElement||(y=m,B=0),3==y.nodeType?(y.parentNode.insertBefore(x,y),A.moveToElementText(x),A.moveStart("character",B),h.remove(x),n.setEndPoint(C?"StartToStart":"EndToEnd",A)):(z=y.childNodes,z.length?(B>=z.length?h.insertAfter(x,z[z.length-1]):y.insertBefore(x,z[B]),A.moveToElementText(x)):y.canHaveHTML&&(y.innerHTML="<span>\ufeff</span>",x=y.firstChild,A.moveToElementText(x),A.collapse(f)),n.setEndPoint(C?"StartToStart":"EndToEnd",A),h.remove(x))}var n,l,k,p,v,q,t,r,u,s=d.dom.doc,m=s.body;if(k=i.startContainer,p=i.startOffset,v=i.endContainer,q=i.endOffset,n=m.createTextRange(),k==v&&1==k.nodeType){if(p==q&&!k.hasChildNodes()){if(k.canHaveHTML)return t=k.previousSibling,t&&!t.hasChildNodes()&&h.isBlock(t)?t.innerHTML="\ufeff":t=null,k.innerHTML="<span>\ufeff</span><span>\ufeff</span>",n.moveToElementText(k.lastChild),n.select(),h.doc.selection.clear(),k.innerHTML="",void(t&&(t.innerHTML=""));p=h.nodeIndex(k),k=k.parentNode}if(p==q-1)try{if(u=k.childNodes[p],l=m.createControlRange(),l.addElement(u),l.select(),r=d.getRng(),r.item&&u===r.item(0))return}catch(o){}}j(!0),j(),n.select()},this.getRangeAt=g}tinymce.dom.TridentSelection=a}(),function(a){a.dom.Element=function(f,d){var e,c,b=this;b.settings=d=d||{},b.id=f,b.dom=e=d.dom||a.DOM,a.isIE||(c=e.get(b.id)),a.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),function(g){b[g]=function(){var j,h=[f];for(j=0;j<arguments.length;j++)h.push(arguments[j]);return h=e[g].apply(e,h),b.update(g),h}}),a.extend(b,{on:function(i,h,g){return a.dom.Event.add(b.id,i,h,g)},getXY:function(){return{x:parseInt(b.getStyle("left")),y:parseInt(b.getStyle("top"))}},getSize:function(){var g=e.get(b.id);return{w:parseInt(b.getStyle("width")||g.clientWidth),h:parseInt(b.getStyle("height")||g.clientHeight)}},moveTo:function(g,h){b.setStyles({left:g,top:h})},moveBy:function(g,i){var h=b.getXY();b.moveTo(h.x+g,h.y+i)},resizeTo:function(g,i){b.setStyles({width:g,height:i})},resizeBy:function(g,j){var i=b.getSize();b.resizeTo(i.w+g,i.h+j)},update:function(h){var g;if(a.isIE6&&d.blocker){if(h=h||"",0===h.indexOf("get")||0===h.indexOf("has")||0===h.indexOf("is"))return;if("remove"==h)return void e.remove(b.blocker);b.blocker?g=e.get(b.blocker):(b.blocker=e.uniqueId(),g=e.add(d.container||e.getRoot(),"iframe",{id:b.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'}),e.setStyle(g,"opacity",0)),e.setStyles(g,{left:b.getStyle("left",1),top:b.getStyle("top",1),width:b.getStyle("width",1),height:b.getStyle("height",1),display:b.getStyle("display",1),zIndex:parseInt(b.getStyle("zIndex",1)||0)-1})}}})}}(tinymce),function(d){var c=d.is,b=d.isIE,e=d.each,a=d.dom.TreeWalker;d.create("tinymce.dom.Selection",{Selection:function(k,j,i,h){var g=this;g.dom=k,g.win=j,g.serializer=i,g.editor=h,e(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(l){g[l]=new d.util.Dispatcher(g)}),g.win.getSelection||(g.tridentSel=new d.dom.TridentSelection(g)),d.isIE&&k.boxModel&&this._fixIESelection(),d.addUnload(g.destroy,g)},setCursorLocation:function(i,j){var g=this,h=g.dom.createRng();h.setStart(i,j),h.setEnd(i,j),g.setRng(h),g.collapse(!1)},getContent:function(h){var j,l,o,g=this,i=g.getRng(),m=g.dom.create("body"),k=g.getSel();return h=h||{},j=l="",h.get=!0,h.format=h.format||"html",h.forced_root_block="",g.onBeforeGetContent.dispatch(g,h),"text"==h.format?g.isCollapsed()?"":i.text||(k.toString?k.toString():""):(i.cloneContents?(o=i.cloneContents(),o&&m.appendChild(o)):c(i.item)||c(i.htmlText)?(m.innerHTML="<br>"+(i.item?i.item(0).outerHTML:i.htmlText),m.removeChild(m.firstChild)):m.innerHTML=i.toString(),/^\s/.test(m.innerHTML)&&(j=" "),/\s+$/.test(m.innerHTML)&&(l=" "),h.getInner=!0,h.content=g.isCollapsed()?"":j+g.serializer.serialize(m,h)+l,g.onGetContent.dispatch(g,h),h.content)},setContent:function(h,j){var k,n,m,o=this,g=o.getRng(),l=o.win.document;if(j=j||{format:"html"},j.set=!0,h=j.content=h,j.no_events||o.onBeforeSetContent.dispatch(o,j),h=j.content,g.insertNode){h+='<span id="__caret">_</span>',g.startContainer==l&&g.endContainer==l?l.body.innerHTML=h:(g.deleteContents(),0===l.body.childNodes.length?l.body.innerHTML=h:g.createContextualFragment?g.insertNode(g.createContextualFragment(h)):(n=l.createDocumentFragment(),m=l.createElement("div"),n.appendChild(m),m.outerHTML=h,g.insertNode(n))),k=o.dom.get("__caret"),g=l.createRange(),g.setStartBefore(k),g.setEndBefore(k),o.setRng(g),o.dom.remove("__caret");try{o.setRng(g)}catch(i){}}else g.item&&(l.execCommand("Delete",!1,null),g=o.getRng()),/^\s+/.test(h)?(g.pasteHTML('<span id="__mce_tmp">_</span>'+h),o.dom.remove("__mce_tmp")):g.pasteHTML(h);j.no_events||o.onSetContent.dispatch(o,j)},getStart:function(){var j,g,l,k,i=this,h=i.getRng();if(h.duplicate||h.item){if(h.item)return h.item(0);for(l=h.duplicate(),l.collapse(1),j=l.parentElement(),j.ownerDocument!==i.dom.doc&&(j=i.dom.getRoot()),g=k=h.parentElement();k=k.parentNode;)if(k==j){j=g;break}return j}return j=h.startContainer,1==j.nodeType&&j.hasChildNodes()&&(j=j.childNodes[Math.min(j.childNodes.length-1,h.startOffset)]),j&&3==j.nodeType?j.parentNode:j},getEnd:function(){var j,i,h=this,g=h.getRng();return g.duplicate||g.item?g.item?g.item(0):(g=g.duplicate(),g.collapse(0),j=g.parentElement(),j.ownerDocument!==h.dom.doc&&(j=h.dom.getRoot()),j&&"BODY"==j.nodeName?j.lastChild||j:j):(j=g.endContainer,i=g.endOffset,1==j.nodeType&&j.hasChildNodes()&&(j=j.childNodes[i>0?i-1:i]),j&&3==j.nodeType?j.parentNode:j)},getBookmark:function(s,v){function g(z,A){var t=0;return e(n.select(z),function(C,B){C==A&&(t=B)}),t}function u(t){function z(E){var A,D,C,B=E?"start":"end";A=t[B+"Container"],D=t[B+"Offset"],1==A.nodeType&&"TR"==A.nodeName&&(C=A.childNodes,A=C[Math.min(E?D:D-1,C.length-1)],A&&(D=E?0:A.childNodes.length,t["set"+(E?"Start":"End")](A,D)))}return z(!0),z(),t}function l(){function B(E,J){var F,H,D=E[J?"startContainer":"endContainer"],I=E[J?"startOffset":"endOffset"],C=[],G=0;if(3==D.nodeType){if(v)for(F=D.previousSibling;F&&3==F.nodeType;F=F.previousSibling)I+=F.nodeValue.length;C.push(I)}else H=D.childNodes,I>=H.length&&H.length&&(G=1,I=Math.max(0,H.length-1)),C.push(y.dom.nodeIndex(H[I],v)+G);for(;D&&D!=t;D=D.parentNode)C.push(y.dom.nodeIndex(D,v));return C}var z=y.getRng(!0),t=n.getRoot(),A={};return A.start=B(z,!0),y.isCollapsed()||(A.end=B(z)),A}var h,k,j,o,i,p,x,y=this,n=y.dom,m="\ufeff";if(2==s)return y.tridentSel?y.tridentSel.getBookmark(s):l();if(s)return{rng:y.getRng()};if(h=y.getRng(),j=n.uniqueId(),o=tinyMCE.activeEditor.selection.isCollapsed(),x="overflow:hidden;line-height:0px",h.duplicate||h.item){if(h.item)return p=h.item(0),i=p.nodeName,{name:i,index:g(i,p)};k=h.duplicate();try{h.collapse(),h.pasteHTML('<span data-mce-type="bookmark" id="'+j+'_start" style="'+x+'">'+m+"</span>"),o||(k.collapse(!1),h.moveToElementText(k.parentElement()),0===h.compareEndPoints("StartToEnd",k)&&k.move("character",-1),k.pasteHTML('<span data-mce-type="bookmark" id="'+j+'_end" style="'+x+'">'+m+"</span>"))}catch(r){return null}}else{if(p=y.getNode(),i=p.nodeName,"IMG"==i)return{name:i,index:g(i,p)};k=u(h.cloneRange()),o||(k.collapse(!1),k.insertNode(n.create("span",{"data-mce-type":"bookmark",id:j+"_end",style:x},m))),h=u(h),h.collapse(!0),h.insertNode(n.create("span",{"data-mce-type":"bookmark",id:j+"_start",style:x},m))}return y.moveToBookmark({id:j,keep:1}),{id:j}},moveToBookmark:function(o){function h(A){var x,y,z,v,t=o[A?"start":"end"];if(t){for(z=t[0],y=r,x=t.length-1;x>=1;x--){if(v=y.childNodes,t[x]>v.length-1)return;y=v[t[x]]}3===y.nodeType&&(z=Math.min(t[0],y.nodeValue.length)),1===y.nodeType&&(z=Math.min(t[0],y.childNodes.length)),A?g.setStart(y,z):g.setEnd(y,z)}return!0}function l(B){var A,t,y,z,v=m.get(o.id+"_"+B),x=o.keep;if(v&&(A=v.parentNode,"start"==B?(x?(A=v.firstChild,t=1):t=m.nodeIndex(v),k=u=A,p=q=t):(x?(A=v.firstChild,t=1):t=m.nodeIndex(v),u=A,q=t),!x)){for(z=v.previousSibling,y=v.nextSibling,e(d.grep(v.childNodes),function(C){3==C.nodeType&&(C.nodeValue=C.nodeValue.replace(/\uFEFF/g,""))});v=m.get(o.id+"_"+B);)m.remove(v,1);z&&y&&z.nodeType==y.nodeType&&3==z.nodeType&&!d.isOpera&&(t=z.nodeValue.length,z.appendData(y.nodeValue),m.remove(y),"start"==B?(k=u=z,p=q=t):(u=z,q=t))}}function n(t){return!m.isBlock(t)||t.innerHTML||b||(t.innerHTML='<br data-mce-bogus="1" />'),t}var g,r,k,u,p,q,s=this,m=s.dom;if(o)if(o.start){if(g=m.createRng(),r=m.getRoot(),s.tridentSel)return s.tridentSel.moveToBookmark(o);h(!0)&&h()&&s.setRng(g)}else o.id?(l("start"),l("end"),k&&(g=m.createRng(),g.setStart(n(k),p),g.setEnd(n(u),q),s.setRng(g))):o.name?s.select(m.select(o.name)[o.index]):o.rng&&s.setRng(o.rng)},select:function(l,k){function i(n,p){var o=new a(n,n);do{if(3==n.nodeType&&0!==d.trim(n.nodeValue).length)return void(p?h.setStart(n,0):h.setEnd(n,n.nodeValue.length));if("BR"==n.nodeName)return void(p?h.setStartBefore(n):h.setEndBefore(n))}while(n=p?o.next():o.prev())}var g,j=this,m=j.dom,h=m.createRng();return l&&(g=m.nodeIndex(l),h.setStart(l.parentNode,g),h.setEnd(l.parentNode,g+1),k&&(i(l,1),i(l)),j.setRng(h)),l},isCollapsed:function(){var g=this,i=g.getRng(),h=g.getSel();return!(!i||i.item)&&(i.compareEndPoints?0===i.compareEndPoints("StartToEnd",i):!h||i.collapsed)},collapse:function(g){var j,i=this,h=i.getRng();h.item&&(j=h.item(0),h=i.win.document.body.createTextRange(),h.moveToElementText(j)),h.collapse(!!g),i.setRng(h)},getSel:function(){var g=this.win;return g.getSelection?g.getSelection():g.document.selection},getRng:function(m){var j,g,l,h=this,k=h.win.document;if(m&&h.tridentSel)return h.tridentSel.getRangeAt(0);try{(j=h.getSel())&&(g=j.rangeCount>0?j.getRangeAt(0):j.createRange?j.createRange():k.createRange())}catch(i){}return d.isIE&&g&&g.setStart&&k.selection.createRange().item&&(l=k.selection.createRange().item(0),g=k.createRange(),g.setStartBefore(l),g.setEndAfter(l)),g||(g=k.createRange?k.createRange():k.body.createTextRange()),g.setStart&&9===g.startContainer.nodeType&&g.collapsed&&(l=h.dom.getRoot(),g.setStart(l,0),g.setEnd(l,0)),h.selectedRange&&h.explicitRange&&(0===g.compareBoundaryPoints(g.START_TO_START,h.selectedRange)&&0===g.compareBoundaryPoints(g.END_TO_END,h.selectedRange)?g=h.explicitRange:(h.selectedRange=null,h.explicitRange=null)),g},setRng:function(k,g){var j,i=this;if(i.tridentSel){if(k.cloneRange)try{return void i.tridentSel.addRange(k)}catch(h){}try{k.select()}catch(h){}}else if(j=i.getSel()){i.explicitRange=k;try{j.removeAllRanges()}catch(h){}j.addRange(k),g===!1&&j.extend&&(j.collapse(k.endContainer,k.endOffset),j.extend(k.startContainer,k.startOffset)),i.selectedRange=j.rangeCount>0?j.getRangeAt(0):null}},setNode:function(h){var g=this;return g.setContent(g.dom.getOuterHTML(h)),h},getNode:function(){function k(q,o){for(var p=q;q&&3===q.nodeType&&0===q.length;)q=o?q.nextSibling:q.previousSibling;return q||p}var m,i=this,h=i.getRng(),l=(i.getSel(),h.startContainer),g=h.endContainer;return h?h.setStart?(m=h.commonAncestorContainer,!h.collapsed&&(h.startContainer==h.endContainer&&h.endOffset-h.startOffset<2&&h.startContainer.hasChildNodes()&&(m=h.startContainer.childNodes[h.startOffset]),3===l.nodeType&&3===g.nodeType&&(l=l.length===h.startOffset?k(l.nextSibling,!0):l.parentNode,g=0===h.endOffset?k(g.previousSibling,!1):g.parentNode,l&&l===g))?l:m&&3==m.nodeType?m.parentNode:m):h.item?h.item(0):h.parentElement():i.dom.getRoot()},getSelectedBlocks:function(p,h){var m,l,i,o=this,k=o.dom,j=[];if(m=k.getParent(p||o.getStart(),k.isBlock),l=k.getParent(h||o.getEnd(),k.isBlock),m&&j.push(m),m&&l&&m!=l){i=m;for(var g=new a(m,k.getRoot());(i=g.next())&&i!=l;)k.isBlock(i)&&j.push(i)}return l&&m!=l&&j.push(l),j},isForward:function(){var j,h,i=this.dom,g=this.getSel();return!g||null==g.anchorNode||null==g.focusNode||(j=i.createRng(),j.setStart(g.anchorNode,g.anchorOffset),j.collapse(!0),h=i.createRng(),h.setStart(g.focusNode,g.focusOffset),h.collapse(!0),j.compareBoundaryPoints(j.START_TO_START,h)<=0)},normalize:function(){function k(p){function y(z,A){for(var B=new a(z,s.getParent(z.parentNode,s.isBlock)||u);z=B[A?"prev":"next"]();)if("BR"===z.nodeName)return!0}function x(B,z){var C,A;for(z=z||o,C=new a(z,s.getParent(z.parentNode,s.isBlock)||u);q=C[B?"prev":"next"]();){if(3===q.nodeType&&q.nodeValue.length>0)return o=q,r=B?q.nodeValue.length:0,void(m=!0);if(s.isBlock(q)||t[q.nodeName.toLowerCase()])return;A=q}l&&A&&(o=A,m=!0,r=0)}var o,r,n,q,t,v,s=h.dom,u=s.getRoot();if(o=g[(p?"start":"end")+"Container"],r=g[(p?"start":"end")+"Offset"],t=s.schema.getNonEmptyElements(),9===o.nodeType&&(o=s.getRoot(),r=0),o===u){if(p&&(q=o.childNodes[r>0?r-1:0],q&&(v=q.nodeName.toLowerCase(),t[q.nodeName]||"TABLE"==q.nodeName)))return;if(o.hasChildNodes()&&(o=o.childNodes[Math.min(!p&&r>0?r-1:r,o.childNodes.length-1)],r=0,o.hasChildNodes()&&!/TABLE/.test(o.nodeName))){q=o,n=new a(o,u);do{if(3===q.nodeType&&q.nodeValue.length>0){r=p?0:q.nodeValue.length,o=q,m=!0;break}if(t[q.nodeName.toLowerCase()]){r=s.nodeIndex(q),o=q.parentNode,"IMG"!=q.nodeName||p||r++,m=!0;break}}while(q=p?n.next():n.prev())}}l&&(3===o.nodeType&&0===r&&x(!0),1===o.nodeType&&(q=o.childNodes[r],!q||"BR"!==q.nodeName||y(q)||y(q,!0)||x(!0,o.childNodes[r]))),p&&!l&&3===o.nodeType&&r===o.nodeValue.length&&x(!1),m&&g["set"+(p?"Start":"End")](o,r)}var g,m,l,h=this;d.isIE||(g=h.getRng(),l=g.collapsed,k(!0),l||k(),m&&(l&&g.collapse(!0),h.setRng(g,h.isForward())))},selectorChanged:function(g,j){var i,h=this;
return h.selectorChangedData||(h.selectorChangedData={},i={},h.editor.onNodeChange.addToTop(function(l,k,o){var p=h.dom,m=p.getParents(o,null,p.getRoot()),n={};e(h.selectorChangedData,function(r,q){e(m,function(s){if(p.is(s,q))return i[q]||(e(r,function(t){t(!0,{node:s,selector:q,parents:m})}),i[q]=r),n[q]=r,!1})}),e(i,function(r,q){n[q]||(delete i[q],e(r,function(s){s(!1,{node:o,selector:q,parents:m})}))})})),h.selectorChangedData[g]||(h.selectorChangedData[g]=[]),h.selectorChangedData[g].push(j),h},scrollIntoView:function(k){var j,h,g=this,i=g.dom;h=i.getViewPort(g.editor.getWin()),j=i.getPos(k).y,(j<h.y||j+25>h.y+h.h)&&g.editor.getWin().scrollTo(0,j<h.y?j:j-h.h+25)},destroy:function(h){var g=this;g.win=null,h||d.removeUnload(g.destroy)},_fixIESelection:function(){function j(p,s){var q=i.createTextRange();try{q.moveToPoint(p,s)}catch(r){q=null}return q}function m(q){var p;q.button?(p=j(q.x,q.y),p&&(p.compareEndPoints("StartToStart",o)>0?p.setEndPoint("StartToStart",o):p.setEndPoint("EndToEnd",o),p.select())):l()}function l(){var p=n.selection.createRange();o&&!p.item&&0===p.compareEndPoints("StartToEnd",p)&&o.select(),h.unbind(n,"mouseup",l),h.unbind(n,"mousemove",m),o=k=0}var k,o,g,h=this.dom,n=h.doc,i=n.body;n.documentElement.unselectable=!0,h.bind(n,["mousedown","contextmenu"],function(p){if("HTML"===p.target.nodeName){if(k&&l(),g=n.documentElement,g.scrollHeight>g.clientHeight)return;k=1,o=j(p.x,p.y),o&&(h.bind(n,"mouseup",l),h.bind(n,"mousemove",m),h.win.focus(),o.select())}})}})}(tinymce),function(a){a.dom.Serializer=function(e,i,f){var h,b,c,d=a.isIE,g=a.each;return e.apply_source_formatting||(e.indent=!1),i=i||a.DOM,f=f||new a.html.Schema(e),e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs=!("remove_trailing_brs"in e)||e.remove_trailing_brs,h=new a.util.Dispatcher(self),b=new a.util.Dispatcher(self),c=new a.html.DomParser(e,f),c.addAttributeFilter("src,href,style",function(k,j){for(var l,q,m,o=k.length,n="data-mce-"+j,p=e.url_converter,r=e.url_converter_scope;o--;)l=k[o],q=l.attributes.map[n],q!==m?(l.attr(j,q.length>0?q:null),l.attr(n,null)):(q=l.attributes.map[j],"style"===j?q=i.serializeStyle(i.parseStyle(q),l.name):p&&(q=p.call(r,q,j,l.name)),l.attr(j,q.length>0?q:null))}),c.addAttributeFilter("class",function(j,k){for(var m,n,l=j.length;l--;)m=j[l],n=m.attr("class").replace(/(?:^|\s)mce(Item\w+|Selected)(?!\S)/g,""),m.attr("class",n.length>0?n:null)}),c.addAttributeFilter("data-mce-type",function(j,l,k){for(var n,m=j.length;m--;)n=j[m],"bookmark"!==n.attributes.map["data-mce-type"]||k.cleanup||n.remove()}),c.addAttributeFilter("data-mce-expando",function(j,l,k){for(var m=j.length;m--;)j[m].attr(l,null)}),c.addNodeFilter("noscript",function(j){for(var l,k=j.length;k--;)l=j[k].firstChild,l&&(l.value=a.html.Entities.decode(l.value))}),c.addNodeFilter("script,style",function(k,l){function j(p){return p.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}for(var n,o,m=k.length;m--;)n=k[m],o=n.firstChild?n.firstChild.value:"","script"===l?(n.attr("type",(n.attr("type")||"text/javascript").replace(/^mce\-/,"")),o.length>0&&(n.firstChild.value="// <![CDATA[\n"+j(o)+"\n// ]]>")):o.length>0&&(n.firstChild.value="<!--\n"+j(o)+"\n-->")}),c.addNodeFilter("#comment",function(j,k){for(var m,l=j.length;l--;)m=j[l],0===m.value.indexOf("[CDATA[")?(m.name="#cdata",m.type=4,m.value=m.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===m.value.indexOf("mce:protected ")&&(m.name="#text",m.type=3,m.raw=!0,m.value=unescape(m.value).substr(14))}),c.addNodeFilter("xml:namespace,input",function(j,k){for(var m,l=j.length;l--;)m=j[l],7===m.type?m.remove():1===m.type&&("input"!==k||"type"in m.attributes.map||m.attr("type","text"))}),e.fix_list_elements&&c.addNodeFilter("ul,ol",function(k,l){for(var n,j,m=k.length;m--;)n=k[m],j=n.parent,"ul"!==j.name&&"ol"!==j.name||n.prev&&"li"===n.prev.name&&n.prev.append(n)}),c.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",function(j,k){for(var l=j.length;l--;)j[l].attr(k,null)}),{schema:f,addNodeFilter:c.addNodeFilter,addAttributeFilter:c.addAttributeFilter,onPreProcess:h,onPostProcess:b,serialize:function(o,m){var l,p,k,j,n;return d&&i.select("script,style,select,map").length>0?(n=o.innerHTML,o=o.cloneNode(!1),i.setHTML(o,n)):o=o.cloneNode(!0),l=o.ownerDocument.implementation,l.createHTMLDocument&&(p=l.createHTMLDocument(""),g("BODY"==o.nodeName?o.childNodes:[o],function(q){p.body.appendChild(p.importNode(q,!0))}),o="BODY"!=o.nodeName?p.body.firstChild:p.body,k=i.doc,i.doc=p),m=m||{},m.format=m.format||"html",m.no_events||(m.node=o,h.dispatch(self,m)),j=new a.html.Serializer(e,f),m.content=j.serialize(c.parse(a.trim(m.getInner?o.innerHTML:i.getOuterHTML(o)),m)),m.cleanup||(m.content=m.content.replace(/\uFEFF/g,"")),m.no_events||b.dispatch(self,m),k&&(i.doc=k),m.node=null,m.content},addRules:function(j){f.addValidElements(j)},setRules:function(j){f.setValidElements(j)}}}}(tinymce),function(a){a.dom.ScriptLoader=function(h){function b(m,v){function p(){q.remove(n),s&&(s.onreadystatechange=s.onload=s=null),v()}function u(){"undefined"!=typeof console&&console.log&&console.log("Failed to load: "+m)}var s,o,r,n,q=a.DOM;return n=q.uniqueId(),a.isIE6&&(o=new a.util.URI(m),r=location,o.host==r.hostname&&o.port==r.port&&o.protocol+":"==r.protocol&&"file"!=o.protocol.toLowerCase())?void a.util.XHR.send({url:a._addVer(o.getURI()),success:function(y){var t=q.create("script",{type:"text/javascript"});t.text=y,document.getElementsByTagName("head")[0].appendChild(t),q.remove(t),p()},error:u}):(s=document.createElement("script"),s.id=n,s.type="text/javascript",s.src=a._addVer(m),a.isIE||(s.onload=p),s.onerror=u,a.isOpera||(s.onreadystatechange=function(){var t=s.readyState;"complete"!=t&&"loaded"!=t||p()}),void(document.getElementsByTagName("head")[0]||document.body).appendChild(s))}var f,c=0,k=1,i=2,l={},j=[],e={},d=[],g=0;this.isDone=function(m){return l[m]==i},this.markDone=function(m){l[m]=i},this.add=this.load=function(m,q,n){var p=l[m];p==f&&(j.push(m),l[m]=c),q&&(e[m]||(e[m]=[]),e[m].push({func:q,scope:n||this}))},this.loadQueue=function(n,m){this.loadScripts(j,n,m)},this.loadScripts=function(m,q,p){function n(r){a.each(e[r],function(s){s.func.call(s.scope)}),e[r]=f}var o;d.push({func:q,scope:p||this}),(o=function(){var r=a.grep(m);m.length=0,a.each(r,function(s){return l[s]==i?void n(s):void(l[s]!=k&&(l[s]=k,g++,b(s,function(){l[s]=i,g--,n(s),o()})))}),g||(a.each(d,function(s){s.func.call(s.scope)}),d.length=0)})()}},a.ScriptLoader=new a.dom.ScriptLoader}(tinymce),function(a){a.dom.RangeUtils=function(c){this.walk=function(d,s){function f(u){var v;return v=u[0],3===v.nodeType&&v===i&&l>=v.nodeValue.length&&u.splice(0,1),v=u[u.length-1],0===m&&u.length>0&&v===t&&3===v.nodeType&&u.splice(u.length-1,1),u}function p(x,v,u){for(var y=[];x&&x!=u;x=x[v])y.push(x);return y}function n(v,u){do{if(v.parentNode==u)return v;v=v.parentNode}while(v)}function k(x,v,y){var u=y?"nextSibling":"previousSibling";for(h=x,r=h.parentNode;h&&h!=v;h=r)r=h.parentNode,q=p(h==x?h:h[u],u),q.length&&(y||q.reverse(),s(f(q)))}var j,g,o,h,r,q,e,i=d.startContainer,l=d.startOffset,t=d.endContainer,m=d.endOffset;if(e=c.select("td.mceSelected,th.mceSelected"),e.length>0)return void a.each(e,function(u){s([u])});if(1==i.nodeType&&i.hasChildNodes()&&(i=i.childNodes[l]),1==t.nodeType&&t.hasChildNodes()&&(t=t.childNodes[Math.min(m-1,t.childNodes.length-1)]),i==t)return s(f([i]));for(j=c.findCommonAncestor(i,t),h=i;h;h=h.parentNode){if(h===t)return k(i,j,!0);if(h===j)break}for(h=t;h;h=h.parentNode){if(h===i)return k(t,j);if(h===j)break}g=n(i,j)||i,o=n(t,j)||t,k(i,g,!0),q=p(g==i?g:g.nextSibling,"nextSibling",o==t?o.nextSibling:o),q.length&&s(f(q)),k(t,o)},this.split=function(e){function f(j,k){return j.splitText(k)}var h=e.startContainer,d=e.startOffset,i=e.endContainer,g=e.endOffset;return h==i&&3==h.nodeType?d>0&&d<h.nodeValue.length&&(i=f(h,d),h=i.previousSibling,g>d?(g-=d,h=i=f(i,g).previousSibling,g=i.nodeValue.length,d=0):g=0):(3==h.nodeType&&d>0&&d<h.nodeValue.length&&(h=f(h,d),d=0),3==i.nodeType&&g>0&&g<i.nodeValue.length&&(i=f(i,g).previousSibling,g=i.nodeValue.length)),{startContainer:h,startOffset:d,endContainer:i,endOffset:g}}},a.dom.RangeUtils.compareRanges=function(c,b){if(c&&b){if(!c.item&&!c.duplicate)return c.startContainer==b.startContainer&&c.startOffset==b.startOffset;if(c.item&&b.item&&c.item(0)===b.item(0))return!0;if(c.isEqual&&b.isEqual&&b.isEqual(c))return!0}return!1}}(tinymce),function(b){var a=b.dom.Event,c=b.each;b.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(e,f){var k,h,p,d,g,q=this,n=e.root,m=e.items,o=e.enableUpDown,i=e.enableLeftRight||!e.enableUpDown,l=e.excludeFromTabOrder;f=f||b.DOM,k=function(r){g=r.target.id},h=function(r){f.setAttrib(r.target.id,"tabindex","-1")},d=function(r){var s=f.get(g);f.setAttrib(s,"tabindex","0"),s.focus()},q.focus=function(){f.get(g).focus()},q.destroy=function(){c(m,function(s){var t=f.get(s.id);f.unbind(t,"focus",k),f.unbind(t,"blur",h)});var r=f.get(n);f.unbind(r,"focus",d),f.unbind(r,"keydown",p),m=f=n=q.focus=k=h=p=d=null,q.destroy=function(){}},q.moveFocus=function(v,s){var t,r=-1;q.controls;g&&(c(m,function(y,x){if(y.id===g)return r=x,!1}),r+=v,r<0?r=m.length-1:r>=m.length&&(r=0),t=m[r],f.setAttrib(g,"tabindex","-1"),f.setAttrib(t.id,"tabindex","0"),f.get(t.id).focus(),e.actOnFocus&&e.onAction(t.id),s&&a.cancel(s))},p=function(z){var v=37,u=39,y=38,A=40,r=27,t=14,s=13,x=32;switch(z.keyCode){case v:i&&q.moveFocus(-1);break;case u:i&&q.moveFocus(1);break;case y:o&&q.moveFocus(-1);break;case A:o&&q.moveFocus(1);break;case r:e.onCancel&&(e.onCancel(),a.cancel(z));break;case t:case s:case x:e.onAction&&(e.onAction(g),a.cancel(z))}},c(m,function(t,r){var s,u;t.id||(t.id=f.uniqueId("_mce_item_")),u=f.get(t.id),l?(f.bind(u,"blur",h),s="-1"):s=0===r?"0":"-1",u.setAttribute("tabindex",s),f.bind(u,"focus",k)}),m[0]&&(g=m[0].id),f.setAttrib(n,"tabindex","-1");var j=f.get(n);f.bind(j,"focus",d),f.bind(j,"keydown",p)}})}(tinymce),function(c){var b=c.DOM,a=c.is;c.create("tinymce.ui.Control",{Control:function(f,e,d){this.id=f,this.settings=e=e||{},this.rendered=!1,this.onRender=new c.util.Dispatcher(this),this.classPrefix="",this.scope=e.scope||this,this.disabled=0,this.active=0,this.editor=d},setAriaProperty:function(f,e){var d=b.get(this.id+"_aria")||b.get(this.id);d&&b.setAttrib(d,"aria-"+f,!!e)},focus:function(){b.get(this.id).focus()},setDisabled:function(d){d!=this.disabled&&(this.setAriaProperty("disabled",d),this.setState("Disabled",d),this.setState("Enabled",!d),this.disabled=d)},isDisabled:function(){return this.disabled},setActive:function(d){d!=this.active&&(this.setState("Active",d),this.active=d,this.setAriaProperty("pressed",d))},isActive:function(){return this.active},setState:function(f,d){var e=b.get(this.id);f=this.classPrefix+f,d?b.addClass(e,f):b.removeClass(e,f)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(d){b.setHTML(d,this.renderHTML())},postRender:function(){var d,e=this;a(e.disabled)&&(d=e.disabled,e.disabled=-1,e.setDisabled(d)),a(e.active)&&(d=e.active,e.active=-1,e.setActive(d))},remove:function(){b.remove(this.id),this.destroy()},destroy:function(){c.dom.Event.clear(this.id)}})}(tinymce),tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(c,b,a){this.parent(c,b,a),this.controls=[],this.lookup={}},add:function(a){return this.lookup[a.id]=a,this.controls.push(a),a},get:function(a){return this.lookup[a]}}),tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(b,a){this.parent(b,a),this.classPrefix="mceSeparator",this.setDisabled(!0)},renderHTML:function(){return tinymce.DOM.createHTML("span",{class:this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}}),function(d){var c=d.is;d.DOM,d.each,d.walk;d.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(g,f){this.parent(g,f),this.classPrefix="mceMenuItem"},setSelected:function(f){this.setState("Selected",f),this.setAriaProperty("checked",!!f),this.selected=f},isSelected:function(){return this.selected},postRender:function(){var f=this;f.parent(),c(f.selected)&&f.setSelected(f.selected)}})}(tinymce),function(d){var b=(d.is,d.DOM),a=(d.each,d.walk);d.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(h,g){var f=this;f.parent(h,g),f.items={},f.collapsed=!1,f.menuCount=0,f.onAddItem=new d.util.Dispatcher(this)},expand:function(g){var f=this;g&&a(f,function(h){h.expand&&h.expand()},"items",f),f.collapsed=!1},collapse:function(g){var f=this;g&&a(f,function(h){h.collapse&&h.collapse()},"items",f),f.collapsed=!0},isCollapsed:function(){return this.collapsed},add:function(f){return f.settings||(f=new d.ui.MenuItem(f.id||b.uniqueId(),f)),this.onAddItem.dispatch(this,f),this.items[f.id]=f},addSeparator:function(){return this.add({separator:!0})},addMenu:function(f){return f.collapse||(f=this.createMenu(f)),this.menuCount++,this.add(f)},hasMenus:function(){return 0!==this.menuCount},remove:function(f){delete this.items[f.id]},removeAll:function(){var f=this;a(f,function(g){g.removeAll?g.removeAll():g.remove(),g.destroy()},"items",f),f.items={}},createMenu:function(g){var f=new d.ui.Menu(g.id||b.uniqueId(),g);return f.onAddItem.add(this.onAddItem.dispatch,this.onAddItem),f}})}(tinymce),function(e){var d=e.is,c=e.DOM,f=e.each,a=e.dom.Event,b=e.dom.Element;e.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(h,g){g=g||{},g.container=g.container||c.doc.body,g.offset_x=g.offset_x||0,g.offset_y=g.offset_y||0,g.vp_offset_x=g.vp_offset_x||0,g.vp_offset_y=g.vp_offset_y||0,d(g.icons)&&!g.icons&&(g.class+=" mceNoIcons"),this.parent(h,g),this.onShowMenu=new e.util.Dispatcher(this),this.onHideMenu=new e.util.Dispatcher(this),this.classPrefix="mceMenu"},createMenu:function(j){var g,h=this,i=h.settings;return j.container=j.container||i.container,j.parent=h,j.constrain=j.constrain||i.constrain,j.class=j.class||i.class,j.vp_offset_x=j.vp_offset_x||i.vp_offset_x,j.vp_offset_y=j.vp_offset_y||i.vp_offset_y,j.keyboard_focus=i.keyboard_focus,g=new e.ui.DropMenu(j.id||c.uniqueId(),j),g.onAddItem.add(h.onAddItem.dispatch,h.onAddItem),g},focus:function(){var g=this;g.keyboardNav&&g.keyboardNav.focus()},update:function(){var h,k,i=this,j=i.settings,g=c.get("menu_"+i.id+"_tbl"),l=c.get("menu_"+i.id+"_co");h=j.max_width?Math.min(g.offsetWidth,j.max_width):g.offsetWidth,k=j.max_height?Math.min(g.offsetHeight,j.max_height):g.offsetHeight,c.boxModel?i.element.setStyles({width:h,height:k}):i.element.setStyles({width:h+2,height:k+2}),j.max_width&&c.setStyle(l,"width",h),j.max_height&&(c.setStyle(l,"height",k),g.clientHeight<j.max_height&&c.setStyle(l,"overflow","hidden"))},showMenu:function(p,n,r){var o,u,l,v,q,k,z=this,A=z.settings,g=c.getViewPort(),i=2,m=z.classPrefix;z.collapse(1),z.isMenuVisible||(z.rendered?o=c.get("menu_"+z.id):(o=c.add(z.settings.container,z.renderNode()),f(z.items,function(h){h.postRender()}),z.element=new b("menu_"+z.id,{blocker:1,container:A.container})),e.isOpera||c.setStyles(o,{left:-65535,top:-65535}),c.show(o),z.update(),p+=A.offset_x||0,n+=A.offset_y||0,g.w-=4,g.h-=4,A.constrain&&(u=o.clientWidth-i,l=o.clientHeight-i,v=g.x+g.w,q=g.y+g.h,p+A.vp_offset_x+u>v&&(p=r?r-u:Math.max(0,v-A.vp_offset_x-u)),n+A.vp_offset_y+l>q&&(n=Math.max(0,q-A.vp_offset_y-l))),c.setStyles(o,{left:p,top:n}),z.element.update(),z.isMenuVisible=1,z.mouseClickFunc=a.add(o,"click",function(s){var h;if(s=s.target,s&&(s=c.getParent(s,"tr"))&&!c.hasClass(s,m+"ItemSub")){if(h=z.items[s.id],h.isDisabled())return;for(k=z;k;)k.hideMenu&&k.hideMenu(),k=k.settings.parent;return h.settings.onclick&&h.settings.onclick(s),!1}}),z.hasMenus()&&(z.mouseOverFunc=a.add(o,"mouseover",function(x){var h,t;if(x=x.target,x&&(x=c.getParent(x,"tr"))){if(h=z.items[x.id],z.lastMenu&&z.lastMenu.collapse(1),h.isDisabled())return;x&&c.hasClass(x,m+"ItemSub")&&(t=c.getRect(x),h.showMenu(t.x+t.w-i,t.y-i,t.x),z.lastMenu=h,c.addClass(c.get(h.id).firstChild,m+"ItemActive"))}})),a.add(o,"keydown",z._keyHandler,z),z.onShowMenu.dispatch(z),A.keyboard_focus&&z._setupKeyboardNav())},hideMenu:function(j){var h,g=this,i=c.get("menu_"+g.id);g.isMenuVisible&&(g.keyboardNav&&g.keyboardNav.destroy(),a.remove(i,"mouseover",g.mouseOverFunc),a.remove(i,"click",g.mouseClickFunc),a.remove(i,"keydown",g._keyHandler),c.hide(i),g.isMenuVisible=0,j||g.collapse(1),g.element&&g.element.hide(),(h=c.get(g.id))&&c.removeClass(h.firstChild,g.classPrefix+"ItemActive"),g.onHideMenu.dispatch(g))},add:function(i){var h,g=this;return i=g.parent(i),g.isRendered&&(h=c.get("menu_"+g.id))&&g._add(c.select("tbody",h)[0],i),i},collapse:function(g){this.parent(g),this.hideMenu(1)},remove:function(g){return c.remove(g.id),this.destroy(),this.parent(g)},destroy:function(){var g=this,h=c.get("menu_"+g.id);g.keyboardNav&&g.keyboardNav.destroy(),a.remove(h,"mouseover",g.mouseOverFunc),a.remove(c.select("a",h),"focus",g.mouseOverFunc),a.remove(h,"click",g.mouseClickFunc),a.remove(h,"keydown",g._keyHandler),g.element&&g.element.remove(),c.remove(h)},renderNode:function(){var l,h,k,g,i=this,j=i.settings;return g=c.create("div",{role:"listbox",id:"menu_"+i.id,class:j.class,style:"position:absolute;left:0;top:0;z-index:200000;outline:0"}),i.settings.parent&&c.setAttrib(g,"aria-parent","menu_"+i.settings.parent.id),k=c.add(g,"div",{role:"presentation",id:"menu_"+i.id+"_co",class:i.classPrefix+(j.class?" "+j.class:"")}),i.element=new b("menu_"+i.id,{blocker:1,container:j.container}),j.menu_line&&c.add(k,"span",{class:i.classPrefix+"Line"}),l=c.add(k,"table",{role:"presentation",id:"menu_"+i.id+"_tbl",border:0,cellPadding:0,cellSpacing:0}),h=c.add(l,"tbody"),f(i.items,function(m){i._add(h,m)}),i.rendered=!0,g},_setupKeyboardNav:function(){var i,h,g=this;i=c.get("menu_"+g.id),h=c.select("a[role=option]","menu_"+g.id),h.splice(0,0,i),g.keyboardNav=new e.ui.KeyboardNavigation({root:"menu_"+g.id,items:h,onCancel:function(){g.hideMenu()},enableUpDown:!0}),i.focus()},_keyHandler:function(g){var h=this;switch(g.keyCode){case 37:h.settings.parent&&(h.hideMenu(),h.settings.parent.focus(),a.cancel(g));break;case 39:h.mouseOverFunc&&h.mouseOverFunc(g)}},_add:function(j,h){var i,p,l,k,g,q=h.settings,m=this.classPrefix;return q.separator?(l=c.add(j,"tr",{id:h.id,class:m+"ItemSeparator"}),c.add(l,"td",{class:m+"ItemSeparator"}),void((i=l.previousSibling)&&c.addClass(i,"mceLast"))):(i=l=c.add(j,"tr",{id:h.id,class:m+"Item "+m+"ItemEnabled"}),i=k=c.add(i,q.titleItem?"th":"td"),i=p=c.add(i,"a",{id:h.id+"_aria",role:q.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"}),q.parent&&(c.setAttrib(p,"aria-haspopup","true"),c.setAttrib(p,"aria-owns","menu_"+h.id)),c.addClass(k,q.class),g=c.add(i,"span",{class:"mceIcon"+(q.icon?" mce_"+q.icon:"")}),q.icon_src&&c.add(g,"img",{src:q.icon_src}),i=c.add(i,q.element||"span",{class:"mceText",title:h.settings.title},h.settings.title),h.settings.style&&("function"==typeof h.settings.style&&(h.settings.style=h.settings.style()),c.setAttrib(i,"style",h.settings.style)),1==j.childNodes.length&&c.addClass(l,"mceFirst"),(i=l.previousSibling)&&c.hasClass(i,m+"ItemSeparator")&&c.addClass(l,"mceFirst"),h.collapse&&c.addClass(l,m+"ItemSub"),(i=l.previousSibling)&&c.removeClass(i,"mceLast"),void c.addClass(l,"mceLast"))}})}(tinymce),function(b){var a=b.DOM;b.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(e,d,c){this.parent(e,d,c),this.classPrefix="mceButton"},renderHTML:function(){var d,c,f=this.classPrefix,e=this.settings;return c=a.encode(e.label||""),d='<a role="button" id="'+this.id+'" href="javascript:;" class="'+f+" "+f+"Enabled "+e.class+(c?" "+f+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+a.encode(e.title)+'">',d+=!e.image||this.editor&&this.editor.forcedHighContrastMode?'<span class="mceIcon '+e.class+'"></span>'+(c?'<span class="'+f+'Label">'+c+"</span>":""):'<span class="mceIcon '+e.class+'"><img class="mceIcon" src="'+e.image+'" alt="'+a.encode(e.title)+'" /></span>'+(c?'<span class="'+f+'Label">'+c+"</span>":""),d+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+e.title+"</span>",d+="</a>"},postRender:function(){var c,d=this,e=d.settings;b.isIE&&d.editor&&b.dom.Event.add(d.id,"mousedown",function(f){var g=d.editor.selection.getNode().nodeName;c="IMG"===g?d.editor.selection.getBookmark():null}),b.dom.Event.add(d.id,"click",function(f){if(!d.isDisabled())return b.isIE&&d.editor&&null!==c&&d.editor.selection.moveToBookmark(c),e.onclick.call(e.scope,f)}),b.dom.Event.add(d.id,"keyup",function(f){if(!d.isDisabled()&&f.keyCode==b.VK.SPACEBAR)return e.onclick.call(e.scope,f)})}})}(tinymce),function(e){var c,d=e.DOM,b=e.dom.Event,f=e.each,a=e.util.Dispatcher;e.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(j,i,g){var h=this;h.parent(j,i,g),h.items=[],h.onChange=new a(h),h.onPostRender=new a(h),h.onAdd=new a(h),h.onRenderMenu=new e.util.Dispatcher(this),h.classPrefix="mceListBox",h.marked={}},select:function(h){var j,i,g=this;return g.marked={},h==c?g.selectByIndex(-1):(i=h&&"function"==typeof h?h:function(k){return k==h},void(h!=g.selectedValue&&(f(g.items,function(l,k){if(i(l.value))return j=1,g.selectByIndex(k),!1}),j||g.selectByIndex(-1))))},selectByIndex:function(g){var j,k,h,i=this;i.marked={},g!=i.selectedIndex&&(j=d.get(i.id+"_text"),h=d.get(i.id+"_voiceDesc"),k=i.items[g],k?(i.selectedValue=k.value,i.selectedIndex=g,d.setHTML(j,d.encode(k.title)),d.setHTML(h,i.settings.title+" - "+k.title),d.removeClass(j,"mceTitle"),d.setAttrib(i.id,"aria-valuenow",k.title)):(d.setHTML(j,d.encode(i.settings.title)),d.setHTML(h,d.encode(i.settings.title)),d.addClass(j,"mceTitle"),i.selectedValue=i.selectedIndex=null,d.setAttrib(i.id,"aria-valuenow",i.settings.title)),j=0)},mark:function(g){this.marked[g]=!0},add:function(j,g,i){var h=this;i=i||{},i=e.extend(i,{title:j,value:g}),h.items.push(i),h.onAdd.dispatch(h,i)},getLength:function(){return this.items.length},renderHTML:function(){var j="",g=this,i=g.settings,k=g.classPrefix;return j='<span role="listbox" aria-haspopup="true" aria-labelledby="'+g.id+'_voiceDesc" aria-describedby="'+g.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+g.id+'" cellpadding="0" cellspacing="0" class="'+k+" "+k+"Enabled"+(i.class?" "+i.class:"")+'"><tbody><tr>',j+="<td>"+d.createHTML("span",{id:g.id+"_voiceDesc",class:"voiceLabel",style:"display:none;"},g.settings.title),j+=d.createHTML("a",{id:g.id+"_text",tabindex:-1,href:"javascript:;",class:"mceText",onclick:"return false;",onmousedown:"return false;"},d.encode(g.settings.title))+"</td>",j+="<td>"+d.createHTML("a",{id:g.id+"_open",tabindex:-1,href:"javascript:;",class:"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span></span>')+"</td>",j+="</tr></tbody></table></span>"},showMenu:function(){var j,g,h=this,i=d.get(this.id);if(!h.isDisabled()&&0!==h.items.length){if(h.menu&&h.menu.isMenuVisible)return h.hideMenu();h.isMenuRendered||(h.renderMenu(),h.isMenuRendered=!0),j=d.getPos(i),g=h.menu,g.settings.offset_x=j.x,g.settings.offset_y=j.y,g.settings.keyboard_focus=!e.isOpera,f(h.items,function(k){g.items[k.id]&&g.items[k.id].setSelected(0)}),f(h.items,function(k){g.items[k.id]&&h.marked[k.value]&&g.items[k.id].setSelected(1),k.value===h.selectedValue&&g.items[k.id].setSelected(1)}),g.showMenu(0,i.clientHeight),b.add(d.doc,"mousedown",h.hideMenu,h),d.addClass(h.id,h.classPrefix+"Selected")}},hideMenu:function(h){var g=this;if(g.menu&&g.menu.isMenuVisible){if(d.removeClass(g.id,g.classPrefix+"Selected"),h&&"mousedown"==h.type&&(h.target.id==g.id+"_text"||h.target.id==g.id+"_open"))return;h&&d.getParent(h.target,".mceMenu")||(d.removeClass(g.id,g.classPrefix+"Selected"),b.remove(d.doc,"mousedown",g.hideMenu,g),g.menu.hideMenu())}},renderMenu:function(){var g,h=this;g=h.settings.control_manager.createDropMenu(h.id+"_menu",{menu_line:1,class:h.classPrefix+"Menu mceNoIcons",max_width:250,max_height:150}),g.onHideMenu.add(function(){h.hideMenu(),h.focus()}),g.add({title:h.settings.title,class:"mceMenuItemTitle",onclick:function(){h.settings.onselect("")!==!1&&h.select("")}}),f(h.items,function(i){i.value===c?g.add({title:i.title,role:"option",class:"mceMenuItemTitle",onclick:function(){h.settings.onselect("")!==!1&&h.select("")}}):(i.id=d.uniqueId(),i.role="option",i.onclick=function(){h.settings.onselect(i.value)!==!1&&h.select(i.value)},g.add(i))}),h.onRenderMenu.dispatch(h,g),h.menu=g},postRender:function(){var g=this,h=g.classPrefix;b.add(g.id,"click",g.showMenu,g),b.add(g.id,"keydown",function(i){32==i.keyCode&&(g.showMenu(i),b.cancel(i))}),b.add(g.id,"focus",function(){g._focused||(g.keyDownHandler=b.add(g.id,"keydown",function(i){40==i.keyCode&&(g.showMenu(),b.cancel(i))}),g.keyPressHandler=b.add(g.id,"keypress",function(j){var i;13==j.keyCode&&(i=g.selectedValue,g.selectedValue=null,b.cancel(j),g.settings.onselect(i))})),g._focused=1}),b.add(g.id,"blur",function(){b.remove(g.id,"keydown",g.keyDownHandler),b.remove(g.id,"keypress",g.keyPressHandler),g._focused=0}),!e.isIE6&&d.boxModel||(b.add(g.id,"mouseover",function(){d.hasClass(g.id,h+"Disabled")||d.addClass(g.id,h+"Hover")}),b.add(g.id,"mouseout",function(){d.hasClass(g.id,h+"Disabled")||d.removeClass(g.id,h+"Hover")})),g.onPostRender.dispatch(g,d.get(g.id))},destroy:function(){this.parent(),b.clear(this.id+"_text"),b.clear(this.id+"_open")}})}(tinymce),function(e){var c,d=e.DOM,b=e.dom.Event,f=e.each;e.util.Dispatcher;e.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(h,g){this.parent(h,g),this.classPrefix="mceNativeListBox"},setDisabled:function(g){d.get(this.id).disabled=g,this.setAriaProperty("disabled",g)},isDisabled:function(){return d.get(this.id).disabled},select:function(h){var j,i,g=this;return h==c?g.selectByIndex(-1):(i=h&&"function"==typeof h?h:function(k){return k==h},void(h!=g.selectedValue&&(f(g.items,function(l,k){if(i(l.value))return j=1,g.selectByIndex(k),!1}),j||g.selectByIndex(-1))))},selectByIndex:function(g){d.get(this.id).selectedIndex=g+1,this.selectedValue=this.items[g]?this.items[g].value:null},add:function(k,h,g){var j,i=this;g=g||{},g.value=h,i.isRendered()&&d.add(d.get(this.id),"option",g,k),j={title:k,value:h,attribs:g},i.items.push(j),i.onAdd.dispatch(i,j)},getLength:function(){return this.items.length},renderHTML:function(){var i,g=this;return i=d.createHTML("option",{value:""},"-- "+g.settings.title+" --"),f(g.items,function(h){i+=d.createHTML("option",{value:h.value},h.title)}),i=d.createHTML("select",{id:g.id,class:"mceNativeListBox","aria-labelledby":g.id+"_aria"},i),i+=d.createHTML("span",{id:g.id+"_aria",style:"display: none"},g.settings.title)},postRender:function(){function g(l){var k=h.items[l.target.selectedIndex-1];k&&(k=k.value)&&(h.onChange.dispatch(h,k),h.settings.onselect&&h.settings.onselect(k))}var i,h=this,j=!0;h.rendered=!0,b.add(h.id,"change",g),b.add(h.id,"keydown",function(l){var k;return b.remove(h.id,"change",i),j=!1,k=b.add(h.id,"blur",function(){j||(j=!0,b.add(h.id,"change",g),b.remove(h.id,"blur",k))}),!e.isWebKit||37!=l.keyCode&&39!=l.keyCode?13==l.keyCode||32==l.keyCode?(g(l),b.cancel(l)):void 0:b.prevent(l)}),h.onPostRender.dispatch(h,d.get(h.id))}})}(tinymce),function(c){var b=c.DOM,a=c.dom.Event;c.each;c.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(g,f,e){this.parent(g,f,e),this.onRenderMenu=new c.util.Dispatcher(this),f.menu_container=f.menu_container||b.doc.body},showMenu:function(){var j,i,f,g=this,h=b.get(g.id);if(!g.isDisabled()){if(g.isMenuRendered||(g.renderMenu(),g.isMenuRendered=!0),g.isMenuVisible)return g.hideMenu();j=b.getPos(g.settings.menu_container),i=b.getPos(h),f=g.menu,f.settings.offset_x=i.x,f.settings.offset_y=i.y,f.settings.vp_offset_x=i.x,f.settings.vp_offset_y=i.y,f.settings.keyboard_focus=g._focused,f.showMenu(0,h.firstChild.clientHeight),a.add(b.doc,"mousedown",g.hideMenu,g),g.setState("Selected",1),g.isMenuVisible=1}},renderMenu:function(){var e,f=this;e=f.settings.control_manager.createDropMenu(f.id+"_menu",{menu_line:1,class:this.classPrefix+"Menu",icons:f.settings.icons}),e.onHideMenu.add(function(){f.hideMenu(),f.focus()}),f.onRenderMenu.dispatch(f,e),f.menu=e},hideMenu:function(g){var f=this;g&&"mousedown"==g.type&&b.getParent(g.target,function(h){return h.id===f.id||h.id===f.id+"_open"})||(g&&b.getParent(g.target,".mceMenu")||(f.setState("Selected",0),a.remove(b.doc,"mousedown",f.hideMenu,f),f.menu&&f.menu.hideMenu()),f.isMenuVisible=0)},postRender:function(){var e=this,f=e.settings;a.add(e.id,"click",function(){e.isDisabled()||(f.onclick&&f.onclick(e.value),e.showMenu())})}})}(tinymce),function(c){var b=c.DOM,a=c.dom.Event;c.each;c.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(g,f,e){this.parent(g,f,e),this.classPrefix="mceSplitButton"},renderHTML:function(){var i,e,f=this,g=f.settings;return i="<tbody><tr>",e=g.image?b.createHTML("img ",{src:g.image,role:"presentation",class:"mceAction "+g.class}):b.createHTML("span",{class:"mceAction "+g.class},""),e+=b.createHTML("span",{class:"mceVoiceLabel mceIconOnly",id:f.id+"_voice",style:"display:none;"},g.title),i+="<td >"+b.createHTML("a",{role:"button",id:f.id+"_action",tabindex:"-1",href:"javascript:;",class:"mceAction "+g.class,onclick:"return false;",onmousedown:"return false;",title:g.title},e)+"</td>",e=b.createHTML("span",{class:"mceOpen "+g.class},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span>'),i+="<td >"+b.createHTML("a",{role:"button",id:f.id+"_open",tabindex:"-1",href:"javascript:;",class:"mceOpen "+g.class,onclick:"return false;",onmousedown:"return false;",title:g.title},e)+"</td>",i+="</tr></tbody>",i=b.createHTML("table",{role:"presentation",class:"mceSplitButton mceSplitButtonEnabled "+g.class,cellpadding:"0",cellspacing:"0",title:g.title},i),b.createHTML("div",{id:f.id,role:"button",tabindex:"0","aria-labelledby":f.id+"_voice","aria-haspopup":"true"},i)},postRender:function(){var f,e=this,g=e.settings;g.onclick&&(f=function(h){e.isDisabled()||(g.onclick(e.value),a.cancel(h))},a.add(e.id+"_action","click",f),a.add(e.id,["click","keydown"],function(h){var l=40;32!==h.keyCode&&13!==h.keyCode&&14!==h.keyCode||h.altKey||h.ctrlKey||h.metaKey?"click"!==h.type&&h.keyCode!==l||(e.showMenu(),a.cancel(h)):(f(),a.cancel(h))})),a.add(e.id+"_open","click",function(h){e.showMenu(),a.cancel(h)}),a.add([e.id,e.id+"_open"],"focus",function(){e._focused=1}),a.add([e.id,e.id+"_open"],"blur",function(){e._focused=0}),!c.isIE6&&b.boxModel||(a.add(e.id,"mouseover",function(){b.hasClass(e.id,"mceSplitButtonDisabled")||b.addClass(e.id,"mceSplitButtonHover")}),a.add(e.id,"mouseout",function(){b.hasClass(e.id,"mceSplitButtonDisabled")||b.removeClass(e.id,"mceSplitButtonHover")}))},destroy:function(){this.parent(),a.clear(this.id+"_action"),a.clear(this.id+"_open"),a.clear(this.id)}})}(tinymce),function(d){var c=d.DOM,a=d.dom.Event,b=d.is,e=d.each;d.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(i,h,f){var g=this;g.parent(i,h,f),g.settings=h=d.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},g.settings),g.onShowMenu=new d.util.Dispatcher(g),g.onHideMenu=new d.util.Dispatcher(g),g.value=h.default_color},showMenu:function(){var i,h,f=this;if(!f.isDisabled()){
if(f.isMenuRendered||(f.renderMenu(),f.isMenuRendered=!0),f.isMenuVisible)return f.hideMenu();i=c.get(f.id),c.show(f.id+"_menu"),c.addClass(i,"mceSplitButtonSelected"),h=c.getPos(i),c.setStyles(f.id+"_menu",{left:h.x,top:h.y+i.firstChild.clientHeight,zIndex:2e5}),i=0,a.add(c.doc,"mousedown",f.hideMenu,f),f.onShowMenu.dispatch(f),f._focused&&(f._keyHandler=a.add(f.id+"_menu","keydown",function(k){27==k.keyCode&&f.hideMenu()}),c.select("a",f.id+"_menu")[0].focus()),f.keyboardNav=new d.ui.KeyboardNavigation({root:f.id+"_menu",items:c.select("a",f.id+"_menu"),onCancel:function(){f.hideMenu(),f.focus()}}),f.keyboardNav.focus(),f.isMenuVisible=1}},hideMenu:function(g){var f=this;if(f.isMenuVisible){if(g&&"mousedown"==g.type&&c.getParent(g.target,function(h){return h.id===f.id+"_open"}))return;g&&c.getParent(g.target,".mceSplitButtonMenu")||(c.removeClass(f.id,"mceSplitButtonSelected"),a.remove(c.doc,"mousedown",f.hideMenu,f),a.remove(f.id+"_menu","keydown",f._keyHandler),c.hide(f.id+"_menu")),f.isMenuVisible=0,f.onHideMenu.dispatch(),f.keyboardNav.destroy()}},renderMenu:function(){var h,g,j,l,o,f,p=this,k=0,q=p.settings;return o=c.add(q.menu_container,"div",{role:"listbox",id:p.id+"_menu",class:q.menu_class+" "+q.class,style:"position:absolute;left:0;top:-1000px;"}),h=c.add(o,"div",{class:q.class+" mceSplitButtonMenu"}),c.add(h,"span",{class:"mceMenuLine"}),g=c.add(h,"table",{role:"presentation",class:"mceColorSplitMenu"}),j=c.add(g,"tbody"),k=0,e(b(q.colors,"array")?q.colors:q.colors.split(","),function(m){m=m.replace(/^#/,""),k--||(l=c.add(j,"tr"),k=q.grid_width-1),g=c.add(l,"td");var i={href:"javascript:;",style:{backgroundColor:"#"+m},title:p.editor.getLang("colors."+m,m),"data-mce-color":"#"+m};d.isIE||(i.role="option"),g=c.add(g,"a",i),p.editor.forcedHighContrastMode&&(g=c.add(g,"canvas",{width:16,height:16,"aria-hidden":"true"}),g.getContext&&(f=g.getContext("2d"))?(f.fillStyle="#"+m,f.fillRect(0,0,16,16)):c.remove(g))}),q.more_colors_func&&(g=c.add(j,"tr"),g=c.add(g,"td",{colspan:q.grid_width,class:"mceMoreColors"}),g=c.add(g,"a",{role:"option",id:p.id+"_more",href:"javascript:;",onclick:"return false;",class:"mceMoreColors"},q.more_colors_title),a.add(g,"click",function(i){return q.more_colors_func.call(q.more_colors_scope||this),a.cancel(i)})),c.addClass(h,"mceColorSplitMenu"),a.add(p.id+"_menu","mousedown",function(i){return a.cancel(i)}),a.add(p.id+"_menu","click",function(i){var m;return i=c.getParent(i.target,"a",j),i&&"a"==i.nodeName.toLowerCase()&&(m=i.getAttribute("data-mce-color"))&&p.setColor(m),!1}),o},setColor:function(f){this.displayColor(f),this.hideMenu(),this.settings.onselect(f)},displayColor:function(g){var f=this;c.setStyle(f.id+"_preview","backgroundColor",g),f.value=g},postRender:function(){var f=this,g=f.id;f.parent(),c.add(g+"_action","div",{id:g+"_preview",class:"mceColorPreview"}),c.setStyle(f.id+"_preview","backgroundColor",f.value)},destroy:function(){var f=this;f.parent(),a.clear(f.id+"_menu"),a.clear(f.id+"_more"),c.remove(f.id+"_menu"),f.keyboardNav&&f.keyboardNav.destroy()}})}(tinymce),function(b){var d=b.DOM,c=b.each,a=b.dom.Event;b.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var f=this,i=[],e=f.controls,j=b.each,g=f.settings;return i.push('<div id="'+f.id+'" role="group" aria-labelledby="'+f.id+'_voice">'),i.push("<span role='application'>"),i.push('<span id="'+f.id+'_voice" class="mceVoiceLabel" style="display:none;">'+d.encode(g.name)+"</span>"),j(e,function(h){i.push(h.renderHTML())}),i.push("</span>"),i.push("</div>"),i.join("")},focus:function(){var e=this;d.get(e.id).focus()},postRender:function(){var f=this,e=[];c(f.controls,function(g){c(g.controls,function(h){h.id&&e.push(h)})}),f.keyNav=new b.ui.KeyboardNavigation({root:f.id,items:e,onCancel:function(){b.isWebKit&&d.get(f.editor.id+"_ifr").focus(),f.editor.focus()},excludeFromTabOrder:!f.settings.tab_focus_toolbar})},destroy:function(){var e=this;e.parent(),e.keyNav.destroy(),a.clear(e.id)}})}(tinymce),function(a){var c=a.DOM;a.each;a.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var j,k,e,d,g,l,m=this,f="",n=m.settings;for(l=m.controls,e=0;e<l.length;e++)k=l[e],d=l[e-1],g=l[e+1],0===e&&(j="mceToolbarStart",k.Button?j+=" mceToolbarStartButton":k.SplitButton?j+=" mceToolbarStartSplitButton":k.ListBox&&(j+=" mceToolbarStartListBox"),f+=c.createHTML("td",{class:j},c.createHTML("span",null,"<!-- IE -->"))),d&&k.ListBox&&(d.Button||d.SplitButton)&&(f+=c.createHTML("td",{class:"mceToolbarEnd"},c.createHTML("span",null,"<!-- IE -->"))),f+=c.stdMode?'<td style="position: relative">'+k.renderHTML()+"</td>":"<td>"+k.renderHTML()+"</td>",g&&k.ListBox&&(g.Button||g.SplitButton)&&(f+=c.createHTML("td",{class:"mceToolbarStart"},c.createHTML("span",null,"<!-- IE -->")));return j="mceToolbarEnd",k.Button?j+=" mceToolbarEndButton":k.SplitButton?j+=" mceToolbarEndSplitButton":k.ListBox&&(j+=" mceToolbarEndListBox"),f+=c.createHTML("td",{class:j},c.createHTML("span",null,"<!-- IE -->")),c.createHTML("table",{id:m.id,class:"mceToolbar"+(n.class?" "+n.class:""),cellpadding:"0",cellspacing:"0",align:m.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+f+"</tr></tbody>")}})}(tinymce),function(b){var a=b.util.Dispatcher;b.each;b.create("tinymce.AddOnManager",{AddOnManager:function(){var d=this;d.items=[],d.urls={},d.lookup={},d.onAdd=new a(d)},get:function(d){return this.lookup[d]?this.lookup[d].instance:void 0},dependencies:function(e){var d;return this.lookup[e]&&(d=this.lookup[e].dependencies),d||[]},requireLangPack:function(e){var d=b.settings;d&&d.language&&d.language_load!==!1&&b.ScriptLoader.add(this.urls[e]+"/langs/"+d.language+".js")},add:function(f,e,d){return this.items.push(e),this.lookup[f]={instance:e,dependencies:d},this.onAdd.dispatch(this,f,e),e},createUrl:function(d,e){return"object"==typeof e?e:{prefix:d.prefix,resource:e,suffix:d.suffix}},addComponents:function(f,d){var e=this.urls[f];b.each(d,function(g){b.ScriptLoader.add(e+"/"+g)})},load:function(j,f,d,h){function i(){var k=g.dependencies(j);b.each(k,function(m){var l=g.createUrl(f,m);g.load(l.resource,l,void 0,void 0)}),d&&(h?d.call(h):d.call(b.ScriptLoader))}var g=this,e=f;g.urls[j]||("object"==typeof f&&(e=f.prefix+f.resource+f.suffix),0!==e.indexOf("/")&&e.indexOf("://")==-1&&(e=b.baseURL+"/"+e),g.urls[j]=e.substring(0,e.lastIndexOf("/")),g.lookup[j]?i():b.ScriptLoader.add(e,i,h))}}),b.PluginManager=new b.AddOnManager,b.ThemeManager=new b.AddOnManager}(tinymce),function(j){var a,g=j.each,d=j.extend,k=j.DOM,i=j.dom.Event,e=(j.ThemeManager,j.PluginManager,j.explode),h=j.util.Dispatcher,c=0;j.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(j.documentBaseURL)||(j.documentBaseURL+="/"),j.baseURL=new j.util.URI(j.documentBaseURL).toAbsolute(j.baseURL),j.baseURI=new j.util.URI(j.baseURL),j.onBeforeUnload=new h(j),i.add(window,"beforeunload",function(l){j.onBeforeUnload.dispatch(j,l)}),j.onAddEditor=new h(j),j.onRemoveEditor=new h(j),j.EditorManager=d(j,{editors:[],i18n:{},activeEditor:null,init:function(x){function q(t){var s=t.id;return s||(s=t.name,s=s&&!k.get(s)?t.name:k.uniqueId(),t.setAttribute("id",s)),s}function m(z,A,t){var y=z[A];if(y)return j.is(y,"string")&&(t=y.replace(/\.\w+$/,""),t=t?j.resolve(t):0,y=j.resolve(y)),y.apply(t||this,Array.prototype.slice.call(arguments,2))}function p(t,s){return s.constructor===RegExp?s.test(t.className):k.hasClass(t,s)}var r,v=this,l=(j.ScriptLoader,[]);v.settings=x,i.bind(window,"ready",function(){var s,t;switch(m(x,"onpageload"),x.mode){case"exact":s=x.elements||"",s.length>0&&g(e(s),function(y){k.get(y)?(r=new j.Editor(y,x),l.push(r),r.render(1)):g(document.forms,function(z){g(z.elements,function(A){A.name===y&&(y="mce_editor_"+c++,k.setAttrib(A,"id",y),r=new j.Editor(y,x),l.push(r),r.render(1))})})});break;case"textareas":case"specific_textareas":g(k.select("textarea"),function(y){x.editor_deselector&&p(y,x.editor_deselector)||x.editor_selector&&!p(y,x.editor_selector)||(r=new j.Editor(q(y),x),l.push(r),r.render(1))});break;default:x.types?g(x.types,function(y){g(k.select(y.selector),function(A){var z=new j.Editor(q(A),j.extend({},x,y));l.push(z),z.render(1)})}):x.selector&&g(k.select(x.selector),function(z){var y=new j.Editor(q(z),x);l.push(y),y.render(1)})}x.oninit&&(s=t=0,g(l,function(y){t++,y.initialized?s++:y.onInit.add(function(){s++,s==t&&m(x,"oninit")}),s==t&&m(x,"oninit")}))})},get:function(l){return l===a?this.editors:this.editors.hasOwnProperty(l)?this.editors[l]:a},getInstanceById:function(l){return this.get(l)},add:function(m){var l=this,n=l.editors;return n[m.id]=m,n.push(m),l._setActive(m),l.onAddEditor.dispatch(l,m),j.adapter&&j.adapter.patchEditor(m),m},remove:function(n){var l,m=this,o=m.editors;if(!o[n.id])return null;for(delete o[n.id],l=0;l<o.length;l++)if(o[l]==n){o.splice(l,1);break}return m.activeEditor==n&&m._setActive(o[0]),n.destroy(),m.onRemoveEditor.dispatch(m,n),n},execCommand:function(r,p,o){function m(){n.destroy(),l.detachEvent("onunload",m),l=l.tinyMCE=l.tinymce=null}var l,q=this,n=q.get(o);switch(r){case"mceFocus":return n.focus(),!0;case"mceAddEditor":case"mceAddControl":return q.get(o)||new j.Editor(o,q.settings).render(),!0;case"mceAddFrameControl":return l=o.window,l.tinyMCE=tinyMCE,l.tinymce=j,j.DOM.doc=l.document,j.DOM.win=l,n=new j.Editor(o.element_id,o),n.render(),j.isIE&&l.attachEvent("onunload",m),o.page_window=null,!0;case"mceRemoveEditor":case"mceRemoveControl":return n&&n.remove(),!0;case"mceToggleEditor":return n?(n.isHidden()?n.show():n.hide(),!0):(q.execCommand("mceAddControl",0,o),!0)}return!!q.activeEditor&&q.activeEditor.execCommand(r,p,o)},execInstanceCommand:function(p,o,n,m){var l=this.get(p);return!!l&&l.execCommand(o,n,m)},triggerSave:function(){g(this.editors,function(l){l.save()})},addI18n:function(n,q){var m=this.i18n;j.is(n,"string")?g(q,function(r,p){m[n+"."+p]=r}):g(n,function(r,p){g(r,function(t,s){g(t,function(v,u){"common"===s?m[p+"."+u]=v:m[p+"."+s+"."+u]=v})})})},_setActive:function(l){this.selectedInstance=this.activeEditor=l}})}(tinymce),function(k){var l=k.DOM,j=k.dom.Event,f=k.extend,i=k.each,a=k.isGecko,b=k.isIE,d=(k.isWebKit,k.is),h=k.ThemeManager,c=k.PluginManager,g=k.explode;k.create("tinymce.Editor",{Editor:function(p,o){var m=this,n=!0;m.settings=o=f({id:p,language:"en",theme:"advanced",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:k.documentBaseURL,add_form_submit_trigger:n,submit_patch:n,add_unload_trigger:n,convert_urls:n,relative_urls:n,remove_script_host:n,table_inline_editing:!1,object_resizing:n,accessibility_focus:n,doctype:k.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual:n,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",apply_source_formatting:n,directionality:"ltr",forced_root_block:"p",hidden_input:n,padd_empty_editor:n,render_ui:n,indentation:"30px",fix_table_elements:n,inline_styles:n,convert_fonts_to_spans:n,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",validate:n,entity_encoding:"named",url_converter:m.convertURL,url_converter_scope:m,ie7_compat:n},o),m.id=m.editorId=p,m.isNotDirty=!1,m.plugins={},m.documentBaseURI=new k.util.URI(o.document_base_url||k.documentBaseURL,{base_uri:tinyMCE.baseURI}),m.baseURI=k.baseURI,m.contentCSS=[],m.contentStyles=[],m.setupEvents(),m.execCommands={},m.queryStateCommands={},m.queryValueCommands={},m.execCallback("setup",m)},render:function(o){function n(){q.language&&q.language_load!==!1&&m.add(k.baseURL+"/langs/"+q.language+".js"),q.theme&&"function"!=typeof q.theme&&"-"!=q.theme.charAt(0)&&!h.urls[q.theme]&&h.load(q.theme,"themes/"+q.theme+"/editor_template"+k.suffix+".js"),i(g(q.plugins),function(t){if(t&&!c.urls[t])if("-"==t.charAt(0)){t=t.substr(1,t.length);var s=c.dependencies(t);i(s,function(v){var u={prefix:"plugins/",resource:v,suffix:"/editor_plugin"+k.suffix+".js"};v=c.createUrl(u,v),c.load(v.resource,v)})}else{if("safari"==t)return;c.load(t,{prefix:"plugins/",resource:t,suffix:"/editor_plugin"+k.suffix+".js"})}}),m.loadQueue(function(){p.removed||p.init()})}var p=this,q=p.settings,r=p.id,m=k.ScriptLoader;return j.domLoaded?(tinyMCE.settings=q,void(p.getElement()&&(k.isIDevice&&!k.isIOS5||(!/TEXTAREA|INPUT/i.test(p.getElement().nodeName)&&q.hidden_input&&l.getParent(r,"form")&&l.insertAfter(l.create("input",{type:"hidden",name:r}),r),q.content_editable||(p.orgVisibility=p.getElement().style.visibility,p.getElement().style.visibility="hidden"),k.WindowManager&&(p.windowManager=new k.WindowManager(p)),"xml"==q.encoding&&p.onGetContent.add(function(s,t){t.save&&(t.content=l.encode(t.content))}),q.add_form_submit_trigger&&p.onSubmit.addToTop(function(){p.initialized&&(p.save(),p.isNotDirty=1)}),q.add_unload_trigger&&(p._beforeUnload=tinyMCE.onBeforeUnload.add(function(){!p.initialized||p.destroyed||p.isHidden()||p.save({format:"raw",no_events:!0})})),k.addUnload(p.destroy,p),q.submit_patch&&p.onBeforeRenderUI.add(function(){var s=p.getElement().form;s&&(s._mceOldSubmit||(s.submit.nodeType||s.submit.length||(p.formElement=s,s._mceOldSubmit=s.submit,s.submit=function(){return k.triggerSave(),p.isNotDirty=1,p.formElement._mceOldSubmit(p.formElement)}),s=null))}),n())))):void j.add(window,"ready",function(){p.render()})},init:function(){function A(s){var n,t=c.get(s),o=c.urls[s]||k.documentBaseURL.replace(/\/$/,"");t&&k.inArray(r,s)===-1&&(i(c.dependencies(s),function(u){A(u)}),n=new t(G,o),G.plugins[s]=n,n.init&&(n.init(G,o),r.push(s)))}var q,D,y,z,p,E,v,B,F,x,G=this,H=G.settings,C=G.getElement(),r=[];if(k.add(G),H.aria_label=H.aria_label||l.getAttrib(C,"aria-label",G.getLang("aria.rich_text_area")),H.theme&&("function"!=typeof H.theme?(H.theme=H.theme.replace(/-/,""),p=h.get(H.theme),G.theme=new p,G.theme.init&&G.theme.init(G,h.urls[H.theme]||k.documentBaseURL.replace(/\/$/,""))):G.theme=H.theme),i(g(H.plugins.replace(/\-/g,"")),A),H.popup_css!==!1&&(H.popup_css?H.popup_css=G.documentBaseURI.toAbsolute(H.popup_css):H.popup_css=G.baseURI.toAbsolute("themes/"+H.theme+"/skins/"+H.skin+"/dialog.css")),H.popup_css_add&&(H.popup_css+=","+G.documentBaseURI.toAbsolute(H.popup_css_add)),G.controlManager=new k.ControlManager(G),G.onBeforeRenderUI.dispatch(G,G.controlManager),H.render_ui&&G.theme&&(G.orgDisplay=C.style.display,"function"!=typeof H.theme?(D=H.width||C.style.width||C.offsetWidth,y=H.height||C.style.height||C.offsetHeight,z=H.min_height||100,F=/^[0-9\.]+(|px)$/i,F.test(""+D)&&(D=Math.max(parseInt(D,10)+(p.deltaWidth||0),100)),F.test(""+y)&&(y=Math.max(parseInt(y,10)+(p.deltaHeight||0),z)),p=G.theme.renderUI({targetNode:C,width:D,height:y,deltaWidth:H.delta_width,deltaHeight:H.delta_height}),l.setStyles(p.sizeContainer||p.editorContainer,{width:D,height:y}),y=(p.iframeHeight||y)+("number"==typeof y?p.deltaHeight||0:""),y<z&&(y=z)):(p=H.theme(G,C),p.editorContainer.nodeType&&(p.editorContainer=p.editorContainer.id=p.editorContainer.id||G.id+"_parent"),p.iframeContainer.nodeType&&(p.iframeContainer=p.iframeContainer.id=p.iframeContainer.id||G.id+"_iframecontainer"),y=p.iframeHeight||C.offsetHeight,b&&G.onInit.add(function(n){n.dom.bind(n.getBody(),"beforedeactivate keydown",function(){n.lastIERng=n.selection.getRng()})})),G.editorContainer=p.editorContainer),H.content_css&&i(g(H.content_css),function(n){G.contentCSS.push(G.documentBaseURI.toAbsolute(n))}),H.content_style&&G.contentStyles.push(H.content_style),H.content_editable)return C=q=p=null,G.initContentBody();for(document.domain&&location.hostname!=document.domain&&(k.relaxedDomain=document.domain),G.iframeHTML=H.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">',H.document_base_url!=k.documentBaseURL&&(G.iframeHTML+='<base href="'+G.documentBaseURI.getURI()+'" />'),k.isIE8&&(H.ie7_compat?G.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />':G.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=edge" />'),G.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',x=0;x<G.contentCSS.length;x++)G.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+G.contentCSS[x]+'" />';G.contentCSS=[],v=H.body_id||"tinymce",v.indexOf("=")!=-1&&(v=G.getParam("body_id","","hash"),v=v[G.id]||v),B=H.body_class||"",B.indexOf("=")!=-1&&(B=G.getParam("body_class","","hash"),B=B[G.id]||""),G.iframeHTML+='</head><body id="'+v+'" class="mceContentBody '+B+'" onload="window.parent.tinyMCE.get(\''+G.id+"').onLoad.dispatch();\"><br></body></html>",k.relaxedDomain&&(b||k.isOpera&&parseFloat(opera.version())<11)&&(E='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+G.id+'");document.write(ed.iframeHTML);document.close();ed.initContentBody();})()'),q=l.add(p.iframeContainer,"iframe",{id:G.id+"_ifr",src:E||'javascript:""',frameBorder:"0",allowTransparency:"true",title:H.aria_label,style:{width:"100%",height:y,display:"block"}}),G.contentAreaContainer=p.iframeContainer,p.editorContainer&&(l.get(p.editorContainer).style.display=G.orgDisplay),C.style.visibility=G.orgVisibility,l.get(G.id).style.display="none",l.setAttrib(G.id,"aria-hidden",!0),k.relaxedDomain&&E||G.initContentBody(),C=q=p=null},initContentBody:function(){var m,s,n=this,p=n.settings,q=l.get(n.id),r=n.getDoc();b&&k.relaxedDomain||p.content_editable||(r.open(),r.write(n.iframeHTML),r.close(),k.relaxedDomain&&(r.domain=k.relaxedDomain)),p.content_editable&&(l.addClass(q,"mceContentBody"),n.contentDocument=r=p.content_document||document,n.contentWindow=p.content_window||window,n.bodyElement=q,p.content_document=p.content_window=null),m=n.getBody(),m.disabled=!0,p.readonly||(m.contentEditable=n.getParam("content_editable_state",!0)),m.disabled=!1,n.schema=new k.html.Schema(p),n.dom=new k.dom.DOMUtils(r,{keep_values:!0,url_converter:n.convertURL,url_converter_scope:n,hex_colors:p.force_hex_style_colors,class_filter:p.class_filter,update_styles:!0,root_element:p.content_editable?n.id:null,schema:n.schema}),n.parser=new k.html.DomParser(p,n.schema),n.parser.addAttributeFilter("src,href,style",function(t,u){for(var y,z,x,v=t.length,A=n.dom;v--;)y=t[v],z=y.attr(u),x="data-mce-"+u,y.attributes.map[x]||("style"===u?y.attr(x,A.serializeStyle(A.parseStyle(z),y.name)):y.attr(x,n.convertURL(z,u,y.name)))}),n.parser.addNodeFilter("script",function(t,u){for(var x,v=t.length;v--;)x=t[v],x.attr("type","mce-"+(x.attr("type")||"text/javascript"))}),n.parser.addNodeFilter("#cdata",function(t,u){for(var x,v=t.length;v--;)x=t[v],x.type=8,x.name="#comment",x.value="[CDATA["+x.value+"]]"}),n.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(u,v){for(var y,x=u.length,t=n.schema.getNonEmptyElements();x--;)y=u[x],y.isEmpty(t)&&(y.empty().append(new k.html.Node("br",1)).shortEnded=!0)}),n.serializer=new k.dom.Serializer(p,n.dom,n.schema),n.selection=new k.dom.Selection(n.dom,n.getWin(),n.serializer,n),n.formatter=new k.Formatter(n),n.undoManager=new k.UndoManager(n),n.forceBlocks=new k.ForceBlocks(n),n.enterKey=new k.EnterKey(n),n.editorCommands=new k.EditorCommands(n),n.onExecCommand.add(function(t,u){/^(FontName|FontSize)$/.test(u)||n.nodeChanged()}),n.serializer.onPreProcess.add(function(t,u){return n.onPreProcess.dispatch(n,u,t)}),n.serializer.onPostProcess.add(function(t,u){return n.onPostProcess.dispatch(n,u,t)}),n.onPreInit.dispatch(n),p.browser_spellcheck||p.gecko_spellcheck||(r.body.spellcheck=!1),p.readonly||n.bindNativeEvents(),n.controlManager.onPostRender.dispatch(n,n.controlManager),n.onPostRender.dispatch(n),n.quirks=k.util.Quirks(n),p.directionality&&(m.dir=p.directionality),p.nowrap&&(m.style.whiteSpace="nowrap"),p.protect&&n.onBeforeSetContent.add(function(t,u){i(p.protect,function(v){u.content=u.content.replace(v,function(x){return"<!--mce:protected "+escape(x)+"-->"})})}),n.onSetContent.add(function(){n.addVisual(n.getBody())}),p.padd_empty_editor&&n.onPostProcess.add(function(t,u){u.content=u.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),n.load({initial:!0,format:"html"}),n.startContent=n.getContent({format:"raw"}),n.initialized=!0,n.onInit.dispatch(n),n.execCallback("setupcontent_callback",n.id,m,r),n.execCallback("init_instance_callback",n),n.focus(!0),n.nodeChanged({initial:!0}),n.contentStyles.length>0&&(s="",i(n.contentStyles,function(t){s+=t+"\r\n"}),n.dom.addStyle(s)),i(n.contentCSS,function(t){n.dom.loadCSS(t)}),p.auto_focus&&setTimeout(function(){var t=k.get(p.auto_focus);t.selection.select(t.getBody(),1),t.selection.collapse(1),t.getBody().focus(),t.getWin().focus()},100),q=r=m=null},focus:function(p){var o,n,r,m,u=this,t=u.selection,q=u.settings.content_editable,s=u.getDoc();p||(u.lastIERng&&t.setRng(u.lastIERng),n=t.getRng(),n.item&&(r=n.item(0)),u._refreshContentEditable(),q||u.getWin().focus(),(k.isGecko||q)&&(m=u.getBody(),m.setActive?m.setActive():m.focus(),q&&t.normalize()),r&&r.ownerDocument==s&&(n=s.body.createControlRange(),n.addElement(r),n.select())),k.activeEditor!=u&&(null!=(o=k.activeEditor)&&o.onDeactivate.dispatch(o,u),u.onActivate.dispatch(u,o)),k._setActive(u)},execCallback:function(q){var o,m=this,p=m.settings[q];if(p)return m.callbackLookup&&(o=m.callbackLookup[q])&&(p=o.func,o=o.scope),d(p,"string")&&(o=p.replace(/\.\w+$/,""),o=o?k.resolve(o):0,p=k.resolve(p),m.callbackLookup=m.callbackLookup||{},m.callbackLookup[q]={func:p,scope:o}),p.apply(o||m,Array.prototype.slice.call(arguments,1))},translate:function(m){var o=this.settings.language||"en",n=k.i18n;return m?n[o+"."+m]||m.replace(/\{\#([^\}]+)\}/g,function(q,p){return n[o+"."+p]||"{#"+p+"}"}):""},getLang:function(o,m){return k.i18n[(this.settings.language||"en")+"."+o]||(d(m)?m:"{#"+o+"}")},getParam:function(t,q,m){var s,r=k.trim,p=d(this.settings[t])?this.settings[t]:q;return"hash"===m?(s={},d(p,"string")?i(p.indexOf("=")>0?p.split(/[;,](?![^=;,]*(?:[;,]|$))/):p.split(","),function(n){n=n.split("="),n.length>1?s[r(n[0])]=r(n[1]):s[r(n[0])]=r(n)}):s=p,s):p},nodeChanged:function(q){var p,m=this,n=m.selection;m.initialized&&(q=q||{},p=n.getStart()||m.getBody(),p=b&&p.ownerDocument!=m.getDoc()?m.getBody():p,q.parents=[],m.dom.getParent(p,function(o){return"BODY"==o.nodeName||void q.parents.push(o)}),m.onNodeChange.dispatch(m,q?q.controlManager||m.controlManager:m.controlManager,p,n.isCollapsed(),q))},addButton:function(n,o){var m=this;m.buttons=m.buttons||{},m.buttons[n]=o},addCommand:function(m,o,n){this.execCommands[m]={func:o,scope:n||this}},addQueryStateHandler:function(m,o,n){this.queryStateCommands[m]={func:o,scope:n||this}},addQueryValueHandler:function(m,o,n){this.queryValueCommands[m]={func:o,scope:n||this}},addShortcut:function(o,q,m,p){var r,n=this;return n.settings.custom_shortcuts!==!1&&(n.shortcuts=n.shortcuts||{},d(m,"string")&&(r=m,m=function(){n.execCommand(r,!1,null)}),d(m,"object")&&(r=m,m=function(){n.execCommand(r[0],r[1],r[2])}),i(g(o),function(s){var t={func:m,scope:p||this,desc:n.translate(q),alt:!1,ctrl:!1,shift:!1};i(g(s,"+"),function(u){switch(u){case"alt":case"ctrl":case"shift":t[u]=!0;break;default:t.charCode=u.charCodeAt(0),t.keyCode=u.toUpperCase().charCodeAt(0)}}),n.shortcuts[(t.ctrl?"ctrl":"")+","+(t.alt?"alt":"")+","+(t.shift?"shift":"")+","+t.keyCode]=t}),!0)},execCommand:function(u,r,x,m){var v,n,p=this,q=0;return/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(u)||m&&m.skip_focus||p.focus(),m=f({},m),p.onBeforeExecCommand.dispatch(p,u,r,x,m),!m.terminate&&(p.execCallback("execcommand_callback",p.id,p.selection.getNode(),u,r,x)?(p.onExecCommand.dispatch(p,u,r,x,m),!0):(v=p.execCommands[u])&&(n=v.func.call(v.scope,r,x),n!==!0)?(p.onExecCommand.dispatch(p,u,r,x,m),n):(i(p.plugins,function(o){if(o.execCommand&&o.execCommand(u,r,x))return p.onExecCommand.dispatch(p,u,r,x,m),q=1,!1}),!!q||(p.theme&&p.theme.execCommand&&p.theme.execCommand(u,r,x)?(p.onExecCommand.dispatch(p,u,r,x,m),!0):p.editorCommands.execCommand(u,r,x)?(p.onExecCommand.dispatch(p,u,r,x,m),!0):(p.getDoc().execCommand(u,r,x),void p.onExecCommand.dispatch(p,u,r,x,m)))))},queryCommandState:function(q){var r,p,n=this;if(!n._isHidden()){if((r=n.queryStateCommands[q])&&(p=r.func.call(r.scope),p!==!0))return p;if(r=n.editorCommands.queryCommandState(q),r!==-1)return r;try{return this.getDoc().queryCommandState(q)}catch(m){}}},queryCommandValue:function(r){var q,p,n=this;if(!n._isHidden()){if((q=n.queryValueCommands[r])&&(p=q.func.call(q.scope),p!==!0))return p;if(q=n.editorCommands.queryCommandValue(r),d(q))return q;try{return this.getDoc().queryCommandValue(r)}catch(m){}}},show:function(){var m=this;l.show(m.getContainer()),l.hide(m.id),m.load()},hide:function(){var m=this,n=m.getDoc();b&&n&&n.execCommand("SelectAll"),m.save(),l.hide(m.getContainer()),l.setStyle(m.id,"display",m.orgDisplay)},isHidden:function(){return!l.isHidden(this.id)},setProgressState:function(m,n,p){return this.onSetProgressState.dispatch(this,m,n,p),m},load:function(q){var n,m=this,p=m.getElement();if(p)return q=q||{},q.load=!0,n=m.setContent(d(p.value)?p.value:p.innerHTML,q),q.element=p,q.no_events||m.onLoadContent.dispatch(m,q),q.element=p=null,n},save:function(r){var n,p,m=this,q=m.getElement();if(q&&m.initialized)return r=r||{},r.save=!0,r.element=q,n=r.content=m.getContent(r),r.no_events||m.onSaveContent.dispatch(m,r),n=r.content,/TEXTAREA|INPUT/i.test(q.nodeName)?q.value=n:(q.innerHTML=n,(p=l.getParent(m.id,"form"))&&i(p.elements,function(o){if(o.name==m.id)return o.value=n,!1})),r.element=q=null,n},setContent:function(r,p){var q,o=this,m=o.getBody();return p=p||{},p.format=p.format||"html",p.set=!0,p.content=r,p.no_events||o.onBeforeSetContent.dispatch(o,p),r=p.content,k.isIE||0!==r.length&&!/^\s+$/.test(r)?("raw"!==p.format&&(r=new k.html.Serializer({},o.schema).serialize(o.parser.parse(r))),p.content=k.trim(r),o.dom.setHTML(m,p.content),p.no_events||o.onSetContent.dispatch(o,p),o.settings.content_editable&&document.activeElement!==o.getBody()||o.selection.normalize(),p.content):(q=o.settings.forced_root_block,r=q?"<"+q+'><br data-mce-bogus="1"></'+q+">":'<br data-mce-bogus="1">',m.innerHTML=r,o.selection.select(m,!0),void o.selection.collapse(!0))},getContent:function(o){var p,n=this,m=n.getBody();return o=o||{},o.format=o.format||"html",o.get=!0,o.getInner=!0,o.no_events||n.onBeforeGetContent.dispatch(n,o),p="raw"==o.format?m.innerHTML:"text"==o.format?m.innerText||m.textContent:n.serializer.serialize(m,o),"text"!=o.format?o.content=k.trim(p):o.content=p,o.no_events||n.onGetContent.dispatch(n,o),o.content},isDirty:function(){var m=this;return k.trim(m.startContent)!=k.trim(m.getContent({format:"raw",no_events:1}))&&!m.isNotDirty},getContainer:function(){var m=this;return m.container||(m.container=l.get(m.editorContainer||m.id+"_parent")),m.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return l.get(this.settings.content_element||this.id)},getWin:function(){var n,m=this;return m.contentWindow||(n=l.get(m.id+"_ifr"),n&&(m.contentWindow=n.contentWindow)),m.contentWindow},getDoc:function(){var n,m=this;return m.contentDocument||(n=m.getWin(),n&&(m.contentDocument=n.document)),m.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(o,n,q){var m=this,p=m.settings;return p.urlconverter_callback?m.execCallback("urlconverter_callback",o,q,!0,n):!p.convert_urls||q&&"LINK"==q.nodeName||0===o.indexOf("file:")?o:p.relative_urls?m.documentBaseURI.toRelative(o):o=m.documentBaseURI.toAbsolute(o,p.remove_script_host)},addVisual:function(q){var m,n=this,o=n.settings,p=n.dom;q=q||n.getBody(),d(n.hasVisual)||(n.hasVisual=o.visual),i(p.select("table,a",q),function(s){var r;switch(s.nodeName){case"TABLE":return m=o.visual_table_class||"mceItemTable",r=p.getAttrib(s,"border"),void(r&&"0"!=r||(n.hasVisual?p.addClass(s,m):p.removeClass(s,m)));case"A":return void(p.getAttrib(s,"href",!1)||(r=p.getAttrib(s,"name")||s.id,m="mceItemAnchor",r&&(n.hasVisual?p.addClass(s,m):p.removeClass(s,m))))}}),n.onVisualAid.dispatch(n,q,n.hasVisual)},remove:function(){var m=this,o=m.getContainer(),n=m.getDoc();m.removed||(m.removed=1,b&&n&&n.execCommand("SelectAll"),m.save(),l.setStyle(m.id,"display",m.orgDisplay),m.settings.content_editable||(j.unbind(m.getWin()),j.unbind(m.getDoc())),j.unbind(m.getBody()),j.clear(o),m.execCallback("remove_instance_callback",m),m.onRemove.dispatch(m),m.onExecCommand.listeners=[],k.remove(m),l.remove(o))},destroy:function(n){var m=this;m.destroyed||(a&&(j.unbind(m.getDoc()),j.unbind(m.getWin()),j.unbind(m.getBody())),n||(k.removeUnload(m.destroy),tinyMCE.onBeforeUnload.remove(m._beforeUnload),m.theme&&m.theme.destroy&&m.theme.destroy(),m.controlManager.destroy(),m.selection.destroy(),m.dom.destroy()),m.formElement&&(m.formElement.submit=m.formElement._mceOldSubmit,m.formElement._mceOldSubmit=null),m.contentAreaContainer=m.formElement=m.container=m.settings.content_element=m.bodyElement=m.contentDocument=m.contentWindow=null,m.selection&&(m.selection=m.selection.win=m.selection.dom=m.selection.dom.doc=null),m.destroyed=1)},_refreshContentEditable:function(){var m,o,n=this;n._isHidden()&&(m=n.getBody(),o=m.parentNode,o.removeChild(m),o.appendChild(m),m.focus())},_isHidden:function(){var m;return a?(m=this.selection.getSel(),!m||!m.rangeCount||0===m.rangeCount):0}})}(tinymce),function(a){var b=a.each;a.Editor.prototype.setupEvents=function(){var c=this,d=c.settings;b(["onPreInit","onBeforeRenderUI","onPostRender","onLoad","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState","onSetAttrib"],function(e){c[e]=new a.util.Dispatcher(c)}),d.cleanup_callback&&(c.onBeforeSetContent.add(function(e,f){f.content=e.execCallback("cleanup_callback","insert_to_editor",f.content,f)}),c.onPreProcess.add(function(e,f){f.set&&e.execCallback("cleanup_callback","insert_to_editor_dom",f.node,f),f.get&&e.execCallback("cleanup_callback","get_from_editor_dom",f.node,f)}),c.onPostProcess.add(function(e,f){f.set&&(f.content=e.execCallback("cleanup_callback","insert_to_editor",f.content,f)),f.get&&(f.content=e.execCallback("cleanup_callback","get_from_editor",f.content,f))})),d.save_callback&&c.onGetContent.add(function(e,f){f.save&&(f.content=e.execCallback("save_callback",e.id,f.content,e.getBody()))}),d.handle_event_callback&&c.onEvent.add(function(f,g,h){c.execCallback("handle_event_callback",g,f,h)===!1&&(g.preventDefault(),g.stopPropagation())}),d.handle_node_change_callback&&c.onNodeChange.add(function(f,e,g){f.execCallback("handle_node_change_callback",f.id,g,-1,-1,!0,f.selection.isCollapsed())}),d.save_callback&&c.onSaveContent.add(function(e,g){var f=e.execCallback("save_callback",e.id,g.content,e.getBody());f&&(g.content=f)}),d.onchange_callback&&c.onChange.add(function(f,e){f.execCallback("onchange_callback",f,e)})},a.Editor.prototype.bindNativeEvents=function(){function c(i,m){i.type;l.removed||l.onEvent.dispatch(l,i,m)!==!1&&l[h[i.fakeType||i.type]].dispatch(l,i,m)}function j(i){l.focus(!0)}function k(i,m){65==m.keyCode&&a.VK.metaKeyPressed(m)||l.selection.normalize(),l.nodeChanged()}function g(m,i){(m.altKey||m.ctrlKey||m.metaKey)&&b(l.shortcuts,function(n){var o=a.isMac?m.metaKey:m.ctrlKey;if(n.ctrl==o&&n.alt==m.altKey&&n.shift==m.shiftKey)return m.keyCode==n.keyCode||m.charCode&&m.charCode==n.charCode?(m.preventDefault(),
i&&n.func.call(n.scope),!0):void 0})}var h,l=this,d=l.settings,e=l.dom;h={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"},b(h,function(m,n){var i=d.content_editable?l.getBody():l.getDoc();switch(n){case"contextmenu":e.bind(i,n,c);break;case"paste":e.bind(l.getBody(),n,c);break;case"submit":case"reset":e.bind(l.getElement().form||a.DOM.getParent(l.id,"form"),n,c);break;default:e.bind(i,n,c)}}),e.bind(d.content_editable?l.getBody():a.isGecko?l.getDoc():l.getWin(),"focus",function(i){l.focus(!0)}),d.content_editable&&a.isOpera&&(e.bind(l.getBody(),"click",j),e.bind(l.getBody(),"keydown",j)),l.onMouseUp.add(k),l.onKeyUp.add(function(i,n){var m=n.keyCode;(m>=33&&m<=36||m>=37&&m<=40||13==m||45==m||46==m||8==m||a.isMac&&(91==m||93==m)||n.ctrlKey)&&k(i,n)}),l.onReset.add(function(){l.setContent(l.startContent,{format:"raw"})}),l.onKeyUp.add(function(i,m){g(m)}),l.onKeyPress.add(function(i,m){g(m)}),l.onKeyDown.add(function(i,m){g(m,!0)}),a.isOpera&&l.onClick.add(function(i,m){m.preventDefault()})}}(tinymce),function(d){var b,e=d.each,a=!0,c=!1;d.EditorCommands=function(n){function r(z,y,x){var v;return z=z.toLowerCase(),(v=j.exec[z])?(v(z,y,x),a):c}function l(x){var v;return x=x.toLowerCase(),(v=j.state[x])?v(x):-1}function h(x){var v;return x=x.toLowerCase(),(v=j.value[x])?v(x):c}function u(v,x){x=x||"exec",e(v,function(z,y){e(y.toLowerCase().split(","),function(A){j[x][A]=z})})}function f(y,x,v){return x===b&&(x=c),v===b&&(v=null),n.getDoc().execCommand(y,x,v)}function t(v){return q.match(v)}function s(v,x){q.toggle(v,x?{value:x}:b)}function i(v){o=p.getBookmark(v)}function g(){p.moveToBookmark(o)}var o,m=n.dom,p=n.selection,j={state:{},exec:{},value:{}},k=n.settings,q=n.formatter;d.extend(this,{execCommand:r,queryCommandState:l,queryCommandValue:h,addCommands:u}),u({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){n.undoManager.add()},"Cut,Copy,Paste":function(z){var v,y=n.getDoc();try{f(z)}catch(x){v=a}!v&&y.queryCommandSupported(z)||(d.isGecko?n.windowManager.confirm(n.getLang("clipboard_msg"),function(A){A&&open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}):n.windowManager.alert(n.getLang("clipboard_no_support")))},unlink:function(v){p.isCollapsed()&&p.select(p.getNode()),f(v),p.collapse(c)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(v){var x=v.substring(7);e("left,center,right,full".split(","),function(y){x!=y&&q.remove("align"+y)}),s("align"+x),r("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(y){var v,x;f(y),v=m.getParent(p.getNode(),"ol,ul"),v&&(x=v.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(x.nodeName)&&(i(),m.split(x,v),g()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(v){s(v)},"ForeColor,HiliteColor,FontName":function(y,x,v){s(y,v)},FontSize:function(z,y,x){var v,A;x>=1&&x<=7&&(A=d.explode(k.font_size_style_values),v=d.explode(k.font_size_classes),x=v?v[x-1]||x:A[x-1]||x),s(z,x)},RemoveFormat:function(v){q.remove(v)},mceBlockQuote:function(v){s("blockquote")},FormatBlock:function(y,x,v){return s(v||"p")},mceCleanup:function(){var v=p.getBookmark();n.setContent(n.getContent({cleanup:a}),{cleanup:a}),p.moveToBookmark(v)},mceRemoveNode:function(z,y,x){var v=x||p.getNode();v!=n.getBody()&&(i(),n.dom.remove(v,a),g())},mceSelectNodeDepth:function(z,y,x){var v=0;m.getParent(p.getNode(),function(A){if(1==A.nodeType&&v++==x)return p.select(A),c},n.getBody())},mceSelectNode:function(y,x,v){p.select(v)},mceInsertContent:function(B,I,K){var y,J,E,z,F,G,D,C,L,x,A,M,v,H;if(y=n.parser,J=new d.html.Serializer({},n.schema),v='<span id="mce_marker" data-mce-type="bookmark">\ufeff</span>',G={content:K,format:"html"},p.onBeforeSetContent.dispatch(p,G),K=G.content,K.indexOf("{$caret}")==-1&&(K+="{$caret}"),K=K.replace(/\{\$caret\}/,v),p.isCollapsed()||n.getDoc().execCommand("Delete",!1,null),E=p.getNode(),G={context:E.nodeName.toLowerCase()},F=y.parse(K,G),A=F.lastChild,"mce_marker"==A.attr("id"))for(D=A,A=A.prev;A;A=A.walk(!0))if(3==A.type||!m.isBlock(A.name)){A.parent.insert(D,A,"br"===A.name);break}if(G.invalid){for(p.setContent(v),E=p.getNode(),z=n.getBody(),9==E.nodeType?E=A=z:A=E;A!==z;)E=A,A=A.parentNode;K=E==z?z.innerHTML:m.getOuterHTML(E),K=J.serialize(y.parse(K.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return J.serialize(F)}))),E==z?m.setHTML(z,K):m.setOuterHTML(E,K)}else K=J.serialize(F),A=E.firstChild,M=E.lastChild,!A||A===M&&"BR"===A.nodeName?m.setHTML(E,K):p.setContent(K);D=m.get("mce_marker"),C=m.getRect(D),L=m.getViewPort(n.getWin()),(C.y+C.h>L.y+L.h||C.y<L.y||C.x>L.x+L.w||C.x<L.x)&&(H=d.isIE?n.getDoc().documentElement:n.getBody(),H.scrollLeft=C.x,H.scrollTop=C.y-L.h+25),x=m.createRng(),A=D.previousSibling,A&&3==A.nodeType?x.setStart(A,A.nodeValue.length):(x.setStartBefore(D),x.setEndBefore(D)),m.remove(D),p.setRng(x),p.onSetContent.dispatch(p,G),n.addVisual()},mceInsertRawHTML:function(y,x,v){p.setContent("tiny_mce_marker"),n.setContent(n.getContent().replace(/tiny_mce_marker/g,function(){return v}))},mceToggleFormat:function(y,x,v){s(v)},mceSetContent:function(y,x,v){n.setContent(v)},"Indent,Outdent":function(z){var x,v,y;x=k.indentation,v=/[a-z%]+$/i.exec(x),x=parseInt(x),l("InsertUnorderedList")||l("InsertOrderedList")?f(z):(k.forced_root_block||m.getParent(p.getNode(),m.isBlock)||q.apply("div"),e(p.getSelectedBlocks(),function(A){"outdent"==z?(y=Math.max(0,parseInt(A.style.paddingLeft||0)-x),m.setStyle(A,"paddingLeft",y?y+v:"")):m.setStyle(A,"paddingLeft",parseInt(A.style.paddingLeft||0)+x+v)}))},mceRepaint:function(){if(d.isGecko)try{i(a),p.getSel()&&p.getSel().selectAllChildren(n.getBody()),p.collapse(a),g()}catch(v){}},mceToggleFormat:function(y,x,v){q.toggle(v)},InsertHorizontalRule:function(){n.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){n.hasVisual=!n.hasVisual,n.addVisual()},mceReplaceContent:function(y,x,v){n.execCommand("mceInsertContent",!1,v.replace(/\{\$selection\}/g,p.getContent({format:"text"})))},mceInsertLink:function(z,y,x){var v;"string"==typeof x&&(x={href:x}),v=m.getParent(p.getNode(),"a"),x.href=x.href.replace(" ","%20"),v&&x.href||q.remove("link"),x.href&&q.apply("link",x,v)},selectAll:function(){var x=m.getRoot(),v=m.createRng();p.getRng().setStart?(v.setStart(x,0),v.setEnd(x,x.childNodes.length),p.setRng(v)):f("SelectAll")}}),u({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(z){var x="align"+z.substring(7),v=p.isCollapsed()?[m.getParent(p.getNode(),m.isBlock)]:p.getSelectedBlocks(),y=d.map(v,function(A){return!!q.matchNode(A,x)});return d.inArray(y,a)!==-1},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(v){return t(v)},mceBlockQuote:function(){return t("blockquote")},Outdent:function(){var v;if(k.inline_styles){if((v=m.getParent(p.getStart(),m.isBlock))&&parseInt(v.style.paddingLeft)>0)return a;if((v=m.getParent(p.getEnd(),m.isBlock))&&parseInt(v.style.paddingLeft)>0)return a}return l("InsertUnorderedList")||l("InsertOrderedList")||!k.inline_styles&&!!m.getParent(p.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(x){var v=m.getParent(p.getNode(),"ul,ol");return v&&("insertunorderedlist"===x&&"UL"===v.tagName||"insertorderedlist"===x&&"OL"===v.tagName)}},"state"),u({"FontSize,FontName":function(y){var v,x=0;return(v=m.getParent(p.getNode(),"span"))&&(x="fontsize"==y?v.style.fontSize:v.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),x}},"value"),u({Undo:function(){n.undoManager.undo()},Redo:function(){n.undoManager.redo()}})}}(tinymce),function(b){var a=b.util.Dispatcher;b.UndoManager=function(h){function c(){return b.trim(h.getContent({format:"raw",no_events:1}).replace(/<span[^>]+data-mce-bogus[^>]+>[\u200B\uFEFF]+<\/span>/g,""))}function d(){l.typing=!1,l.add()}var l,g,k,j,f,i=0,e=[];return onBeforeAdd=new a(l),k=new a(l),j=new a(l),f=new a(l),k.add(function(m,n){if(m.hasUndo())return h.onChange.dispatch(h,n,m)}),j.add(function(m,n){return h.onUndo.dispatch(h,n,m)}),f.add(function(m,n){return h.onRedo.dispatch(h,n,m)}),h.onInit.add(function(){l.add()}),h.onBeforeExecCommand.add(function(m,p,o,q,n){"Undo"==p||"Redo"==p||"mceRepaint"==p||n&&n.skip_undo||l.beforeChange()}),h.onExecCommand.add(function(m,p,o,q,n){"Undo"==p||"Redo"==p||"mceRepaint"==p||n&&n.skip_undo||l.add()}),h.onSaveContent.add(d),h.dom.bind(h.dom.getRoot(),"dragend",d),h.dom.bind(h.getBody(),"focusout",function(m){!h.removed&&l.typing&&d()}),h.onKeyUp.add(function(m,o){var n=o.keyCode;(n>=33&&n<=36||n>=37&&n<=40||45==n||13==n||o.ctrlKey)&&d()}),h.onKeyDown.add(function(m,o){var n=o.keyCode;return n>=33&&n<=36||n>=37&&n<=40||45==n?void(l.typing&&d()):void((n<16||n>20)&&224!=n&&91!=n&&!l.typing&&(l.beforeChange(),l.typing=!0,l.add()))}),h.onMouseDown.add(function(m,n){l.typing&&d()}),h.addShortcut("ctrl+z","undo_desc","Undo"),h.addShortcut("ctrl+y","redo_desc","Redo"),l={data:e,typing:!1,onBeforeAdd:onBeforeAdd,onAdd:k,onUndo:j,onRedo:f,beforeChange:function(){g=h.selection.getBookmark(2,!0)},add:function(p){var m,o,n=h.settings;if(p=p||{},p.content=c(),l.onBeforeAdd.dispatch(l,p),o=e[i],o&&o.content==p.content)return null;if(e[i]&&(e[i].beforeBookmark=g),n.custom_undo_redo_levels&&e.length>n.custom_undo_redo_levels){for(m=0;m<e.length-1;m++)e[m]=e[m+1];e.length--,i=e.length}return p.bookmark=h.selection.getBookmark(2,!0),i<e.length-1&&(e.length=i+1),e.push(p),i=e.length-1,l.onAdd.dispatch(l,p),h.isNotDirty=0,p},undo:function(){var n;return l.typing&&(l.add(),l.typing=!1),i>0&&(n=e[--i],h.setContent(n.content,{format:"raw"}),h.selection.moveToBookmark(n.beforeBookmark),l.onUndo.dispatch(l,n)),n},redo:function(){var m;return i<e.length-1&&(m=e[++i],h.setContent(m.content,{format:"raw"}),h.selection.moveToBookmark(m.bookmark),l.onRedo.dispatch(l,m)),m},clear:function(){e=[],i=0,l.typing=!1},hasUndo:function(){return i>0||this.typing},hasRedo:function(){return i<e.length-1&&!this.typing}}}}(tinymce),tinymce.ForceBlocks=function(c){function f(){var g,k,o,s,q,i,l,p,r,j=a.getStart(),h=c.getBody(),m=-16777215;if(j&&1===j.nodeType&&b.forced_root_block){for(;j&&j!=h;){if(d[j.nodeName])return;j=j.parentNode}for(g=a.getRng(),g.setStart?(k=g.startContainer,o=g.startOffset,s=g.endContainer,q=g.endOffset):(g.item&&(j=g.item(0),g=c.getDoc().body.createTextRange(),g.moveToElementText(j)),r=g.parentElement().ownerDocument===c.getDoc(),tmpRng=g.duplicate(),tmpRng.collapse(!0),o=tmpRng.move("character",m)*-1,tmpRng.collapsed||(tmpRng=g.duplicate(),tmpRng.collapse(!1),q=tmpRng.move("character",m)*-1-o)),j=h.firstChild;j;)if(3===j.nodeType||1==j.nodeType&&!d[j.nodeName]){if(3===j.nodeType&&0==j.nodeValue.length){l=j,j=j.nextSibling,e.remove(l);continue}i||(i=e.create(b.forced_root_block),j.parentNode.insertBefore(i,j),p=!0),l=j,j=j.nextSibling,i.appendChild(l)}else i=null,j=j.nextSibling;if(p){if(g.setStart)g.setStart(k,o),g.setEnd(s,q),a.setRng(g);else if(r)try{g=c.getDoc().body.createTextRange(),g.moveToElementText(h),g.collapse(!0),g.moveStart("character",o),q>0&&g.moveEnd("character",q),g.select()}catch(n){}c.nodeChanged()}}}var b=c.settings,e=c.dom,a=c.selection,d=c.schema.getBlockElements();b.forced_root_block&&(c.onKeyUp.add(f),c.onNodeChange.add(f))},function(c){var a=(c.DOM,c.dom.Event),d=c.each,e=c.extend;c.create("tinymce.ControlManager",{ControlManager:function(f,j){var h=this;j=j||{},h.editor=f,h.controls={},h.onAdd=new c.util.Dispatcher(h),h.onPostRender=new c.util.Dispatcher(h),h.prefix=j.prefix||f.id+"_",h._cls={},h.onPostRender.add(function(){d(h.controls,function(i){i.postRender()})})},get:function(f){return this.controls[this.prefix+f]||this.controls[f]},setActive:function(h,f){var g=null;return(g=this.get(h))&&g.setActive(f),g},setDisabled:function(h,f){var g=null;return(g=this.get(h))&&g.setDisabled(f),g},add:function(g){var f=this;return g&&(f.controls[g.id]=g,f.onAdd.dispatch(g,f)),g},createControl:function(j){var o,k,g,n,h=this,m=h.editor;for(h.controlFactories||(h.controlFactories=[],d(m.plugins,function(i){i.createControl&&h.controlFactories.push(i)})),n=h.controlFactories,k=0,g=n.length;k<g;k++)if(o=n[k].createControl(j,h))return h.add(o);return"|"===j||"separator"===j?h.createSeparator():m.buttons&&(o=m.buttons[j])?h.createButton(j,o):h.add(o)},createDropMenu:function(f,n,h){var j,g,k,l,m=this,i=m.editor;return n=e({class:"mceDropDown",constrain:i.settings.constrain_menus},n),n.class=n.class+" "+i.getParam("skin")+"Skin",(k=i.getParam("skin_variant"))&&(n.class+=" "+i.getParam("skin")+"Skin"+k.substring(0,1).toUpperCase()+k.substring(1)),n.class+="rtl"==i.settings.directionality?" mceRtl":"",f=m.prefix+f,l=h||m._cls.dropmenu||c.ui.DropMenu,j=m.controls[f]=new l(f,n),j.onAddItem.add(function(r,q){var p=q.settings;p.title=i.getLang(p.title,p.title),p.onclick||(p.onclick=function(o){p.cmd&&i.execCommand(p.cmd,p.ui||!1,p.value)})}),i.onRemove.add(function(){j.destroy()}),c.isIE&&(j.onShowMenu.add(function(){i.focus(),g=i.selection.getBookmark(1)}),j.onHideMenu.add(function(){g&&(i.selection.moveToBookmark(g),g=0)})),m.add(j)},createListBox:function(f,n,h){function g(o){return o.settings.use_accessible_selects&&!c.isGecko}var k,m,l=this,j=l.editor;return l.get(f)?null:(n.title=j.translate(n.title),n.scope=n.scope||j,n.onselect||(n.onselect=function(o){j.execCommand(n.cmd,n.ui||!1,o||n.value)}),n=e({title:n.title,class:"mce_"+f,scope:n.scope,control_manager:l},n),f=l.prefix+f,j.settings.use_native_selects||g(j)?k=new c.ui.NativeListBox(f,n):(m=h||l._cls.listbox||c.ui.ListBox,k=new m(f,n,j)),l.controls[f]=k,c.isWebKit&&k.onPostRender.add(function(p,o){a.add(o,"mousedown",function(){j.bookmark=j.selection.getBookmark(1)}),a.add(o,"focus",function(){j.selection.moveToBookmark(j.bookmark),j.bookmark=null})}),k.hideMenu&&j.onMouseDown.add(k.hideMenu,k),l.add(k))},createButton:function(m,i,l){var k,f,h=this,g=h.editor;return h.get(m)?null:(i.title=g.translate(i.title),i.label=g.translate(i.label),i.scope=i.scope||g,i.onclick||i.menu_button||(i.onclick=function(){g.execCommand(i.cmd,i.ui||!1,i.value)}),i=e({title:i.title,class:"mce_"+m,unavailable_prefix:g.getLang("unavailable",""),scope:i.scope,control_manager:h},i),m=h.prefix+m,i.menu_button?(f=l||h._cls.menubutton||c.ui.MenuButton,k=new f(m,i,g),g.onMouseDown.add(k.hideMenu,k)):(f=h._cls.button||c.ui.Button,k=new f(m,i,g)),h.add(k))},createMenuButton:function(h,f,g){return f=f||{},f.menu_button=1,this.createButton(h,f,g)},createSplitButton:function(m,i,l){var k,f,h=this,g=h.editor;return h.get(m)?null:(i.title=g.translate(i.title),i.scope=i.scope||g,i.onclick||(i.onclick=function(n){g.execCommand(i.cmd,i.ui||!1,n||i.value)}),i.onselect||(i.onselect=function(n){g.execCommand(i.cmd,i.ui||!1,n||i.value)}),i=e({title:i.title,class:"mce_"+m,scope:i.scope,control_manager:h},i),m=h.prefix+m,f=l||h._cls.splitbutton||c.ui.SplitButton,k=h.add(new f(m,i,g)),g.onMouseDown.add(k.hideMenu,k),k)},createColorSplitButton:function(f,n,h){var k,m,g,l=this,j=l.editor;return l.get(f)?null:(n.title=j.translate(n.title),n.scope=n.scope||j,n.onclick||(n.onclick=function(o){c.isIE&&(g=j.selection.getBookmark(1)),j.execCommand(n.cmd,n.ui||!1,o||n.value)}),n.onselect||(n.onselect=function(o){j.execCommand(n.cmd,n.ui||!1,o||n.value)}),n=e({title:n.title,class:"mce_"+f,menu_class:j.getParam("skin")+"Skin",scope:n.scope,more_colors_title:j.getLang("more_colors")},n),f=l.prefix+f,m=h||l._cls.colorsplitbutton||c.ui.ColorSplitButton,k=new m(f,n,j),j.onMouseDown.add(k.hideMenu,k),j.onRemove.add(function(){k.destroy()}),c.isIE&&(k.onShowMenu.add(function(){j.focus(),g=j.selection.getBookmark(1)}),k.onHideMenu.add(function(){g&&(j.selection.moveToBookmark(g),g=0)})),l.add(k))},createToolbar:function(k,h,j){var i,f,g=this;return k=g.prefix+k,f=j||g._cls.toolbar||c.ui.Toolbar,i=new f(k,h,g.editor),g.get(k)?null:g.add(i)},createToolbarGroup:function(k,h,j){var i,f,g=this;return k=g.prefix+k,f=j||this._cls.toolbarGroup||c.ui.ToolbarGroup,i=new f(k,h,g.editor),g.get(k)?null:g.add(i)},createSeparator:function(g){var f=g||this._cls.separator||c.ui.Separator;return new f},setControlType:function(g,f){return this._cls[g.toLowerCase()]=f},destroy:function(){d(this.controls,function(f){f.destroy()}),this.controls=null}})}(tinymce),function(d){var a=d.util.Dispatcher,e=d.each,c=d.isIE,b=d.isOpera;d.create("tinymce.WindowManager",{WindowManager:function(f){var g=this;g.editor=f,g.onOpen=new a(g),g.onClose=new a(g),g.params={},g.features={}},open:function(z,h){var q,o,j,r,v=this,k="",i="modal"==v.editor.settings.dialog_type,g=d.DOM.getViewPort();z=z||{},h=h||{},o=b?g.w:screen.width,j=b?g.h:screen.height,z.name=z.name||"mc_"+(new Date).getTime(),z.width=parseInt(z.width||320),z.height=parseInt(z.height||240),z.resizable=!0,z.left=z.left||parseInt(o/2)-z.width/2,z.top=z.top||parseInt(j/2)-z.height/2,h.inline=!1,h.mce_width=z.width,h.mce_height=z.height,h.mce_auto_focus=z.auto_focus,i&&c&&(z.center=!0,z.help=!1,z.dialogWidth=z.width+"px",z.dialogHeight=z.height+"px",z.scroll=z.scrollbars||!1),e(z,function(p,f){d.is(p,"boolean")&&(p=p?"yes":"no"),/^(name|url)$/.test(f)||(k+=c&&i?(k?";":"")+f+":"+p:(k?",":"")+f+"="+p)}),v.features=z,v.params=h,v.onOpen.dispatch(v,z,h),r=z.url||z.file,r=d._addVer(r);try{c&&i?(q=1,window.showModalDialog(r,window,k)):q=window.open(r,z.name,k)}catch(l){}q||alert(v.editor.getLang("popup_blocked"))},close:function(f){f.close(),this.onClose.dispatch(this)},createInstance:function(i,h,g,m,l,k){var j=d.resolve(i);return new j(h,g,m,l,k)},confirm:function(h,f,i,g){g=g||window,f.call(i||this,g.confirm(this._decode(this.editor.getLang(h,h))))},alert:function(h,f,j,g){var i=this;g=g||window,g.alert(i._decode(i.editor.getLang(h,h))),f&&f.call(j||i)},resizeBy:function(f,g,h){h.resizeBy(f,g)},_decode:function(f){return d.DOM.decode(f).replace(/\\n/g,"\n")}})}(tinymce),function(a){a.Formatter=function(aa){function I(ab){return!!aa.schema.getTextBlocks()[ab.toLowerCase()]}function n(ac,ab){return c.getParents(ac,ab,c.getRoot())}function b(ab){return 1===ab.nodeType&&"_mce_caret"===ab.id}function j(){l({alignleft:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"},defaultBlock:"div"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"}}],alignfull:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"},defaultBlock:"div"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(ab){return!0},onformat:function(ad,ab,ac){T(ac,function(af,ae){c.setAttrib(ad,ae,af)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),T("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(ab){l(ab,{block:ab,remove:"all"})}),l(aa.settings.formats)}function W(){aa.addShortcut("ctrl+b","bold_desc","Bold"),aa.addShortcut("ctrl+i","italic_desc","Italic"),aa.addShortcut("ctrl+u","underline_desc","Underline");for(var ab=1;ab<=6;ab++)aa.addShortcut("ctrl+"+ab,"",["FormatBlock",!1,"h"+ab]);aa.addShortcut("ctrl+7","",["FormatBlock",!1,"p"]),aa.addShortcut("ctrl+8","",["FormatBlock",!1,"div"]),aa.addShortcut("ctrl+9","",["FormatBlock",!1,"address"])}function V(ab){return ab?Q[ab]:Q}function l(ab,ac){ab&&("string"!=typeof ab?T(ab,function(ae,ad){l(ad,ae)}):(ac=ac.length?ac:[ac],T(ac,function(ad){ad.deep===D&&(ad.deep=!ad.selector),ad.split===D&&(ad.split=!ad.selector||ad.inline),ad.remove===D&&ad.selector&&!ad.inline&&(ad.remove="none"),ad.selector&&ad.inline&&(ad.mixed=!0,ad.block_expand=!0),"string"==typeof ad.classes&&(ad.classes=ad.classes.split(/\s+/))}),Q[ab]=ac))}function Y(ae,al,ag){function ab(aq,ap){ap=ap||am,aq&&(ap.onformat&&ap.onformat(aq,ap,al,ag),T(ap.styles,function(at,ar){c.setStyle(aq,ar,q(at,al))}),T(ap.attributes,function(at,ar){c.setAttrib(aq,ar,q(at,al))}),T(ap.classes,function(ar){ar=q(ar,al),c.hasClass(aq,ar)||c.addClass(aq,ar)}))}function af(){function ar(ay,aw){var ax=new t(aw);for(ag=ax.current();ag;ag=ax.prev())if(ag.childNodes.length>1||ag==ay||"BR"==ag.tagName)return ag}var aq=aa.selection.getRng(),av=aq.startContainer,ap=aq.endContainer;if(av!=ap&&0===aq.endOffset){var au=ar(av,ap),at=3==au.nodeType?au.length:au.childNodes.length;aq.setEnd(au,at)}return aq}function ad(at,ay,aw,av,aq){var ax,az,ap=[],ar=-1,aA=-1,au=-1;return T(at.childNodes,function(aC,aB){if("UL"===aC.nodeName||"OL"===aC.nodeName)return ar=aB,ax=aC,!1}),T(at.childNodes,function(aC,aB){"SPAN"===aC.nodeName&&"bookmark"==c.getAttrib(aC,"data-mce-type")&&(aC.id==ay.id+"_start"?aA=aB:aC.id==ay.id+"_end"&&(au=aB))}),ar<=0||aA<ar&&au>ar?(T(a.grep(at.childNodes),aq),0):(az=c.clone(aw,X),T(a.grep(at.childNodes),function(aC,aB){(aA<ar&&aB<ar||aA>ar&&aB>ar)&&(ap.push(aC),aC.parentNode.removeChild(aC))}),aA<ar?at.insertBefore(az,ax):aA>ar&&at.insertBefore(az,ax.nextSibling),av.push(az),T(ap,function(aB){az.appendChild(aB)}),az)}function an(aq,at,aw){var av,ar,ap=[],au=!0;av=am.inline||am.block,ar=c.create(av),ab(ar),N.walk(aq,function(ax){function az(aA){var aF,aD,aB,aC,aE;return aE=au,aF=aA.nodeName.toLowerCase(),aD=aA.parentNode.nodeName.toLowerCase(),1===aA.nodeType&&x(aA)&&(aE=au,au="true"===x(aA),aC=!0),g(aF,"br")?(ay=0,void(am.block&&c.remove(aA))):am.wrapper&&y(aA,ae,al)?void(ay=0):au&&!aC&&am.block&&!am.wrapper&&I(aF)?(aA=c.rename(aA,av),ab(aA),ap.push(aA),void(ay=0)):am.selector&&(T(ah,function(aG){"collapsed"in aG&&aG.collapsed!==ai||c.is(aA,aG.selector)&&!b(aA)&&(ab(aA,aG),aB=!0)}),!am.inline||aB)?void(ay=0):void(au&&!aC&&d(av,aF)&&d(aD,av)&&(aw||3!==aA.nodeType||1!==aA.nodeValue.length||65279!==aA.nodeValue.charCodeAt(0))&&!b(aA)?(ay||(ay=c.clone(ar,X),aA.parentNode.insertBefore(ay,aA),ap.push(ay)),ay.appendChild(aA)):"li"==aF&&at?ay=ad(aA,at,ar,ap,az):(ay=0,T(a.grep(aA.childNodes),az),aC&&(au=aE),ay=0))}var ay;T(ax,az)}),am.wrap_links===!1&&T(ap,function(ax){function ay(aC){var aB,aA,az;if("A"===aC.nodeName){for(aA=c.clone(ar,X),ap.push(aA),az=a.grep(aC.childNodes),aB=0;aB<az.length;aB++)aA.appendChild(az[aB]);aC.appendChild(aA)}T(a.grep(aC.childNodes),ay)}ay(ax)}),T(ap,function(az){function aA(aC){var aB=0;return T(aC.childNodes,function(aD){f(aD)||K(aD)||aB++}),aB}function ay(aB){var aD,aC;return T(aB.childNodes,function(aE){if(1==aE.nodeType&&!K(aE)&&!b(aE))return aD=aE,X}),aD&&h(aD,am)&&(aC=c.clone(aD,X),ab(aC),c.replace(aC,aB,C),c.remove(aD,1)),aC||aB}var ax;if(ax=aA(az),(ap.length>1||!H(az))&&0===ax)return void c.remove(az,1);if(am.inline||am.wrapper){if(am.exact||1!==ax||(az=ay(az)),T(ah,function(aB){T(c.select(aB.inline,az),function(aD){var aC;if(aB.wrap_links===!1){aC=aD.parentNode;do if("A"===aC.nodeName)return;while(aC=aC.parentNode)}Z(aB,al,aD,aB.exact?aD:null)})}),y(az.parentNode,ae,al))return c.remove(az,1),az=0,C;am.merge_with_parents&&c.getParent(az.parentNode,function(aB){if(y(aB,ae,al))return c.remove(az,1),az=0,C}),az&&am.merge_siblings!==!1&&(az=u(E(az),az),az=u(az,E(az,C)))}})}var ak,ac,ah=V(ae),am=ah[0],ai=r.isCollapsed();if(am)if(ag)ag.nodeType?(ac=c.createRng(),ac.setStartBefore(ag),ac.setEndAfter(ag),an(p(ac,ah),null,!0)):an(ag,null,!0);else if(ai&&am.inline&&!c.select("td.mceSelected,th.mceSelected").length)U("apply",ae,al);else{var ao=aa.selection.getNode();m||!ah[0].defaultBlock||c.getParent(ao,c.isBlock)||Y(ah[0].defaultBlock),aa.selection.setRng(af()),ak=r.getBookmark(),an(p(r.getRng(C),ah),ak),am.styles&&(am.styles.color||am.styles.textDecoration)&&(a.walk(ao,L,"childNodes"),L(ao)),r.moveToBookmark(ak),R(r.getRng(C)),aa.nodeChanged()}}function B(ad,am,af){function ae(av){var au,at,ar,ax,aw;if(3!==av.nodeType){if(1===av.nodeType&&x(av)&&(ax=al,al="true"===x(av),aw=!0),au=a.grep(av.childNodes),al&&!aw)for(at=0,ar=ag.length;at<ar&&!Z(ag[at],am,av,av);at++);if(ao.deep&&au.length){for(at=0,ar=au.length;at<ar;at++)ae(au[at]);aw&&(al=ax)}}}function ah(aq){var ar;return T(n(aq.parentNode).reverse(),function(at){var au;ar||"_start"==at.id||"_end"==at.id||(au=y(at,ad,am),au&&au.split!==!1&&(ar=at))}),ar}function ab(au,aq,aw,az){var aA,ay,ax,at,av,ar;if(au){for(ar=au.parentNode,aA=aq.parentNode;aA&&aA!=ar;aA=aA.parentNode){for(ay=c.clone(aA,X),av=0;av<ag.length;av++)if(Z(ag[av],am,ay,ay)){ay=0;break}ay&&(ax&&ay.appendChild(ax),at||(at=ay),ax=ay)}!az||ao.mixed&&H(au)||(aq=c.split(au,aq)),ax&&(aw.parentNode.insertBefore(ax,aw),at.appendChild(aw))}return aq}function an(aq){return ab(ah(aq),aq,aq,!0)}function ai(at){var ar=c.get(at?"_start":"_end"),aq=ar[at?"firstChild":"lastChild"];return K(aq)&&(aq=aq[at?"firstChild":"lastChild"]),c.remove(ar,!0),aq}function ap(aq){var at,au;aq=p(aq,ag,C),ao.split&&(at=M(aq,C),au=M(aq),at!=au?(/^(TR|TD)$/.test(at.nodeName)&&at.firstChild&&(at=("TD"==at.nodeName?at.firstChild:at.firstChild.firstChild)||at),at=S(at,"span",{id:"_start","data-mce-type":"bookmark"}),au=S(au,"span",{id:"_end","data-mce-type":"bookmark"}),an(at),an(au),at=ai(C),au=ai()):at=au=an(at),aq.startContainer=at.parentNode,aq.startOffset=s(at),aq.endContainer=au.parentNode,aq.endOffset=s(au)+1),N.walk(aq,function(av){T(av,function(aw){ae(aw),1===aw.nodeType&&"underline"===aa.dom.getStyle(aw,"text-decoration")&&aw.parentNode&&"underline"===i(aw.parentNode)&&Z({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,aw)})})}var ak,ac,ag=V(ad),ao=ag[0],al=!0;return af?void(af.nodeType?(ac=c.createRng(),ac.setStartBefore(af),ac.setEndAfter(af),ap(ac)):ap(af)):void(r.isCollapsed()&&ao.inline&&!c.select("td.mceSelected,th.mceSelected").length?U("remove",ad,am):(ak=r.getBookmark(),ap(r.getRng(C)),r.moveToBookmark(ak),ao.inline&&k(ad,am,r.getStart())&&R(r.getRng(!0)),aa.nodeChanged()))}function F(ac,ae,ad){var ab=V(ac);!k(ac,ae,ad)||"toggle"in ab[0]&&!ab[0].toggle?Y(ac,ae,ad):B(ac,ae,ad)}function y(ac,ab,ah,af){function aj(an,ap,aq){var am,ao,al,ak=ap[aq];if(ap.onmatch)return ap.onmatch(an,ap,aq);if(ak)if(ak.length===D){for(am in ak)if(ak.hasOwnProperty(am)){if(ao="attributes"===aq?c.getAttrib(an,am):O(an,am),af&&!ao&&!ap.exact)return;if((!af||ap.exact)&&!g(ao,q(ak[am],ah)))return}}else for(al=0;al<ak.length;al++)if("attributes"===aq?c.getAttrib(an,ak[al]):O(an,ak[al]))return ap;return ap}var ai,ag,ae,ad=V(ab);if(ad&&ac)for(ag=0;ag<ad.length;ag++)if(ai=ad[ag],h(ac,ai)&&aj(ac,ai,"attributes")&&aj(ac,ai,"styles")){if(ae=ai.classes)for(ag=0;ag<ae.length;ag++)if(!c.hasClass(ac,ae[ag]))return;return ai}}function k(ad,af,ae){function ab(ag){return ag=c.getParent(ag,function(ah){return!!y(ah,ad,af,!0)}),y(ag,ad,af)}var ac;return ae?ab(ae):(ae=r.getNode(),ab(ae)?C:(ac=r.getStart(),ac!=ae&&ab(ac)?C:X))}function v(ai,ah){var af,ag=[],ae={};return af=r.getStart(),c.getParent(af,function(al){var ak,aj;for(ak=0;ak<ai.length;ak++)aj=ai[ak],!ae[aj]&&y(al,aj,ah)&&(ae[aj]=!0,ag.push(aj))},c.getRoot()),ag}function z(af){var ae,ad,ag,ac,ab,ah=V(af);if(ah)for(ae=r.getStart(),ad=n(ae),ac=ah.length-1;ac>=0;ac--){if(ab=ah[ac].selector,!ab)return C;for(ag=ad.length-1;ag>=0;ag--)if(c.is(ad[ag],ab))return C}return X}function J(ab,ae,ac){var ad;return P||(P={},ad={},aa.onNodeChange.addToTop(function(ag,af,ai){var ah=n(ai),aj={};T(P,function(ak,al){T(ah,function(am){if(y(am,al,{},ak.similar))return ad[al]||(T(ak,function(an){an(!0,{node:am,format:al,parents:ah})}),ad[al]=ak),aj[al]=ak,!1})}),T(ad,function(ak,al){aj[al]||(delete ad[al],T(ak,function(am){am(!1,{node:ai,format:al,parents:ah})}))})})),T(ab.split(","),function(af){P[af]||(P[af]=[],P[af].similar=ac),P[af].push(ae)}),this}function h(ab,ac){return g(ab,ac.inline)?C:g(ab,ac.block)?C:ac.selector?c.is(ab,ac.selector):void 0}function g(ac,ab){return ac=ac||"",ab=ab||"",ac=""+(ac.nodeName||ac),ab=""+(ab.nodeName||ab),ac.toLowerCase()==ab.toLowerCase()}function O(ac,ab){var ad=c.getStyle(ac,ab);return"color"!=ab&&"backgroundColor"!=ab||(ad=c.toHex(ad)),"fontWeight"==ab&&700==ad&&(ad="bold"),""+ad}function q(ab,ac){return"string"!=typeof ab?ab=ab(ac):ac&&(ab=ab.replace(/%(\w+)/g,function(ae,ad){return ac[ad]||ae})),ab}function f(ab){return ab&&3===ab.nodeType&&/^([\t \r\n]+|)$/.test(ab.nodeValue)}function S(ad,ac,ab){var ae=c.create(ac,ab);return ad.parentNode.insertBefore(ae,ad),ae.appendChild(ad),ae}function p(ab,am,ae){function ao(aA){function ay(aB){return"BR"==aB.nodeName&&aB.getAttribute("data-mce-bogus")&&!aB.nextSibling}var au,ax,aw,av,at;if(au=ax=aA?ad:ar,av=aA?"previousSibling":"nextSibling",at=c.getRoot(),3==au.nodeType&&!f(au)&&(aA?ai>0:ak<au.nodeValue.length))return au;for(;;){if(!am[0].block_expand&&H(ax))return ax;for(aw=ax[av];aw;aw=aw[av])if(!K(aw)&&!f(aw)&&!ay(aw))return ax;if(ax.parentNode==at){au=ax;break}ax=ax.parentNode}return au}function ag(at,au){for(au===D&&(au=3===at.nodeType?at.length:at.childNodes.length);at&&at.hasChildNodes();)at=at.childNodes[au],at&&(au=3===at.nodeType?at.length:at.childNodes.length);return{node:at,offset:au}}function aq(au){for(var at=au;at;){if(1===at.nodeType&&x(at))return"false"===x(at)?at:au;at=at.parentNode}return au}function aj(au,ay,aA){function aw(aC,aE){var aF,aB,aD=aC.nodeValue;return"undefined"==typeof aE&&(aE=aA?aD.length:0),aA?(aF=aD.lastIndexOf(" ",aE),aB=aD.lastIndexOf(" ",aE),aF=aF>aB?aF:aB,aF===-1||ae||aF++):(aF=aD.indexOf(" ",aE),aB=aD.indexOf(" ",aE),aF=aF!==-1&&(aB===-1||aF<aB)?aF:aB),aF}var ax,av,az,at;if(3===au.nodeType){if(az=aw(au,ay),az!==-1)return{container:au,offset:az};at=au}for(ax=new t(au,c.getParent(au,H)||aa.getBody());av=ax[aA?"prev":"next"]();)if(3===av.nodeType){if(at=av,az=aw(av),az!==-1)return{container:av,offset:az}}else if(H(av))break;if(at)return ay=aA?0:at.length,{container:at,offset:ay}}function af(au,at){var av,aw,ay,ax;for(3==au.nodeType&&0===au.nodeValue.length&&au[at]&&(au=au[at]),av=n(au),aw=0;aw<av.length;aw++)for(ay=0;ay<am.length;ay++)if(ax=am[ay],!("collapsed"in ax&&ax.collapsed!==ab.collapsed)&&c.is(av[aw],ax.selector))return av[aw];return au}function ac(au,at,aw){var av;if(am[0].wrapper||(av=c.getParent(au,am[0].block)),av||(av=c.getParent(3==au.nodeType?au.parentNode:au,I)),av&&am[0].wrapper&&(av=n(av,"ul,ol").reverse()[0]||av),!av)for(av=au;av[at]&&!H(av[at])&&(av=av[at],!g(av,"br")););return av||au}var an,ah,al,ad=ab.startContainer,ai=ab.startOffset,ar=ab.endContainer,ak=ab.endOffset;if(1==ad.nodeType&&ad.hasChildNodes()&&(an=ad.childNodes.length-1,ad=ad.childNodes[ai>an?an:ai],3==ad.nodeType&&(ai=0)),1==ar.nodeType&&ar.hasChildNodes()&&(an=ar.childNodes.length-1,ar=ar.childNodes[ak>an?an:ak-1],3==ar.nodeType&&(ak=ar.nodeValue.length)),ad=aq(ad),ar=aq(ar),(K(ad.parentNode)||K(ad))&&(ad=K(ad)?ad:ad.parentNode,
ad=ad.nextSibling||ad,3==ad.nodeType&&(ai=0)),(K(ar.parentNode)||K(ar))&&(ar=K(ar)?ar:ar.parentNode,ar=ar.previousSibling||ar,3==ar.nodeType&&(ak=ar.length)),am[0].inline&&(ab.collapsed&&(al=aj(ad,ai,!0),al&&(ad=al.container,ai=al.offset),al=aj(ar,ak),al&&(ar=al.container,ak=al.offset)),ah=ag(ar,ak),ah.node)){for(;ah.node&&0===ah.offset&&ah.node.previousSibling;)ah=ag(ah.node.previousSibling);ah.node&&ah.offset>0&&3===ah.node.nodeType&&" "===ah.node.nodeValue.charAt(ah.offset-1)&&ah.offset>1&&(ar=ah.node,ar.splitText(ah.offset-1))}return(am[0].inline||am[0].block_expand)&&(am[0].inline&&3==ad.nodeType&&0!==ai||(ad=ao(!0)),am[0].inline&&3==ar.nodeType&&ak!==ar.nodeValue.length||(ar=ao())),am[0].selector&&am[0].expand!==X&&!am[0].inline&&(ad=af(ad,"previousSibling"),ar=af(ar,"nextSibling")),(am[0].block||am[0].selector)&&(ad=ac(ad,"previousSibling"),ar=ac(ar,"nextSibling"),am[0].block&&(H(ad)||(ad=ao(!0)),H(ar)||(ar=ao()))),1==ad.nodeType&&(ai=s(ad),ad=ad.parentNode),1==ar.nodeType&&(ak=s(ar)+1,ar=ar.parentNode),{startContainer:ad,startOffset:ai,endContainer:ar,endOffset:ak}}function Z(ah,ag,ae,ab){var ad,ac,af;if(!h(ae,ah))return X;if("all"!=ah.remove)for(T(ah.styles,function(aj,ai){aj=q(aj,ag),"number"==typeof ai&&(ai=aj,ab=0),ab&&!g(O(ab,ai),aj)||c.setStyle(ae,ai,""),af=1}),af&&""==c.getAttrib(ae,"style")&&(ae.removeAttribute("style"),ae.removeAttribute("data-mce-style")),T(ah.attributes,function(ak,ai){var aj;if(ak=q(ak,ag),"number"==typeof ai&&(ai=ak,ab=0),!ab||g(c.getAttrib(ab,ai),ak)){if("class"==ai&&(ak=c.getAttrib(ae,ai),ak&&(aj="",T(ak.split(/\s+/),function(al){/mce\w+/.test(al)&&(aj+=(aj?" ":"")+al)}),aj)))return void c.setAttrib(ae,ai,aj);"class"==ai&&ae.removeAttribute("className"),e.test(ai)&&ae.removeAttribute("data-mce-"+ai),ae.removeAttribute(ai)}}),T(ah.classes,function(ai){ai=q(ai,ag),ab&&!c.hasClass(ab,ai)||c.removeClass(ae,ai)}),ac=c.getAttribs(ae),ad=0;ad<ac.length;ad++)if(0!==ac[ad].nodeName.indexOf("_"))return X;return"none"!=ah.remove?(o(ae,ah),C):void 0}function o(ad,ae){function af(ah,ag,ai){return ah=E(ah,ag,ai),!ah||"BR"==ah.nodeName||H(ah)}var ac,ab=ad.parentNode;ae.block&&(m?ab==c.getRoot()&&(ae.list_block&&g(ad,ae.list_block)||T(a.grep(ad.childNodes),function(ag){d(m,ag.nodeName.toLowerCase())?ac?ac.appendChild(ag):ac=S(ag,m):ac=0})):H(ad)&&!H(ab)&&(af(ad,X)||af(ad.firstChild,C,1)||ad.insertBefore(c.create("br"),ad.firstChild),af(ad,C)||af(ad.lastChild,X,1)||ad.appendChild(c.create("br")))),ae.selector&&ae.inline&&!g(ae.inline,ad)||c.remove(ad,1)}function E(ac,ab,ad){if(ac)for(ab=ab?"nextSibling":"previousSibling",ac=ad?ac:ac[ab];ac;ac=ac[ab])if(1==ac.nodeType||!f(ac))return ac}function K(ab){return ab&&1==ab.nodeType&&"bookmark"==ab.getAttribute("data-mce-type")}function u(af,ae){function ah(ak,aj){function ai(am){var an={};return T(c.getAttribs(am),function(ao){var ap=ao.nodeName.toLowerCase();0!==ap.indexOf("_")&&"style"!==ap&&(an[ap]=c.getAttrib(am,ap))}),an}function al(ap,ao){var an,am;for(am in ap)if(ap.hasOwnProperty(am)){if(an=ao[am],an===D)return X;if(ap[am]!=an)return X;delete ao[am]}for(am in ao)if(ao.hasOwnProperty(am))return X;return C}return ak.nodeName!=aj.nodeName?X:al(ai(ak),ai(aj))&&al(c.parseStyle(c.getAttrib(ak,"style")),c.parseStyle(c.getAttrib(aj,"style")))?C:X}function ag(aj,ai){for(ad=aj;ad;ad=ad[ai]){if(3==ad.nodeType&&0!==ad.nodeValue.length)return aj;if(1==ad.nodeType&&!K(ad))return ad}return aj}var ad,ac;if(af&&ae&&(af=ag(af,"previousSibling"),ae=ag(ae,"nextSibling"),ah(af,ae))){for(ad=af.nextSibling;ad&&ad!=ae;)ac=ad,ad=ad.nextSibling,af.appendChild(ac);return c.remove(ae),T(a.grep(ae.childNodes),function(ai){af.appendChild(ai)}),af}return ae}function I(ab){return/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(ab)}function M(ac,ag){var ab,af,ad;return ab=ac[ag?"startContainer":"endContainer"],af=ac[ag?"startOffset":"endOffset"],1==ab.nodeType&&(ad=ab.childNodes.length-1,!ag&&af&&af--,ab=ab.childNodes[af>ad?ad:af]),3===ab.nodeType&&ag&&af>=ab.nodeValue.length&&(ab=new t(ab,aa.getBody()).next()||ab),3!==ab.nodeType||ag||0!==af||(ab=new t(ab,aa.getBody()).prev()||ab),ab}function U(ak,ab,ai){function ad(ap){var ao=c.create("span",{id:al,"data-mce-bogus":!0,style:ac?"color:red":""});return ap&&ao.appendChild(aa.getDoc().createTextNode(G)),ao}function aj(ap,ao){for(;ap;){if(3===ap.nodeType&&ap.nodeValue!==G||ap.childNodes.length>1)return!1;ao&&1===ap.nodeType&&ao.push(ap),ap=ap.firstChild}return!0}function ag(ao){for(;ao;){if(ao.id===al)return ao;ao=ao.parentNode}}function af(ao){var ap;if(ao)for(ap=new t(ao,ao),ao=ap.current();ao;ao=ap.next())if(3===ao.nodeType)return ao}function ae(aq,ap){var ar,ao;if(aq)ao=r.getRng(!0),aj(aq)?(ap!==!1&&(ao.setStartBefore(aq),ao.setEndBefore(aq)),c.remove(aq)):(ar=af(aq),ar.nodeValue.charAt(0)===G&&(ar=ar.deleteData(0,1)),c.remove(aq,1)),r.setRng(ao);else if(aq=ag(r.getStart()),!aq)for(;aq=c.get(al);)ae(aq,!1)}function ah(){var aq,ao,av,au,ar,ap,at;aq=r.getRng(!0),au=aq.startOffset,ap=aq.startContainer,at=ap.nodeValue,ao=ag(r.getStart()),ao&&(av=af(ao)),at&&au>0&&au<at.length&&/\w/.test(at.charAt(au))&&/\w/.test(at.charAt(au-1))?(ar=r.getBookmark(),aq.collapse(!0),aq=p(aq,V(ab)),aq=N.split(aq),Y(ab,ai,aq),r.moveToBookmark(ar)):(ao&&av.nodeValue===G?Y(ab,ai,ao):(ao=ad(!0),av=ao.firstChild,aq.insertNode(ao),au=1,Y(ab,ai,ao)),r.setCursorLocation(av,au))}function am(){var ap,ar,av,au,aq,ay,at,aw,ao=r.getRng(!0),ax=[];for(ap=ao.startContainer,ar=ao.startOffset,aq=ap,3==ap.nodeType&&(ar==ap.nodeValue.length&&ap.nodeValue!==G||(au=!0),aq=aq.parentNode);aq;){if(y(aq,ab,ai)){ay=aq;break}aq.nextSibling&&(au=!0),ax.push(aq),aq=aq.parentNode}if(ay)if(au)av=r.getBookmark(),ao.collapse(!0),ao=p(ao,V(ab),!0),ao=N.split(ao),B(ab,ai,ao),r.moveToBookmark(av);else{for(aw=ad(),aq=aw,at=ax.length-1;at>=0;at--)aq.appendChild(c.clone(ax[at],!1)),aq=aq.firstChild;aq.appendChild(c.doc.createTextNode(G)),aq=aq.firstChild,c.insertAfter(aw,ay),r.setCursorLocation(aq,1)}}function an(){var ao;ao=ag(r.getStart()),ao&&!c.isEmpty(ao)&&a.walk(ao,function(ar){1!=ar.nodeType||ar.id===al||c.isEmpty(ar)||c.setAttrib(ar,"data-mce-bogus",null)},"childNodes")}var al="_mce_caret",ac=aa.settings.caret_debug;self._hasCaretEvents||(aa.onBeforeGetContent.addToTop(function(){var ap,ao=[];if(aj(ag(r.getStart()),ao))for(ap=ao.length;ap--;)c.setAttrib(ao[ap],"data-mce-bogus","1")}),a.each("onMouseUp onKeyUp".split(" "),function(ao){aa[ao].addToTop(function(){ae(),an()})}),aa.onKeyDown.addToTop(function(ao,aq){var ap=aq.keyCode;8!=ap&&37!=ap&&39!=ap||ae(ag(r.getStart())),an()}),r.onSetContent.add(an),self._hasCaretEvents=!0),"apply"==ak?ah():am()}function R(ac){var ae,ah,ag,ad,af,ab=ac.startContainer,ai=ac.startOffset;if(3==ab.nodeType&&ai>=ab.nodeValue.length&&(ai=s(ab),ab=ab.parentNode,ae=!0),1==ab.nodeType)for(ad=ab.childNodes,ab=ad[Math.min(ai,ad.length-1)],ah=new t(ab,c.getParent(ab,c.isBlock)),(ai>ad.length-1||ae)&&ah.next(),ag=ah.current();ag;ag=ah.next())if(3==ag.nodeType&&!f(ag))return af=c.create("a",null,G),ag.parentNode.insertBefore(af,ag),ac.setStart(ag,0),r.setRng(ac),void c.remove(af)}var P,D,Q={},T=a.each,c=aa.dom,r=aa.selection,t=a.dom.TreeWalker,N=new a.dom.RangeUtils(c),d=aa.schema.isValidChild,H=(a.isArray,c.isBlock),m=aa.settings.forced_root_block,s=c.nodeIndex,G="\ufeff",e=/^(src|href|style)$/,X=!1,C=!0,x=c.getContentEditable,i=function(ac){var ab;return aa.dom.getParent(ac,function(ad){return ab=aa.dom.getStyle(ad,"text-decoration"),ab&&"none"!==ab}),ab},L=function(ab){var ac;1===ab.nodeType&&ab.parentNode&&1===ab.parentNode.nodeType&&(ac=i(ab.parentNode),aa.dom.getStyle(ab,"color")&&ac?aa.dom.setStyle(ab,"text-decoration",ac):aa.dom.getStyle(ab,"textdecoration")===ac&&aa.dom.setStyle(ab,"text-decoration",null))};a.extend(this,{get:V,register:l,apply:Y,remove:B,toggle:F,match:k,matchAll:v,matchNode:y,canApply:z,formatChanged:J}),j(),W()}}(tinymce),tinymce.onAddEditor.add(function(e,a){function b(j,i){e.each(i,function(l,k){l&&g.setStyle(j,k,l)}),g.rename(j,"span")}function f(i,j){g=i.dom,c.convert_fonts_to_spans&&e.each(g.select("font,u,strike",j.node),function(k){d[k.nodeName.toLowerCase()](a.dom,k)})}var d,h,g,c=a.settings;c.inline_styles&&(h=e.explode(c.font_size_legacy_values),d={font:function(j,i){b(i,{backgroundColor:i.style.backgroundColor,color:i.color,fontFamily:i.face,fontSize:h[parseInt(i.size,10)-1]})},u:function(j,i){b(i,{textDecoration:"underline"})},strike:function(j,i){b(i,{textDecoration:"line-through"})}},a.onPreProcess.add(f),a.onSetContent.add(f),a.onInit.add(function(){a.selection.onSetContent.add(f)}))}),function(b){var a=b.dom.TreeWalker;b.EnterKey=function(f){function g(A){function E(N){return N&&i.isBlock(N)&&!/^(TD|TH|CAPTION|FORM)$/.test(N.nodeName)&&!/^(fixed|absolute)/i.test(N.style.position)&&"true"!==i.getContentEditable(N)}function F(O){var N;b.isIE&&i.isBlock(O)&&(N=e.getRng(),O.appendChild(i.create("span",null," ")),e.select(O),O.lastChild.outerHTML="",e.setRng(N))}function y(P){for(var N,O=P,Q=[];O=O.firstChild;){if(i.isBlock(O))return;1!=O.nodeType||c[O.nodeName.toLowerCase()]||Q.push(O)}for(N=Q.length;N--;)O=Q[N],!O.hasChildNodes()||O.firstChild==O.lastChild&&""===O.firstChild.nodeValue?i.remove(O):"A"==O.nodeName&&" "===(O.innerText||O.textContent)&&i.remove(O)}function m(O){var T,R,N,U,S,P,Q=O;if(N=i.createRng(),O.hasChildNodes()){for(T=new a(O,O);R=T.current();){if(3==R.nodeType){N.setStart(R,0),N.setEnd(R,0);break}if(c[R.nodeName.toLowerCase()]){N.setStartBefore(R),N.setEndBefore(R);break}Q=R,R=T.next()}R||(N.setStart(Q,0),N.setEnd(Q,0))}else"BR"==O.nodeName?O.nextSibling&&i.isBlock(O.nextSibling)?((!M||M<9)&&(P=i.create("br"),O.parentNode.insertBefore(P,O)),N.setStartBefore(O),N.setEndBefore(O)):(N.setStartAfter(O),N.setEndAfter(O)):(N.setStart(O,0),N.setEnd(O,0));e.setRng(N),i.remove(P),S=i.getViewPort(f.getWin()),U=i.getPos(O).y,(U<S.y||U+25>S.y+S.h)&&f.getWin().scrollTo(0,U<S.y?U:U-S.h+25)}function r(O){var R,Q,N,P=z;if(R=O||"TABLE"==t?i.create(O||x):p.cloneNode(!1),N=R,d.keep_styles!==!1)do if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(P.nodeName)){if("_mce_caret"==P.id)continue;Q=P.cloneNode(!1),i.setAttrib(Q,"id",""),R.hasChildNodes()?(Q.appendChild(R.firstChild),R.appendChild(Q)):(N=Q,R.appendChild(Q))}while(P=P.parentNode);return b.isIE||(N.innerHTML='<br data-mce-bogus="1">'),R}function q(Q){var P,O,N;if(3==z.nodeType&&(Q?u>0:u<z.nodeValue.length))return!1;if(z.parentNode==p&&C&&!Q)return!0;if(Q&&1==z.nodeType&&z==p.firstChild)return!0;if("TABLE"===z.nodeName||z.previousSibling&&"TABLE"==z.previousSibling.nodeName)return C&&!Q||!C&&Q;for(P=new a(z,p),3==z.nodeType&&(Q&&0==u?P.prev():Q||u!=z.nodeValue.length||P.next());O=P.current();){if(1===O.nodeType){if(!O.getAttribute("data-mce-bogus")&&(N=O.nodeName.toLowerCase(),c[N]&&"br"!==N))return!1}else if(3===O.nodeType&&!/^[ \t\r\n]*$/.test(O.nodeValue))return!1;Q?P.prev():P.next()}return!0}function l(N,T){var U,S,P,R,Q,O=x||"P";if(S=i.getParent(N,i.isBlock),!S||!E(S)){if(S=S||j,!S.hasChildNodes())return U=i.create(O),S.appendChild(U),v.setStart(U,0),v.setEnd(U,0),U;for(R=N;R.parentNode!=S;)R=R.parentNode;for(;R&&!i.isBlock(R);)P=R,R=R.previousSibling;if(P){for(U=i.create(O),P.parentNode.insertBefore(U,P),R=P;R&&!i.isBlock(R);)Q=R.nextSibling,U.appendChild(R),R=Q;v.setStart(N,T),v.setEnd(N,T)}}return N}function H(){function N(P){for(var O=n[P?"firstChild":"lastChild"];O&&1!=O.nodeType;)O=O[P?"nextSibling":"previousSibling"];return O===p}o=x?r(x):i.create("BR"),N(!0)&&N()?i.replace(o,n):N(!0)?n.parentNode.insertBefore(o,n):N()?(i.insertAfter(o,n),F(o)):(G=v.cloneRange(),G.setStartAfter(p),G.setEndAfter(n),k=G.extractContents(),i.insertAfter(k,n),i.insertAfter(o,n)),i.remove(p),m(o),h.add()}function D(){for(var N,O=new a(z,p);N=O.current();){if("BR"==N.nodeName)return!0;N=O.next()}}function L(){var P,O,N;z&&3==z.nodeType&&u>=z.nodeValue.length&&(b.isIE||D()||(P=i.create("br"),v.insertNode(P),v.setStartAfter(P),v.setEndAfter(P),O=!0)),P=i.create("br"),v.insertNode(P),b.isIE&&"PRE"==t&&(!M||M<8)&&P.parentNode.insertBefore(i.doc.createTextNode("\r"),P),N=i.create("span",{},"&nbsp;"),P.parentNode.insertBefore(N,P),e.scrollIntoView(N),i.remove(N),O?(v.setStartBefore(P),v.setEndBefore(P)):(v.setStartAfter(P),v.setEndAfter(P)),e.setRng(v),h.add()}function s(N){do 3===N.nodeType&&(N.nodeValue=N.nodeValue.replace(/^[\r\n]+/,"")),N=N.firstChild;while(N)}function K(P){var O,Q,N=i.getRoot();for(O=P;O!==N&&"false"!==i.getContentEditable(O);)"true"===i.getContentEditable(O)&&(Q=O),O=O.parentNode;return O!==N?Q:N}function I(O){var N;b.isIE||(O.normalize(),N=O.lastChild,N&&!/^(left|right)$/gi.test(i.getStyle(N,"float",!0))||i.add(O,"br"))}var G,j,z,u,p,M,B,o,k,n,t,J,x,C,v=e.getRng(!0);if(!v.collapsed)return void f.execCommand("Delete");if(!A.isDefaultPrevented()&&(z=v.startContainer,u=v.startOffset,x=(d.force_p_newlines?"p":"")||d.forced_root_block,x=x?x.toUpperCase():"",M=i.doc.documentMode,B=A.shiftKey,1==z.nodeType&&z.hasChildNodes()&&(C=u>z.childNodes.length-1,z=z.childNodes[Math.min(u,z.childNodes.length-1)]||z,u=C&&3==z.nodeType?z.nodeValue.length:0),j=K(z))){if(h.beforeChange(),!i.isBlock(j)&&j!=i.getRoot())return void(x&&!B||L());if((x&&!B||!x&&B)&&(z=l(z,u)),p=i.getParent(z,i.isBlock),n=p?i.getParent(p.parentNode,i.isBlock):null,t=p?p.nodeName.toUpperCase():"",J=n?n.nodeName.toUpperCase():"","LI"!=J||A.ctrlKey||(p=n,t=J),"LI"==t){if(!x&&B)return void L();if(i.isEmpty(p))return!/^(UL|OL|LI)$/.test(n.parentNode.nodeName)&&void H()}if("PRE"==t&&d.br_in_pre!==!1){if(!B)return void L()}else if(!x&&!B&&"LI"!=t||x&&B)return void L();x=x||"P",q()?(o=/^(H[1-6]|PRE)$/.test(t)&&"HGROUP"!=J?r(x):r(),d.end_container_on_empty_block&&E(n)&&i.isEmpty(p)?o=i.split(n,p):i.insertAfter(o,p),m(o)):q(!0)?(o=p.parentNode.insertBefore(r(),p),F(o)):(G=v.cloneRange(),G.setEndAfter(p),k=G.extractContents(),s(k),o=k.firstChild,i.insertAfter(k,p),y(o),I(p),m(o)),i.setAttrib(o,"id",""),h.add()}}var i=f.dom,e=f.selection,d=f.settings,h=f.undoManager,c=f.schema.getNonEmptyElements();f.onKeyDown.add(function(k,j){13==j.keyCode&&g(j)!==!1&&j.preventDefault()})}}(tinymce);