window.dnn=dnn||{},window.dnn.modules=dnn.modules||{},window.dnn.modules.publisher=dnn.modules.publisher||{},window.dnn.modules.publisher.SocialShareManager=function($,ko){"use strict";function openPopup(target,width,height){window.open(target,"","height="+height+",width="+width+",directories=no,titlebar=no,toolbar=no,location=no,status=no,menubar=no")}function shareCompletion(url,network){var params={contentItemId:configuration.contentItemId,groupId:-1,context:void 0,network:network,url:url};dnn.modules.publisher.RequestUtils.request("Publisher","Share","ShareCompletion","POST",params)}function init(config){configuration=config;var viewModelBinding=$(config.bindingElementSelector),node=viewModelBinding[0];ko.dataFor(node)&&ko.cleanNode(node),ko.applyBindings(viewModel,node)}var configuration,viewModel={},shareFunctions={facebook:function(url){var query=$.param({u:url}),target="https://www.facebook.com/share.php?"+query;openPopup(target,600,225)},twitter:function(url){var query=$.param({status:url}),target="https://twitter.com/home?"+query;openPopup(target,600,400)},linkedin:function(url){var metaTitle=$('meta[property="og:title"]').attr("content"),query=$.param({mini:!0,url:url,title:metaTitle}),target="http://www.linkedin.com/shareArticle?"+query;openPopup(target,1024,400)},pinterest:function(url){var metaImage=$('meta[name="og:image"]').attr("content"),query=$.param({url:url,description:document.title,media:metaImage}),target="http://pinterest.com/pin/create/button/?"+query;openPopup(target,600,400)}};return viewModel.share=function(d,e){var network=e.target.className,url=window.location.href;shareFunctions[network](url),configuration.userId>0&&shareCompletion(url,network)},{init:init}}(jQuery||$,ko);