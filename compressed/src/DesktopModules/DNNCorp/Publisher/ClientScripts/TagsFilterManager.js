window.dnn=dnn||{},window.dnn.modules=dnn.modules||{},window.dnn.modules.publisher=dnn.modules.publisher||{},window.dnn.modules.publisher.TagsFilterManager=function($,ko){"use strict";function init(config){configuration=config,viewModel.selectedTags=config.selectedTags;var viewModelBinding=$(config.bindingElementSelector),node=viewModelBinding[0];viewModel.items.removeAll(),ko.utils.arrayPushAll(viewModel.items,config.items),viewModel.lastPage(Math.ceil(config.count/config.pageSize)),ko.applyBindings(viewModel,node)}var configuration,viewModel={items:ko.observableArray(),lastPage:ko.observable()};return viewModel.getPage=function(page,callback){var params={moduleId:configuration.moduleId,page:page};dnn.modules.publisher.RequestUtils.request("Publisher","Filter","GetTopTags","GET",params,function(data){data.length>0&&(viewModel.items.removeAll(),ko.utils.arrayPushAll(viewModel.items,data)),"function"==typeof callback&&callback()})},viewModel.selectTag=function(tag){viewModel.selectedTags.indexOf(tag.name)>=0?viewModel.selectedTags.remove(tag.name):viewModel.selectedTags.push(tag.name)},{init:init}}(jQuery||$,ko);