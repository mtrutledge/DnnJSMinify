window.dnn=dnn||{},window.dnn.personalizedTabs=dnn.personalizedTabs||{},function(){var TemplateLoaderClass;TemplateLoaderClass=function(){"use strict";function TemplateLoader(){}var getRegisteredViewModelsForId,registerAllTemplates,applyBindings,_viewModelsRegister={};return TemplateLoader.class="TemplateLoader",TemplateLoader.type="Class",getRegisteredViewModelsForId=function(extensionPointId){return _viewModelsRegister[extensionPointId]||(_viewModelsRegister[extensionPointId]={}),_viewModelsRegister[extensionPointId]},applyBindings=function(){var viewModel,viewModelBinding;for(var key in _viewModelsRegister)_viewModelsRegister.hasOwnProperty(key)&&(viewModelBinding=$("#{0}".replace(/\{0\}/g,key)),viewModel=_viewModelsRegister[key],ko.applyBindings(viewModel,viewModelBinding[0]))},registerAllTemplates=function(templatesToInject,index){var currentTemplate,self;self=this,index||(index=0),currentTemplate=templatesToInject[index];var registeredViewModelsForId=getRegisteredViewModelsForId(currentTemplate.viewModelBindingId);$.extend(!0,registeredViewModelsForId,currentTemplate.viewModel),$.get(currentTemplate.path,function(data){var extensionPoint=$("#{0}".replace(/\{0\}/g,currentTemplate.extensionPointId));return extensionPoint.append(data),currentTemplate.callback(data),index+1==templatesToInject.length?void applyBindings():void registerAllTemplates.call(self,templatesToInject,index+1)})},TemplateLoader.readHtmlTemplate=function(templatePath,callback){$.get(templatePath,function(data){callback(data)})},TemplateLoader.prototype.registerTemplates=function(templatesToInject){registerAllTemplates.call(this,templatesToInject,0)},TemplateLoader}(),window.dnn.personalizedTabs.TemplateLoader=TemplateLoaderClass}.call(this);