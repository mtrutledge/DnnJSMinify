dnn=dnn||{},dnn.QuickAddModuleManager={init:function(options){if("QuickAddModuleManager"==options.type&&options.panes)for(var panes=options.panes.split(","),i=0;i<panes.length;i++)!function(paneName){var pane=paneName.length>0?$("[id$="+paneName+'][class~="EvoqEmptyPane"]'):null;pane&&pane.length>0&&pane.dnnQuickAddModuleManager({pane:paneName,page:options.page,textModule:options.textModule,imgModule:options.imgModule,addModuleTitle:options.addModuleTitle,addTextModuleTitle:options.addTextModuleTitle,addImageModuleTitle:options.addImageModuleTitle})}(panes[i])}},function($){$.fn.dnnQuickAddModuleManager=function(options){return this.data("dnnQuickAddModuleManager")||this.data("dnnQuickAddModuleManager",new dnnQuickAddModuleManager(this,options)),this};var dnnQuickAddModuleManager=function(container,options){this.options=options,this.container=container,this.init()};dnnQuickAddModuleManager.prototype={constructor:dnnQuickAddModuleManager,init:function(){this.options=$.extend({},$.fn.dnnQuickAddModuleManager.defaultOptions,this.options);var $this=this.$this=this.container;$this.addClass("dnnQuickAddModuleManager");var handlerContainer=$('<div class="handlerContainer" />');$this.append(handlerContainer),handlerContainer.append(this._generateLayoutText()),handlerContainer.append(this._generateLayoutImage()),handlerContainer.append(this._generateLayoutModule())},_generateLayoutModule:function(){var handler=$('<div class="QuickAddHandler QuickAddModuleHandler"></div>');return handler.attr("title",this.options.addModuleTitle),handler.click($.proxy(this._addQuickAddModuleHandlerClick,this)),handler},_generateLayoutImage:function(){var handler=$('<div class="QuickAddHandler QuickAddImageHandler"></div>');return handler.attr("title",this.options.addImageModuleTitle),handler.click($.proxy(this._addQuickAddImageHandlerClick,this)),handler},_generateLayoutText:function(){var handler=$('<div class="QuickAddHandler QuickAddTextHandler"></div>');return handler.attr("title",this.options.addTextModuleTitle),handler.click($.proxy(this._addQuickAddTextHandlerClick,this)),handler},_getModuleManager:function(){return this.container.data("dnnModuleManager")},_getModuleDialog:function(){var moduleManager=this._getModuleManager(),dialog=dnn.ContentEditorManager.getModuleDialog();return dialog.apply(moduleManager),dialog},_addQuickAddModuleHandlerClick:function(){this._getModuleManager().getHandler().click();var moduleDialog=this._getModuleDialog();moduleDialog.noFloat()},_addQuickAddImageHandlerClick:function(){var moduleDialog=this._getModuleDialog();moduleDialog.noFloat(),moduleDialog.addModule(this.options.imgModule,function(reload){if(reload)moduleDialog._setCookie("ImageModulePane",this.attr("id"));else{var handler=this;setTimeout(function(){"undefined"==typeof window.dnnLoadScriptsInAjaxMode||0==window.dnnLoadScriptsInAjaxMode.length?handler.find("div.DnnModule").find(".redactor-box .re-dnnImageUpload").click():$(window).one("dnnScriptLoadComplete",function(){handler.find("div.DnnModule").find(".redactor-box .re-dnnImageUpload").click()})},1e3)}})},_addQuickAddTextHandlerClick:function(){var moduleDialog=this._getModuleDialog();moduleDialog.noFloat(),moduleDialog.addModule(this.options.textModule)},_removeWatermark:function(element){$(element).find(".QuickAddModuleHandler").remove(),$(element).find(".QuickAddImageHandler").remove(),$(element).find(".QuickAddTextHandler").remove(),$(element).removeClass("dnnQuickAddModuleManager")}},$(window).load(function(){var handleImageModule=function(){var moduleDialog=dnn.ContentEditorManager.getModuleDialog(),imageModulePaneId=moduleDialog._getCookie("ImageModulePane");if(imageModulePaneId){var $pane=$("#"+imageModulePaneId);$pane.find(".redactor-box .re-dnnImageUpload").click(),moduleDialog._removeCookie("ImageModulePane")}};setTimeout(handleImageModule,600)})}(jQuery);