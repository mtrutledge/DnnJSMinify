Module_CookieHelper={defaultCookieExpireDays:30,cookie_School_SelectedOPID:"ssOPID",cookie_School_SelectedSTATE:"ssSTATE",cookie_School_SelectedSCHOOL:"ssSCHOOL",cookie_School_SelectedSCHOOLIsTaxIncluded:"ssSCHOOLTax",cookie_School_SelectedSellerArray:"SSSA",cookie_School_SelectedMagazineArray:"SSMA",cookie_School_SelectedMagazineItemArray:"SSMIA",cookie_School_Skipped:"ss",cookie_Items_InCart:"iic",cookie_LowestItemInCartTemp:"LICT",cookie_FB_AccessToken:"FBA",cookie_BelieveUserProfileType:"BUT",cookie_IsUserLoggedIn:"IUL",cookie_Parent_Sponsor_InitialLogin:"PSIL",cookie_DEEPLINK_LastProductViewed:"DSKU",clearAllBelieveCookies:function(){this.clearLoginCookies(),this.clearShoppingCookiesUponCheckout()},clearShoppingCookiesUponCheckout:function(){this.clearCookie(this.cookie_School_SelectedOPID),this.clearCookie(this.cookie_School_SelectedSTATE),this.clearCookie(this.cookie_School_SelectedSCHOOL),this.clearCookie(this.cookie_School_SelectedSCHOOLIsTaxIncluded),this.clearCookie(this.cookie_School_SelectedSellerArray),this.clearCookie(this.cookie_School_SelectedMagazineItemArray),this.clearCookie(this.cookie_School_SelectedMagazineArray),this.clearCookie(this.cookie_School_Skipped),this.clearCookie(this.cookie_Items_InCart),this.clearCookie(this.cookie_FB_AccessToken),this.clearCookie(this.cookie_Parent_Sponsor_InitialLogin)},clearLoginCookies:function(){this.clearCookie(this.cookie_School_SelectedOPID),this.clearCookie(this.cookie_School_SelectedSTATE),this.clearCookie(this.cookie_School_SelectedSCHOOL),this.clearCookie(this.cookie_School_SelectedSCHOOLIsTaxIncluded),this.clearCookie(this.cookie_School_SelectedSellerArray),this.clearCookie(this.cookie_School_SelectedMagazineItemArray),this.clearCookie(this.cookie_School_SelectedMagazineArray),this.clearCookie(this.cookie_BelieveUserProfileType),this.clearCookie(this.cookie_IsUserLoggedIn),this.clearCookie(this.cookie_Parent_Sponsor_InitialLogin),this.clearCookie(this.cookie_FB_AccessToken),this.clearCookie("ClaimingPrize")},clearCookie:function(name){$("#"+name).val(""),$.ajax({async:!0,type:"POST",url:"/DesktopModules/Believe.DotNetNuke.Modules.BelieveKids/API/ShopBelieveSession/RemoveValue",data:{SessionGuid:Module_CookieHelper.get("BKSessionGuid"),Key:name,Value:""},dataType:"json"})},getCookie:function(name){return Module_CookieHelper.get(name)},setCookie:function(name,value){Module_CookieHelper.set(name,value)},get:function(name){try{var cookie=$("#"+name).val();return void 0==cookie?"":JSON.parse(cookie)}catch(e){return""}},set:function(name,value){void 0!=name&&(void 0==value&&(value=""),$("#"+name).val(JSON.stringify(this.removeEmptyElements(value))),$.ajax({async:!1,type:"POST",url:"/DesktopModules/Believe.DotNetNuke.Modules.BelieveKids/API/ShopBelieveSession/SetValue",data:{SessionGuid:Module_CookieHelper.get("BKSessionGuid"),Key:name,Value:$("#"+name).val()},dataType:"json"}))},isStringJSON:function(jsonString){try{var o=JSON.parse(jsonString);if(o&&"object"==typeof o&&null!==o)return!0}catch(e){return!1}return!1},removeEmptyElements:function(arr){if(arr&&"object"==typeof arr&&null!==arr){var result=[];return $.each(arr,function(index,value){void 0!=value&&result.push(value)}),result}return arr},students:[],getStudentFromCookieArrayByID:function(sid){this.students=this.getCookieStudentArray();var index=this.findIndexOfStudentByID(sid);return index!=-1?this.students[index]:void 0},getStudentFromCookieArray:function(firstname,lastname,parentEmail){this.students=this.getCookieStudentArray();var index=this.findIndexOfStudent(firstname,lastname,parentEmail);return index!=-1?this.students[index]:void 0},findIndexOfStudentByID:function(sid){this.students=this.getCookieStudentArray();var result=-1;return $.each(this.students,function(index,v){if(v.StudentID==sid)return void(result=index)}),result},findIndexOfStudent:function(firstname,lastname,parentEmail){this.students=this.getCookieStudentArray();var result=-1;return $.each(this.students,function(index,v){if(void 0!=parentEmail&&parentEmail.length>0){if(v.FirstName==firstname&&v.LastName==lastname&&v.ParentsEmailAddress==parentEmail)return void(result=index)}else if(v.FirstName==firstname&&v.LastName==lastname)return void(result=index)}),result},addCookieStudentArray:function(firstname,lastname,parentEmail,points,opid,schoolName,studentid,isschooltaxed,schoolState,leaderName,grade){return this.students=this.getCookieStudentArray(),void 0==leaderName&&(leaderName=""),void 0==grade&&(grade=""),void 0!=isschooltaxed&&""!=isschooltaxed||(isschooltaxed="False"),this.students.push({StudentID:-1,OPID:opid,ParentsDnnUserID:-1,StudentID:studentid,FirstName:firstname,LastName:lastname,ParentsEmailAddress:parentEmail,TotalPrizeCredits:points,LeaderName:leaderName,Grade:grade,FundraiserInfo:{AccountNumber:"",OPID:opid,School_Name:schoolName,StartDate:"1/1/0001",EndDate:"1/1/0001",IsTaxIncludedSchool:isschooltaxed,City:"",State:schoolState,ZipCode:""}}),this.setCookie(this.cookie_School_SelectedSellerArray,this.students),this.students[this.students.length-1]},updateStudentPoints:function(firstName,lastName,parentEmail,pointsToAdd){var student=this.getStudentFromCookieArray(firstName,lastName,parentEmail);void 0!=student&&""!==student&&$.isNumeric(pointsToAdd)&&(student.TotalPrizeCredits=parseInt(student.TotalPrizeCredits)+parseInt(pointsToAdd),this.setCookie(this.cookie_School_SelectedSellerArray,this.students))},removeStudentFromCookieArray:function(firstname,lastname,parentEmail){this.students=this.getCookieStudentArray();var result=this.findIndexOfStudent(firstname,lastname,parentEmail);result!=-1&&(delete this.students[result],this.setCookie(this.cookie_School_SelectedSellerArray,this.students))},getCookieStudentArray:function(){return this.students=this.getCookie(this.cookie_School_SelectedSellerArray),void 0!=this.students&&"string"!=typeof this.students||(this.students=[]),this.students},magazineAddresses:[],addCookieMagazineArray:function(itemcode,firstname,lastname,address1,address2,city,state,zip,opid){this.magazineAddresses=this.getCookieMagazineAddressesArray(),this.magazineAddresses.push({ItemCode:itemcode,FirstName:firstname,LastName:lastname,Address1:address1,Address2:address2,City:city,State:state,Zip:zip,OPID:opid,OrderBvin:"",DNNUserID:-1}),this.setCookie(Module_CookieHelper.cookie_School_SelectedMagazineArray,this.magazineAddresses)},findIndexOfMagazineAddress:function(itemcode,firstname,lastname){this.magazineAddresses=this.getCookieMagazineAddressesArray();var result=-1;return $.each(this.magazineAddresses,function(index,v){if(v.ItemCode==itemcode&&v.FirstName==firstname&&v.LastName==lastname)return void(result=index)}),result},removeMagazineFromCookieArray:function(itemcode,firstname,lastname){this.magazineAddresses=this.getCookieMagazineAddressesArray();var index=this.findIndexOfMagazineAddress(itemcode,firstname,lastname);return index!=-1&&(delete this.magazineAddresses[index],this.setCookie(Module_CookieHelper.cookie_School_SelectedMagazineArray,this.magazineAddresses),!0)},getCookieMagazineAddressesArray:function(){return this.magazineAddresses=this.getCookie(this.cookie_School_SelectedMagazineArray),void 0!=this.magazineAddresses&&"string"!=typeof this.magazineAddresses||(this.magazineAddresses=[]),this.magazineAddresses},magazineItems:[],addCookieMagazineItemCodeArray:function(itemcode,qty){this.magazineItems=this.getCookieMagazineItemCodeArray(),this.magazineItems.push({itemCode:itemcode,qty:qty}),this.setCookie(Module_CookieHelper.cookie_School_SelectedMagazineItemArray,this.magazineItems)},findIndexOfMagazineItem:function(itemcode,qty){this.magazineItems=this.getCookieMagazineItemCodeArray();var result=-1;return $.each(this.magazineItems,function(index,v){if(v.itemCode==itemcode&&v.qty==qty)return void(result=index)}),result},removeMagazineItemCodeArray:function(itemcode,qty){this.magazineItems=this.getCookieMagazineItemCodeArray();var index=this.findIndexOfMagazineItem(itemcode,qty);return index!=-1&&(delete this.magazineItems[index],this.setCookie(Module_CookieHelper.cookie_School_SelectedMagazineItemArray,this.magazineItems),!0)},getCookieMagazineItemCodeArray:function(){return this.magazineItems=this.getCookie(this.cookie_School_SelectedMagazineItemArray),void 0!=this.magazineItems&&"string"!=typeof this.magazineItems||(this.magazineItems=[]),this.magazineItems},sortByName:function(a,b){var aName=a.firstName.toLowerCase(),bName=b.firstName.toLowerCase();return aName<bName?-1:aName>bName?1:0}};