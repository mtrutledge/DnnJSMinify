Type.registerNamespace("dnn.controls"),dnn.controls.triStateManager=function(images,toolTips){function updateState(hidden){var $hdn=jQuery(hidden),state=hidden.value,$collection=$hdn.parent().parent().find("td input.tristate");if($hdn.hasClass("fullControl"))$collection.each(function(index,elem){var $elem=jQuery(elem);$elem.hasClass("lockedPerm")||(elem.value=hidden.value,updateImage($elem,state))});else{if(updateImage($hdn,state),$hdn.hasClass("view")){if("False"===state){var $notView=$collection.not("input.view").not("input.navigate").not("input.browse");$notView.each(function(index,elem){var $elem=jQuery(elem);$elem.hasClass("lockedPerm")||(elem.value=state,updateImage($elem,state))})}}else if("True"===state&&!$hdn.hasClass("navigate")&&!$hdn.hasClass("browse")){var $view=$collection.filter("input.view");$view.each(function(index,elem){var $elem=jQuery(elem);$elem.hasClass("lockedPerm")||(elem.value=state,updateImage($elem,state))})}var $fullControl=$hdn.parent().parent().find("td input.fullControl");if($fullControl.length>0){var fullControl=$fullControl[0],$notFullControl=$collection.not("input.fullControl"),colstate=state,setFullControl=!0;$notFullControl.each(function(index,elem){if(colstate!=elem.value)return void(setFullControl=!1)}),setFullControl?fullControl.value=state:fullControl.value="Null",updateImage($fullControl,fullControl.value)}}dnn.controls.triStateManager.updateAdvancedState&&"function"==typeof dnn.controls.triStateManager.updateAdvancedState&&dnn.controls.triStateManager.updateAdvancedState.call($hdn,state,function(h,s){updateImage(h,s)})}function updateImage($hdn,state){var img=$hdn.siblings("img")[0];img.src=images[state],img.alt=toolTips[state]}var that;return that={initControl:function(hidden){var $hdn=jQuery(hidden);$hdn.hasClass("lockedPerm")||($hdn.hasClass("noDenyPerm")?$hdn.siblings("img").click(function(){"True"===hidden.value?hidden.value="Null":hidden.value="True",updateState(hidden)}):$hdn.siblings("img").click(function(){"True"===hidden.value?hidden.value="False":"False"===hidden.value?hidden.value="Null":hidden.value="True",updateState(hidden)}))}}};