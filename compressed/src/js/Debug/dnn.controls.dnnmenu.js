Type.registerNamespace("dnn.controls"),dnn.extend(dnn.controls,{initMenu:function(ctl){if(ctl){var menu=new dnn.controls.DNNMenu(ctl);return menu.initialize(),menu}}}),dnn.controls.DNNMenu=function(o){dnn.controls.DNNMenu.initializeBase(this,[o]),this.rootNode=null,this.nodes=[],this._loadNodes(),this.mbcss=this.getProp("mbcss",""),this.mcss=this.getProp("mcss",""),this.css=this.getProp("css",""),this.cssChild=this.getProp("csschild",""),this.cssHover=this.getProp("csshover",""),this.cssSel=this.getProp("csssel",""),this.cssIcon=this.getProp("cssicon",""),this.sysImgPath=this.getProp("sysimgpath","images/"),this.imagePaths=this.getProp("imagepaths","").split(","),this.imageList=this.getProp("imagelist","").split(",");for(var i=0;i<this.imageList.length;i++){var index=this.imageList[i].indexOf("]");index>-1&&(this.imageList[i]=this.imagePaths[this.imageList[i].substring(1,index)]+this.imageList[i].substring(index+1))}this.urlList=this.getProp("urllist","").split(","),this.workImg=this.getProp("workimg","dnnanim.gif"),this.rootArrow=this.getProp("rarrowimg",""),this.childArrow=this.getProp("carrowimg",""),this.target=this.getProp("target",""),this.defaultJS=this.getProp("js",""),this.postBack=this.getProp("postback",""),this.callBack=this.getProp("callback",""),this.callBackStatFunc=this.getProp("callbacksf",""),this.callBackStatFunc.length>0&&this.add_handler("callBackStatus",eval(this.callBackStatFunc)),this.orient=new Number(this.getProp("orient",dnn.controls.orient.horizontal)),this.suborient=new Number(this.getProp("suborient",dnn.controls.orient.vertical)),this.openMenus=[],this.moutDelay=this.getProp("moutdelay",500),this.minDelay=new Number(this.getProp("mindelay",250)),this.renderMode=new Number(this.getProp("rmode",0)),this.useTables=this.renderMode==dnn.controls.menuRenderMode.normal,this.enablePostbackState="1"==this.getProp("enablepbstate","0"),this.podInProgress=!1,this.keyboardAccess="1"==this.getProp("kbaccess","1"),this.hoverMNode=null,this.selMNode=null,this.animation=new Number(this.getProp("anim","0")),this.easingType=new Number(this.getProp("easeType","3")),this.easingDir=new Number(this.getProp("easeDir","1")),this.animationLen=new Number(this.getProp("animLen","1")),this.animationInterval=new Number(this.getProp("animInt","10")),this._attachedHandlers=[],this._onsubmitDelegate=null,this._hideMenusDelegate=null,this._expandNodeDelegate=null},dnn.controls.DNNMenu.prototype={initialize:function(){dnn.controls.DNNMenu.callBaseMethod(this,"initialize"),this.keyboardAccess&&this._setupKeyHandling(),this.generateMenuHTML(),this.enablePostbackState&&(this._onsubmitDelegate=Function.createDelegate(this,this._onsubmit),dnn.controls.submitComp.add_handler(this._onsubmitDelegate)),this._hideMenusDelegate=dnn.createDelegate(this,this.hideMenus),this._expandNodeDelegate=dnn.createDelegate(this,this.__expandNode)},generateMenuHTML:function(){this.container.className=this.mbcss,dnn.dom.disableTextSelect(this.container);for(var i=0;i<this.rootNode.childNodeCount();i++)this.renderNode(this.rootNode.childNodes(i),this.container);this.addHandlers(document.body,{click:this._bodyClick},this),dnn.setVar(this.ns+"_json","")},renderNode:function(node,ctr){var mNode=new dnn.controls.DNNMenuNode(node);mNode.selected&&(this.selMNode=mNode);var menuBuilder=this._getMenuBuilder(mNode,ctr);if(0==menuBuilder.alreadyRendered){this.isNodeVertical(mNode)&&menuBuilder.newRow(),menuBuilder.newCont(),mNode.lhtml.length>0&&menuBuilder.appendChild(this.renderCustomHTML(mNode.lhtml));var icon=this.renderIcon(mNode);menuBuilder.appendChild(icon),0==this.useTables||0==mNode.level?icon.className="icn "+(mNode.cssIcon.length>0?mNode.cssIcon:this.cssIcon):menuBuilder.subcont.className="icn "+(mNode.cssIcon.length>0?mNode.cssIcon:this.cssIcon),0==mNode.isBreak&&menuBuilder.appendChild(this.renderText(mNode),!0),menuBuilder.newCell(),this.renderArrow(mNode,menuBuilder.subcont),mNode.rhtml.length>0&&menuBuilder.appendChild(this.renderCustomHTML(mNode.rhtml)),mNode.toolTip.length>0&&(menuBuilder.row.title=mNode.toolTip)}if(this.assignCss(mNode),mNode.enabled&&this.addHandlers(menuBuilder.row,{click:this._nodeTextClick},this),"mouseover"!=this._attachedHandlers[menuBuilder.container.id]&&(this._attachedHandlers[menuBuilder.container.id]="mouseover",this.addHandlers(menuBuilder.container,{mouseover:this._nodeMOver,mouseout:this._nodeMOut},this)),mNode.hasNodes||mNode.hasPendingNodes){var subMenu=this.renderSubMenu(mNode);this.container.appendChild(subMenu),dnn.dom.positioning.placeOnTop(subMenu,!1,this.sysImgPath+"spacer.gif");for(var i=0;i<node.childNodeCount();i++)this.renderNode(node.childNodes(i),subMenu)}},renderCustomHTML:function(sHTML){var ctl=dnn.dom.createElement("span");return ctl.innerHTML=sHTML,ctl},renderIcon:function(mNode){var ctl=dnn.dom.createElement("span");if(mNode.imageIndex>-1||""!=mNode.image){var img=this.createChildControl("img",mNode.id,"icn");img.src=mNode.image.length>0?mNode.image:this.imageList[mNode.imageIndex],ctl.appendChild(img)}return ctl},renderArrow:function(mNode,ctr){if(mNode.hasNodes||mNode.hasPendingNodes){var imgSrc=0==mNode.level?this.rootArrow:this.childArrow;if(imgSrc.trim().length>0)if(this.useTables&&mNode.level>0){var img=dnn.dom.createElement("img");img.src=imgSrc,ctr.appendChild(img)}else ctr.style.backgroundImage="url("+imgSrc+")",ctr.style.backgroundRepeat="no-repeat",ctr.style.backgroundPosition="right"}},renderText:function(mNode){var ctl=this.createChildControl("span",mNode.id,"t");return ctl.className="txt",ctl.innerHTML=mNode.text,ctl.style.cursor="pointer",ctl},renderSubMenu:function(mNode){var menuBuilder=this._getMenuBuilder(mNode,null),subMenu=menuBuilder.createSubMenu();subMenu.style.position="absolute",subMenu.style.display="none";var css=this.mcss;return css+=" m m"+mNode.level,css+=" mid"+mNode.id,subMenu.className=css,subMenu},_getMenuBuilder:function(mNode,ctr){var menuBuilder;return menuBuilder=ctr?this.renderMode==dnn.controls.menuRenderMode.normal&&mNode.level>0&&this.isNodeVertical(mNode)?new dnn.controls.DNNMenuTableBuilder(this,mNode,ctr):this.renderMode==dnn.controls.menuRenderMode.unorderdlist?new dnn.controls.DNNMenuListBuilder(this,mNode,ctr):new dnn.controls.DNNMenuBuilder(this,mNode,ctr):this.renderMode==dnn.controls.menuRenderMode.normal&&this.suborient==dnn.controls.orient.vertical?new dnn.controls.DNNMenuTableBuilder(this,mNode):this.renderMode==dnn.controls.menuRenderMode.unorderdlist?new dnn.controls.DNNMenuListBuilder(this,mNode):new dnn.controls.DNNMenuBuilder(this,mNode)},hoverNode:function(mNode){null!=this.hoverMNode&&(this.hoverMNode.hover=!1,this.assignCss(this.hoverMNode)),null!=mNode&&(mNode.hover=!0,this.assignCss(mNode)),this.hoverMNode=mNode},__expandNode:function(ctx){this.expandNode(ctx,!0)},expandNode:function(mNode,force){if(dnn.cancelDelay(this.ns+"min"),mNode.hasPendingNodes)0==this.podInProgress&&(this.podInProgress=!0,this.showWorkImage(mNode,!0),mNode.menu=this,this.callBack.indexOf("[NODEXML]")>-1?eval(this.callBack.replace("[NODEXML]",dnn.escapeForEval(mNode.node.getXml()))):eval(this.callBack.replace("[NODEID]",mNode.id)));else{if(this.openMenus.length>0&&this.openMenus[this.openMenus.length-1].id==mNode.id)return;if(0==this.minDelay||force){this.hideMenus(new dnn.controls.DNNMenuNode(mNode.node.parentNode()));var subMenu=this.getChildControl(mNode.id,"sub");null!=subMenu&&(this.positionMenu(mNode,subMenu),this.showSubMenu(subMenu,!0,mNode),this.openMenus[this.openMenus.length]=mNode,mNode.expanded=!0,mNode.update())}else dnn.doDelay(this.ns+"min",this.minDelay,this._expandNodeDelegate,mNode)}return!0},showSubMenu:function(subMenu,show,mNode){if(dnn.dom.positioning.placeOnTop(subMenu,show,this.sysImgPath+"spacer.gif"),subMenu.style.clip="rect(auto,auto,auto,auto)",0!=this.animation){subMenu.style.display="";var dir;dir=this.isNodeVertical(mNode)?show?dnn.motion.animationDir.Right:dnn.motion.animationDir.Left:show?dnn.motion.animationDir.Down:dnn.motion.animationDir.Up,dnn.dom.animate(subMenu,this.animation,dir,this.easingType,this.easingDir,this.animationLen,this.animationInterval)}else subMenu.style.display=show?"":"none"},showWorkImage:function(mNode,show){if(null!=this.workImg){var icon=this.getChildControl(mNode.id,"icn");null!=icon&&(show?icon.src=this.sysImgPath+this.workImg:icon.src=mNode.image.length>0?mNode.image:this.imageList[mNode.imageIndex])}},isNodeVertical:function(mNode){return 0==mNode.level&&this.orient==dnn.controls.orient.vertical||mNode.level>0&&this.suborient==dnn.controls.orient.vertical},hideMenus:function(mNode){for(var i=this.openMenus.length-1;i>=0&&(null==mNode||this.openMenus[i].id!=mNode.id);i--)this.collapseNode(this.openMenus[i]),this.openMenus.length=this.openMenus.length-1},collapseNode:function(mNode){var subMenu=this.getChildControl(mNode.id,"sub");if(null!=subMenu)return this.positionMenu(mNode,subMenu),this.showSubMenu(subMenu,!1,mNode),mNode.expanded=null,mNode.update(),!0},positionMenu:function(mNode,menu){var oPCtl=this.getChildControl(mNode.id,"ctr");dnn.dom.browser.isType(dnn.dom.browser.Safari,dnn.dom.browser.Opera)&&"TR"==oPCtl.tagName&&oPCtl.childNodes.length>0&&(oPCtl=oPCtl.childNodes[oPCtl.childNodes.length-1]);var oPDims=new dnn.dom.positioning.dims(oPCtl),oMDims=new dnn.dom.positioning.dims(menu),iScrollLeft=dnn.dom.positioning.bodyScrollLeft(),iScrollTop=dnn.dom.positioning.bodyScrollTop(),iMaxTop=dnn.dom.positioning.viewPortHeight()+iScrollTop-oPDims.rot,iMaxLeft=dnn.dom.positioning.viewPortWidth()+iScrollLeft-oPDims.rol,iNewTop=oPDims.t,iNewLeft=oPDims.l,iStartTop=oPDims.t,iStartLeft=oPDims.l;if(this.isNodeVertical(mNode)?(iNewLeft=oPDims.l+oPDims.w,iStartTop=iMaxTop):(iNewTop=oPDims.t+oPDims.h,iStartLeft=iMaxLeft),iNewTop+oMDims.h>=iMaxTop&&oPDims.rot+iStartTop-oMDims.h>iScrollTop&&(iNewTop=iStartTop-oMDims.h),iNewLeft+oMDims.w>iMaxLeft&&oPDims.rol+iStartLeft-oMDims.w>iScrollLeft&&(iNewLeft=iStartLeft-oMDims.w),this.suborient==dnn.controls.orient.horizontal&&0==this.isNodeVertical(mNode)){var oRDims=new dnn.dom.positioning.dims(this.container);iNewLeft=oRDims.l}menu.style.top=iNewTop+"px",menu.style.left=iNewLeft+"px"},selectNode:function(mNode){var arg=new dnn.controls.DNNNodeEventArgs(mNode);if(this.invoke_handler("click",arg),!arg.get_cancel()){if(null!=this.selMNode&&(this.selMNode.selected=null,this.selMNode.update("selected"),this.assignCss(this.selMNode)),mNode.selected=!0,mNode.update("selected"),this.assignCss(mNode),this.selMNode=mNode,(mNode.hasNodes||mNode.hasPendingNodes)&&this.expandNode(mNode,!0),mNode.selected){var sJS=this.defaultJS;if(mNode.js.length>0&&(sJS=mNode.js),sJS.length>0&&(this.update(!0),0==eval(sJS)))return;mNode.clickAction==dnn.controls.action.postback?(this.update(!0),eval(this.postBack.replace("[NODEID]",mNode.id))):mNode.clickAction==dnn.controls.action.nav&&dnn.dom.navigate(mNode.getUrl(this),mNode.target.length>0?mNode.target:this.target)}return!0}},assignCss:function(mNode){var ctr=this.getChildControl(mNode.id,"ctr"),css=this.css;mNode.level>0&&this.cssChild.length>0&&(css=this.cssChild),mNode.css.length>0&&(css=mNode.css),mNode.hover&&(css+=" hov "+(mNode.cssHover.length>0?mNode.cssHover:this.cssHover)),mNode.selected&&(css+=" sel "+(mNode.cssSel.length>0?mNode.cssSel:this.cssSel)),mNode.breadcrumb&&(css+=" bc"),mNode.isBreak&&(css+=" break"),css+=" mi mi"+mNode.node.getNodePath(),css+=" id"+mNode.id,0==mNode.level&&(css+=" root"),0==mNode.node.getNodeIndex()&&(css+=" first"),mNode.node.getNodeIndex()==mNode.node.parentNode().childNodeCount()-1&&(css+=" last"),0==mNode.node.getNodeIndex()&&mNode.node.getNodeIndex()==mNode.node.parentNode().childNodeCount()-1&&(css+=" firstlast"),ctr.className=css},update:function(){dnn.setVar(this.ns+"_json",this.rootNode.getJSON())},_onsubmit:function(){this.update(!0)},_bodyClick:function(){this.hideMenus()},focusHandler:function(e){var mNode=this.hoverMNode;null==mNode&&(mNode=this.selMNode),null==mNode&&(mNode=new dnn.controls.DNNMenuNode(this.nodes[0])),this.hoverNode(mNode),this.container.onfocus=null},blurHandler:function(e){null!=this.hoverMNode&&this.hoverNode(null),dnn.cancelDelay(this.ns+"min"),this.moutDelay>0?dnn.doDelay(this.ns+"mout",this.moutDelay,this._hideMenusDelegate):this.hideMenus()},safariKeyHandler:function(e){if(e.charCode==KEY_RETURN)return null!=this.hoverMNode&&this.hoverMNode.enabled&&this.selectNode(this.hoverMNode),!1},keyboardHandler:function(e){var code=e.keyCode;if(null==code&&(code=e.charCode),code==KEY_RETURN)return null!=this.hoverMNode&&this.hoverMNode.enabled&&this.selectNode(this.hoverMNode),!1;if(code==KEY_ESCAPE)return this.blurHandler(),!1;if(code>=KEY_LEFT_ARROW&&code<=KEY_DOWN_ARROW){var oNewMNode,iDir=code==KEY_UP_ARROW||code==KEY_LEFT_ARROW?-1:1,sAxis=code==KEY_UP_ARROW||code==KEY_DOWN_ARROW?"y":"x",mNode=this.hoverMNode;null==mNode&&(mNode=new dnn.controls.DNNMenuNode(this.nodes[0]));var bHor=!this.isNodeVertical(mNode);if("y"==sAxis&&!bHor||bHor&&"x"==sAxis)this.hideMenus(new dnn.controls.DNNMenuNode(mNode.node.parentNode())),oNewMNode=this.__getNextNode(mNode,iDir);else if(iDir==-1)oNewMNode=new dnn.controls.DNNMenuNode(mNode.node.parentNode()),0==oNewMNode.level&&this.orient==dnn.controls.orient.horizontal&&(oNewMNode=this.__getNextNode(new dnn.controls.DNNMenuNode(mNode.node.parentNode()),iDir)),this.hideMenus(oNewMNode);else if(1==iDir)if(mNode.hasNodes||mNode.hasPendingNodes)1!=mNode.expanded&&(this.expandNode(mNode),0==this.podInProgress&&(oNewMNode=new dnn.controls.DNNMenuNode(mNode.node.nodes[0])));else{for(var node=mNode.node;"root"!=node.parentNode().nodeName();)node=node.parentNode();oNewMNode=new dnn.controls.DNNMenuNode(node),oNewMNode=this.__getNextNode(oNewMNode,iDir),this.hideMenus(new dnn.controls.DNNMenuNode(oNewMNode.node.parentNode()))}return null!=oNewMNode&&"root"!=oNewMNode.node.nodeName()&&this.hoverNode(oNewMNode),!1}},dispose:function(){this._onsubmitDelegate=null,this._hideMenusDelegate=null,this._expandNodeDelegate=null,dnn.controls.DNNMenu.callBaseMethod(this,"dispose")},__getNextNode:function(mNode,iDir){var node,parentNode=mNode.node.parentNode(),nodeIndex=mNode.node.getNodeIndex("id");node=nodeIndex+iDir<0?parentNode.nodes[parentNode.childNodeCount()-1]:nodeIndex+iDir>parentNode.childNodeCount()-1?parentNode.nodes[0]:parentNode.nodes[nodeIndex+iDir];var oRetNode=new dnn.controls.DNNMenuNode(node);return oRetNode.isBreak?(nodeIndex+=iDir,node=nodeIndex+iDir<0?parentNode.childNodes(parentNode.childNodeCount()-1):nodeIndex+iDir>parentNode.childNodeCount()-1?parentNode.childNodes(0):parentNode.childNodes(nodeIndex+iDir),new dnn.controls.DNNMenuNode(node)):oRetNode},callBackFail:function(result,ctx,req){var mNode=ctx,menu=mNode.menu;menu.invoke_handler("callBackFail",new dnn.controls.DNNCallbackEventArgs(result,ctx,req))},callBackStatus:function(result,ctx,req){var mNode=ctx,menu=mNode.menu;menu.invoke_compatHandler("callBackStatus",result,ctx,req)},callBackSuccess:function(result,ctx,req){var mNode=ctx,node=mNode.node,menu=mNode.menu;menu.showWorkImage(mNode,!1);var json=dnn.evalJSON("{"+result+"}");node.nodes=json.nodes,node.setupJSONNodes(node.rootNode(),node,node.nodes);for(var subMenu=menu.getChildControl(mNode.id,"sub"),i=0;i<node.childNodeCount();i++)menu.renderNode(node.childNodes(i),subMenu);mNode=new dnn.controls.DNNMenuNode(node),mNode.hasPendingNodes=!1,mNode.hasNodes=!0,subMenu=menu.getChildControl(mNode.id,"sub"),menu.expandNode(mNode),menu.callBackStatus(result,ctx,req),menu.podInProgress=!1,menu.invoke_handler("callBackSuccess",new dnn.controls.DNNCallbackEventArgs(result,ctx,req))},_nodeTextClick:function(evt){var mNode,node=this._findEventNode(evt);null!=node&&(mNode=new dnn.controls.DNNMenuNode(node),this.selectNode(mNode)),evt.stopPropagation()},_menuMOver:function(evt,element){dnn.cancelDelay(this.ns+"mout")},_menuMOut:function(evt,element){dnn.cancelDelay(this.ns+"min"),this.moutDelay>0?dnn.doDelay(this.ns+"mout",this.moutDelay,dnn.createDelegate(this,this.hideMenus)):this.hideMenus()},_nodeMOver:function(evt,element){var node=this._findEventNode(evt);if(null!=node){var mNode=new dnn.controls.DNNMenuNode(node);mNode.hover=!0,this.assignCss(mNode),1!=mNode.expanded&&this.expandNode(mNode),evt.stopPropagation()}this._menuMOver(evt,element)},_nodeMOut:function(evt,element){var node=this._findEventNode(evt);if(null!=node){var mNode=new dnn.controls.DNNMenuNode(node);this.assignCss(mNode),this._menuMOut(evt,element),evt.stopPropagation()}},getXml:function(){return this.rootNode.getXml()},_findEventNode:function(evt){if(dnn.dom.isNonTextNode(evt.target))return this.rootNode.findNode(this.getChildControlBaseId(evt.target))},_loadNodes:function(){var json=dnn.evalJSON(dnn.getVar(this.ns+"_json"));json&&(this.nodes=json.nodes,this.rootNode={},this.rootNode.nodes=this.nodes,this.rootNode.id=this.ns,this.rootNode=new dnn.controls.JSONNode(this.rootNode,"root",0))},_setupKeyHandling:function(){if(this.container.tabIndex<=0)this.container.tabIndex=0,this.addHandlers(this.container,{keydown:this.keyboardHandler,focus:this.focusHandler,blur:this.blurHandler},this);else{var txt=document.createElement("input");txt.type="text",txt.style.width=0,txt.style.height=0,txt.style.background="transparent",txt.style.border=0,txt.style.positioning="absolute",dnn.dom.browser.isType(dnn.dom.browser.Safari)?(txt.style.width="1px",txt.style.height="1px",txt.style.left="-999em",this.addHandlers(txt,{keydown:this.keyboardHandler},this),this.addHandlers(this.container.parentNode,{keypress:this.safariKeyHandler},this)):this.addHandlers(txt,{keypress:this.keyboardHandler},this),this.addHandlers(txt,{focus:this.focusHandler,blur:this.blurHandler},this),this.container.parentNode.appendChild(txt)}}},dnn.controls.DNNMenu.registerClass("dnn.controls.DNNMenu",dnn.controls.control),dnn.controls.DNNMenuBuilder=function(menu,mNode,ctr){this.menu=menu,this.mNode=mNode,this.isVertical=menu.isNodeVertical(mNode),this.container=ctr,this.row=null,this.subcont=null,this.alreadyRendered=!1},dnn.controls.DNNMenuBuilder.prototype={appendChild:function(ctl,isNewCell){this.subcont.appendChild(ctl)},newCell:function(){},newCont:function(){this.isVertical?this.row=this.menu.createChildControl("div",this.mNode.id,"ctr"):this.row=this.menu.createChildControl("span",this.mNode.id,"ctr"),this.subcont=this.row,this.container.appendChild(this.subcont)},newRow:function(){},createSubMenu:function(){return this.menu.createChildControl("DIV",this.mNode.id,"sub")}},dnn.controls.DNNMenuBuilder.registerClass("dnn.controls.DNNMenuBuilder"),dnn.controls.DNNMenuTableBuilder=function(menu,node,cont){dnn.controls.DNNMenuTableBuilder.initializeBase(this,[menu,node,cont])},dnn.controls.DNNMenuTableBuilder.prototype={appendChild:function(ctl,isNewCell){isNewCell&&this.newCell(),this.subcont.appendChild(ctl)},newCont:function(){this.subcont=this.newCell()},newCell:function(){var td=dnn.dom.createElement("td");return this.row.appendChild(td),this.subcont=td,td},newRow:function(){this.row=this.menu.createChildControl("tr",this.mNode.id,"ctr");var tb=dnn.dom.getByTagName("TBODY",this.container);tb[0].appendChild(this.row)},createSubMenu:function(){var subMenu=this.menu.createChildControl("table",this.mNode.id,"sub");return subMenu.border=0,subMenu.cellPadding=0,subMenu.cellSpacing=0,subMenu.appendChild(dnn.dom.createElement("tbody")),subMenu}},dnn.controls.DNNMenuTableBuilder.registerClass("dnn.controls.DNNMenuTableBuilder",dnn.controls.DNNMenuBuilder),dnn.controls.DNNMenuListBuilder=function(menu,node,cont){dnn.controls.DNNMenuListBuilder.initializeBase(this,[menu,node,cont]),this.alreadyRendered=!0,this.row=dnn.dom.getById(this.menu.getChildControlId(this.mNode.id,"ctr"),this.menu.container),this.menu.registerChildControl(this.row,this.mNode.id),this._setStyles(this.row),this.subcont=this.row,this.subMenu=dnn.dom.getById(this.menu.getChildControlId(this.mNode.id,"sub"),this.menu.container),this.subMenu&&(this.menu.registerChildControl(this.subMenu,this.mNode.id),this._setStyles(this.subMenu))},dnn.controls.DNNMenuListBuilder.prototype={appendChild:function(ctl,isNewCell){},newCont:function(){},createSubMenu:function(){return this.subMenu},_setStyles:function(ctl){0==this.menu.isNodeVertical(this.mNode)&&(ctl.style.display="inline"),ctl.style.listStyle="none"}},dnn.controls.DNNMenuListBuilder.registerClass("dnn.controls.DNNMenuListBuilder",dnn.controls.DNNMenuBuilder),dnn.controls.DNNMenuNode=function(node){dnn.controls.DNNMenuNode.initializeBase(this,[node]),this._addAbbr({breadcrumb:"bcrumb",clickAction:"ca",imageIndex:"iIdx",urlIndex:"uIdx"}),this.hover=!1,this.expanded=null,this.selected="1"==node.getAttribute("selected","0")||null,this.breadcrumb="1"==node.getAttribute("bcrumb","0")||null,this.clickAction=node.getAttribute("ca",dnn.controls.action.postback),this.imageIndex=new Number(node.getAttribute("iIdx","-1")),this.urlIndex=new Number(node.getAttribute("uIdx","-1")),this.lhtml=node.getAttribute("lhtml",""),this.rhtml=node.getAttribute("rhtml","")},dnn.controls.DNNMenuNode.prototype={childNodes:function(iIndex){if(null!=this.node.nodes(iIndex))return new dnn.controls.DNNMenuNode(this.node.nodes(iIndex))},getUrl:function(menu){return this.urlIndex>-1?menu.urlList[this.urlIndex]+this.url:this.url}},dnn.controls.DNNMenuNode.registerClass("dnn.controls.DNNMenuNode",dnn.controls.DNNNode),Type.registerNamespace("dnn.controls"),dnn.controls.menuRenderMode=function(){},dnn.controls.menuRenderMode.prototype={normal:0,notables:1,unorderdlist:2,downlevel:3},dnn.controls.menuRenderMode.registerEnum("dnn.controls.menuRenderMode");