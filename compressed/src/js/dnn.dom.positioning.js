Type.registerNamespace("dnn.dom.positioning"),dnn.extend(dnn.dom.positioning,{pns:"dnn.dom",ns:"positioning",dragCtr:null,dragCtrDims:null,bodyScrollLeft:function(){if(window.pageYOffset)return window.pageYOffset;var oBody=document.compatMode&&"BackCompat"!=document.compatMode?document.documentElement:document.body;return oBody.scrollLeft},bodyScrollTop:function(){if(window.pageXOffset)return window.pageXOffset;var oBody=document.compatMode&&"BackCompat"!=document.compatMode?document.documentElement:document.body;return oBody.scrollTop},viewPortHeight:function(){if(window.innerHeight)return window.innerHeight;var oBody=document.compatMode&&"BackCompat"!=document.compatMode?document.documentElement:document.body;return oBody.clientHeight},viewPortWidth:function(){if(window.innerWidth)return window.innerWidth;var oBody=document.compatMode&&"BackCompat"!=document.compatMode?document.documentElement:document.body;return oBody.clientWidth},dragContainer:function(oCtl,e){var iNewLeft=0,iNewTop=0,oCont=dnn.dom.getById(oCtl.contID),oTitle=dnn.dom.positioning.dragCtr,iScrollTop=this.bodyScrollTop(),iScrollLeft=this.bodyScrollLeft();null==oCtl.startLeft&&(oCtl.startLeft=e.clientX-this.elementLeft(oCont)+iScrollLeft),null==oCtl.startTop&&(oCtl.startTop=e.clientY-this.elementTop(oCont)+iScrollTop),"relative"==oCont.style.position&&(oCont.style.position="absolute"),iNewLeft=e.clientX-oCtl.startLeft+iScrollLeft,iNewTop=e.clientY-oCtl.startTop+iScrollTop,iNewLeft>this.elementWidth(document.forms[0])&&(iNewLeft=this.elementWidth(document.forms[0])),iNewTop>this.elementHeight(document.forms[0])&&(iNewTop=this.elementHeight(document.forms[0])),oCont.style.left=iNewLeft+"px",oCont.style.top=iNewTop+"px",null!=oTitle&&null!=oTitle.dragOver&&eval(oCtl.dragOver)},elementHeight:function(eSrc){return null==eSrc.offsetHeight||0==eSrc.offsetHeight?null==eSrc.offsetParent?0:null==eSrc.offsetParent.offsetHeight||0==eSrc.offsetParent.offsetHeight?null!=eSrc.offsetParent.offsetParent?eSrc.offsetParent.offsetParent.offsetHeight:0:eSrc.offsetParent.offsetHeight:eSrc.offsetHeight},elementLeft:function(eSrc){return this.elementPos(eSrc).l},elementOverlapScore:function(oDims1,oDims2){var iLeftScore=0,iTopScore=0;return oDims1.l<=oDims2.l&&oDims2.l<=oDims1.r&&(iLeftScore+=(oDims1.r<oDims2.r?oDims1.r:oDims2.r)-oDims2.l),oDims2.l<=oDims1.l&&oDims1.l<=oDims2.r&&(iLeftScore+=(oDims2.r<oDims1.r?oDims2.r:oDims1.r)-oDims1.l),oDims1.t<=oDims2.t&&oDims2.t<=oDims1.b&&(iTopScore+=(oDims1.b<oDims2.b?oDims1.b:oDims2.b)-oDims2.t),oDims2.t<=oDims1.t&&oDims1.t<=oDims2.b&&(iTopScore+=(oDims2.b<oDims1.b?oDims2.b:oDims1.b)-oDims1.t),iLeftScore*iTopScore},elementTop:function(eSrc){return this.elementPos(eSrc).t},elementPos:function(eSrc){var oPos=new Object;oPos.t=0,oPos.l=0,oPos.at=0,oPos.al=0;var style,eParent=eSrc,srcId=eSrc.id;for(null!=srcId&&0==srcId.length&&(srcId=null),"absolute"==eSrc.style.position&&(oPos.t=eParent.offsetTop,oPos.l=eParent.offsetLeft);null!=eParent&&(oPos.at+=eParent.offsetTop,oPos.al+=eParent.offsetLeft,"absolute"!=eSrc.style.position&&(style=eParent.currentStyle?eParent.currentStyle:Sys.UI.DomElement._getCurrentStyle(eParent),eParent.id!=srcId&&"relative"==style.position||(oPos.t+=eParent.offsetTop,oPos.l+=eParent.offsetLeft)),eParent=eParent.offsetParent,!(null==eParent||"BODY"==eParent.tagName.toUpperCase()&&dnn.dom.browser.isType(dnn.dom.browser.Konqueror))););return oPos},elementWidth:function(eSrc){return null==eSrc.offsetWidth||0==eSrc.offsetWidth?null==eSrc.offsetParent?0:null==eSrc.offsetParent.offsetWidth||0==eSrc.offsetParent.offsetWidth?null!=eSrc.offsetParent.offsetParent?eSrc.offsetParent.offsetParent.offsetWidth:0:eSrc.offsetParent.offsetWidth:eSrc.offsetWidth},enableDragAndDrop:function(oContainer,oTitle,sDragCompleteEvent,sDragOverEvent){return dnn.dom.addSafeHandler(document.body,"onmousemove",dnn.dom.positioning,"__dnn_bodyMouseMove"),dnn.dom.addSafeHandler(document.body,"onmouseup",dnn.dom.positioning,"__dnn_bodyMouseUp"),dnn.dom.addSafeHandler(oTitle,"onmousedown",dnn.dom.positioning,"__dnn_containerMouseDownDelay"),dnn.dom.browser.type==dnn.dom.browser.InternetExplorer?oTitle.style.cursor="hand":oTitle.style.cursor="pointer",0==oContainer.id.length&&(oContainer.id=oTitle.id+"__dnnCtr"),oTitle.contID=oContainer.id,null!=sDragCompleteEvent&&(oTitle.dragComplete=sDragCompleteEvent),null!=sDragOverEvent&&(oTitle.dragOver=sDragOverEvent),!0},placeOnTop:function(oCont,bShow,sSrc){if(!(dnn.dom.browser.isType(dnn.dom.browser.Opera,dnn.dom.browser.Mozilla,dnn.dom.browser.Netscape,dnn.dom.browser.Safari)||dnn.dom.browser.isType(dnn.dom.browser.InternetExplorer)&&dnn.dom.browser.version>=7)){var oIFR=dnn.dom.getById("ifr"+oCont.id);if(null==oIFR){var oIFR=document.createElement("iframe");oIFR.id="ifr"+oCont.id,null!=sSrc&&(oIFR.src=sSrc),oIFR.style.top="0px",oIFR.style.left="0px",oIFR.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity=0)",oIFR.scrolling="no",oIFR.frameBorder="no",oIFR.style.display="none",oIFR.style.position="absolute",oCont.parentNode.appendChild(oIFR)}var oDims=new dnn.dom.positioning.dims(oCont);oIFR.style.width=oDims.w,oIFR.style.height=oDims.h,oIFR.style.top=oDims.t+"px",oIFR.style.left=oDims.l+"px";var iIndex=dnn.dom.getCurrentStyle(oCont,"zIndex");(null==iIndex||0==iIndex||isNaN(iIndex))&&(iIndex=1),oCont.style.zIndex=iIndex,oIFR.style.zIndex=iIndex-1,bShow?oIFR.style.display="block":null!=oIFR&&(oIFR.style.display="none")}},__dnn_containerMouseDown:function(oCtl){for(;null==oCtl.contID;)if(oCtl=oCtl.parentNode,"BODY"==oCtl.tagName.toUpperCase())return;dnn.dom.positioning.dragCtr=oCtl,oCtl.startTop=null,oCtl.startLeft=null;var oCont=dnn.dom.getById(oCtl.contID);null!=oCont.style.position&&0!=oCont.style.position.length||(oCont.style.position="relative"),dnn.dom.positioning.dragCtrDims=new dnn.dom.positioning.dims(oCont),null==oCont.getAttribute("_b")&&(oCont.setAttribute("_b",oCont.style.backgroundColor),oCont.setAttribute("_z",oCont.style.zIndex),oCont.setAttribute("_w",oCont.style.width),oCont.setAttribute("_d",oCont.style.border),oCont.style.zIndex=9999,oCont.style.backgroundColor=DNN_HIGHLIGHT_COLOR,oCont.style.border="4px outset "+DNN_HIGHLIGHT_COLOR,oCont.style.width=dnn.dom.positioning.elementWidth(oCont),dnn.dom.browser.type==dnn.dom.browser.InternetExplorer&&(oCont.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity=80)"))},__dnn_containerMouseDownDelay:function(e){var oTitle=e.srcElement;null==oTitle&&(oTitle=e.target),dnn.doDelay("__dnn_dragdrop",500,this.__dnn_containerMouseDown,oTitle)},__dnn_bodyMouseUp:function(){dnn.cancelDelay("__dnn_dragdrop");var oCtl=dnn.dom.positioning.dragCtr;if(null!=oCtl&&null!=oCtl.dragComplete){eval(oCtl.dragComplete);var oCont=dnn.dom.getById(oCtl.contID);oCont.style.backgroundColor=oCont.getAttribute("_b"),oCont.style.zIndex=oCont.getAttribute("_z"),oCont.style.width=oCont.getAttribute("_w"),oCont.style.border=oCont.getAttribute("_d"),oCont.setAttribute("_b",null),oCont.setAttribute("_z",null),dnn.dom.browser.type==dnn.dom.browser.InternetExplorer&&(oCont.style.filter=null)}dnn.dom.positioning.dragCtr=null},__dnn_bodyMouseMove:function(e){null!=this.dragCtr&&this.dragContainer(this.dragCtr,e)}}),dnn.dom.positioning.dims=function(eSrc){var bHidden="none"==eSrc.style.display;bHidden&&(eSrc.style.display=""),this.w=dnn.dom.positioning.elementWidth(eSrc),this.h=dnn.dom.positioning.elementHeight(eSrc);var oPos=dnn.dom.positioning.elementPos(eSrc);this.t=oPos.t,this.l=oPos.l,this.at=oPos.at,this.al=oPos.al,this.rot=this.at-this.t,this.rol=this.al-this.l,this.r=this.l+this.w,this.b=this.t+this.h,bHidden&&(eSrc.style.display="none")},dnn.dom.positioning.dims.registerClass("dnn.dom.positioning.dims");