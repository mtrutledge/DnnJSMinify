Type.registerNamespace("dnn.controls"),dnn.controls.DNNToolBar=function(b,a){this.ctr=document.createElement("div"),this.ctr.id=b+"_tb",dnn.controls.DNNToolBar.initializeBase(this,[this.ctr]),this.initialize(a),this.css=null,this.cssButton=null,this.cssButtonHover=null,this.moutDelay=null,this.buttons=[],this.relatedCtl=null,this.ctr.style.position="relative",this.ctl=document.createElement("div"),this.ctr.appendChild(this.ctl),this.ctl.style.display="none",this.moutDelay=1e3,this._hideDelegate=dnn.createDelegate(this,this.hide),this.actionHandler=null},dnn.controls.DNNToolBar.prototype={loadDefinition:function(c,f,k,h,b,a){var e=dnn.controls.toolbars[f+":"+c];if(null==e&&(e=dnn.controls.toolbars[f+"$"+c]),null==e&&(e=dnn.controls.toolbars[c]),e){this.relatedCtl=k,this.css=e.css,this.cssButton=e.cssb,this.cssButtonHover=e.cssbh,this.actionHandler=a;for(var g=0;g<e.btns.length;g++){var d=e.btns[g];this.addButton(d.key,d.ca,d.css,d.cssh,d.img,d.txt,d.alt,d.js,d.url,!0)}if(e.mod&&(this.moutDelay=e.mod),b){var j=dnn.dom.getSibling(b,-1);null!=j&&3==j.nodeType&&(b=j),h.insertBefore(this.ctr,b)}else h.appendChild(this.ctr)}},addButton:function(i,d,g,h,f,j,a,c,b,e){null==i&&(i=this.buttons.length),this.cssButton&&(g=this.cssButton+" "+g),this.cssButtonHover&&(h=this.cssButtonHover+" "+h),this.buttons[i]=new dnn.controls.DNNToolBarButton(i,d,g,h,f,j,a,c,b,e,this)},refresh:function(){this.ctl.className=this.css;for(var b in this.buttons){var a=this.buttons[b];"function"!=typeof a&&(null==a.ctl&&(a.render(),this.ctl.appendChild(a.ctl)),a.ctl.style.display=a.visible?"":"none")}},show:function(a){dnn.cancelDelay(this.ns+"mout"),""!=this.ctl.style.display&&(this.refresh(),this.ctl.style.display="",this.ctr.className=this.ctr.className+" visible"),a&&this.beginHide()},beginHide:function(){this.moutDelay>0&&dnn.doDelay(this.ns+"mout",this.moutDelay,this._hideDelegate)},hide:function(){this.ctl.style.display="none",this.ctr.className=this.ctr.className.replace(" visible","")},buttonClick:function(c){var b=this.tb,a=new dnn.controls.DNNToolBarEventArgs(this);b.invoke_handler("click",a),a.get_cancel()||this.click()},buttonMouseOver:function(a){this.tb.show(!1),this.hover()},buttonMouseOut:function(a){this.tb.beginHide(),this.unhover()},dispose:function(){this._hideDelegate=null,this.actionHandler=null,dnn.controls.DNNToolBar.callBaseMethod(this,"dispose")}},dnn.controls.DNNToolBar.registerClass("dnn.controls.DNNToolBar",dnn.controls.control),dnn.controls.DNNToolBarButton=function(j,d,h,i,f,k,a,c,b,e,g){this.ctl=null,this.key=j,this.clickAction=d,this.tb=g,this.css=h,this.hoverCss=i,this.img=f,this.tooltip=a,this.txt=k,this.js=c,this.url=b,this.visible=e},dnn.controls.DNNToolBarButton.prototype={render:function(){if(!this.ctl){var d=this.tb;if(this.ctl=d.createChildControl("div",this.key,""),this.ctl.className=this.css,this.tooltip&&(this.ctl.title=this.tooltip),this.img){var b=document.createElement("img");b.src=this.img,this.ctl.appendChild(b)}if(this.txt){var c=document.createElement("span");c.innerHTML=this.txt,this.ctl.appendChild(c)}var a="mousedown";d.addHandlers(this.ctl,d.getDynamicEventObject(a,d.buttonClick),this),d.addHandlers(this.ctl,{mouseover:d.buttonMouseOver,mouseout:d.buttonMouseOut},this)}},hover:function(){this.hoverCss&&(this.ctl.className=this.css+" "+this.hoverCss)},unhover:function(){this.hoverCss&&(this.ctl.className=this.css)},click:function(){"js"==this.clickAction?eval(this.js):"navigate"==this.clickAction?dnn.dom.navigate(this.url):null!=this.tb.actionHandler&&this.tb.actionHandler(this,this.tb.relatedCtl)},getVal:function(a,b){return a?a:b}},dnn.controls.DNNToolBarButton.registerClass("dnn.controls.DNNToolBarButton");