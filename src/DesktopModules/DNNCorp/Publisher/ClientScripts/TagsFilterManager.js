
window.dnn=dnn||{};window.dnn.modules=dnn.modules||{};window.dnn.modules.publisher=dnn.modules.publisher||{};window.dnn.modules.publisher.TagsFilterManager=(function($,ko){"use strict";var configuration;var viewModel={items:ko.observableArray(),lastPage:ko.observable()};viewModel.getPage=function(page,callback){var params={moduleId:configuration.moduleId,page:page};dnn.modules.publisher.RequestUtils.request("Publisher","Filter","GetTopTags","GET",params,function(data){if(data.length>0){viewModel.items.removeAll();ko.utils.arrayPushAll(viewModel.items,data);}
if(typeof(callback)==="function")callback();});};viewModel.selectTag=function(tag){if(viewModel.selectedTags.indexOf(tag.name)>=0){viewModel.selectedTags.remove(tag.name);}else{viewModel.selectedTags.push(tag.name);}};function init(config){configuration=config;viewModel.selectedTags=config.selectedTags;var viewModelBinding=$(config.bindingElementSelector);var node=viewModelBinding[0];viewModel.items.removeAll();ko.utils.arrayPushAll(viewModel.items,config.items);viewModel.lastPage(Math.ceil(config.count/config.pageSize));ko.applyBindings(viewModel,node);}
return{init:init};})(jQuery||$,ko);