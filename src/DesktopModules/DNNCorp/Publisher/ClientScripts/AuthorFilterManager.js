
window.dnn=dnn||{};window.dnn.modules=dnn.modules||{};window.dnn.modules.publisher=dnn.modules.publisher||{};window.dnn.modules.publisher.AuthorFilterManager=(function($,ko){"use strict";var configuration;var viewModel={items:ko.observableArray(),lastPage:ko.observable()};viewModel.getPage=function(page,callback){var params={moduleId:configuration.moduleId,page:page};dnn.modules.publisher.RequestUtils.request("Publisher","Filter","GetTopAuthors","GET",params,function(data){if(data.length>0){viewModel.items.removeAll();ko.utils.arrayPushAll(viewModel.items,data);}
if(typeof(callback)==="function")callback();});};viewModel.selectAuthor=function(author){if(viewModel.selectedAuthor()===null||viewModel.selectedAuthor().key!==author.key){viewModel.selectedAuthor(author);}else{viewModel.selectedAuthor(null);}};function init(config){configuration=config;viewModel.selectedAuthor=config.selectedAuthor;var viewModelBinding=$(config.bindingElementSelector);var node=viewModelBinding[0];viewModel.items.removeAll();ko.utils.arrayPushAll(viewModel.items,config.items);viewModel.lastPage(Math.ceil(config.count/config.pageSize));ko.applyBindings(viewModel,node);}
return{init:init};})(jQuery||$,ko);