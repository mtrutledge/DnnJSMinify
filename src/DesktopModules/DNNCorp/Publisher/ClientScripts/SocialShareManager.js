
window.dnn=dnn||{};window.dnn.modules=dnn.modules||{};window.dnn.modules.publisher=dnn.modules.publisher||{};window.dnn.modules.publisher.SocialShareManager=(function($,ko){"use strict";var configuration;var viewModel={};function openPopup(target,width,height){window.open(target,'','height='+height+',width='+width+',directories=no,titlebar=no,toolbar=no,location=no,status=no,menubar=no');}
var shareFunctions={facebook:function(url){var query=$.param({u:url});var target='https://www.facebook.com/share.php?'+query;openPopup(target,600,225);},twitter:function(url){var query=$.param({status:url});var target='https://twitter.com/home?'+query;openPopup(target,600,400);},linkedin:function(url){var metaTitle=$('meta[property="og:title"]').attr('content');var query=$.param({mini:true,url:url,title:metaTitle});var target="http://www.linkedin.com/shareArticle?"+query;openPopup(target,1024,400);},pinterest:function(url){var metaImage=$('meta[name="og:image"]').attr('content');var query=$.param({url:url,description:document.title,media:metaImage});var target='http://pinterest.com/pin/create/button/?'+query;openPopup(target,600,400);}};function shareCompletion(url,network){var params={contentItemId:configuration.contentItemId,groupId:-1,context:undefined,network:network,url:url};dnn.modules.publisher.RequestUtils.request("Publisher","Share","ShareCompletion","POST",params);}
viewModel.share=function(d,e){var network=e.target.className;var url=window.location.href;shareFunctions[network](url);if(configuration.userId>0){shareCompletion(url,network);}};function init(config){configuration=config;var viewModelBinding=$(config.bindingElementSelector);var node=viewModelBinding[0];if(ko.dataFor(node)){ko.cleanNode(node);}
ko.applyBindings(viewModel,node);}
return{init:init};})(jQuery||$,ko);