
(function($,ko){'use strict';ko.bindingHandlers.folderPicker={init:function(element,valueAccessor){var koOptions=valueAccessor();var selectFolderCallback=koOptions.selectFolderCallback;var koElement=koOptions.koElement;var id="#{0}".replace(/\{0\}/g,element.id);var folderPicker;var selectFolderProxyCallback=function(){selectFolderCallback.call(koElement,this.selectedItem());};var options={disabled:false,initialState:{selectedItem:koOptions.selectedFolder},services:{moduleId:'',serviceRoot:'InternalServices',getTreeMethod:'ItemListService/GetFolders',sortTreeMethod:'ItemListService/SortFolders',getNodeDescendantsMethod:'ItemListService/GetFolderDescendants',searchTreeMethod:'ItemListService/SearchFolders',getTreeWithNodeMethod:'ItemListService/GetTreePathForFolder',rootId:'Root',parameters:{}},onSelectionChangedBackScript:selectFolderProxyCallback};$.extend(true,options,koOptions.options);dnn.createDropDownList(id,options,{});$(function(){folderPicker=dnn[element.id];var item={key:-1,value:koOptions.selectedItemText};folderPicker.selectedItem(item);});koElement.subscribe(function(folder){folderPicker.selectedItem(folder);dnn.setVar(element.id+'_expandPath',folder.path);});}};})(jQuery||$,ko);